import{f as u,P as A,l as E,K as y,t as a,B as f,bc as I}from"./index-aMUXh-4r.js";import{I as C,a as R,D as w}from"./QueryParams-0b9674a5.browser.esm-aHCLWLZd.js";async function g(e,n,t,s,l){try{const d=(await u(()=>import("./IERC165-rumQzOOh.js"),__vite__mapDeps([]))).default,c=new A(t,d,e),[p,v]=await Promise.all([c.supportsInterface(C),c.supportsInterface(R)]);if(p){const r=(await u(()=>import("./index-aMUXh-4r.js").then(T=>T.dq),__vite__mapDeps([0,1]))).default,o=new A(t,r,e);if(await o.isApprovedForAll(l,n))return!0;let i;try{i=await o.getApproved(s)}catch{}return(i==null?void 0:i.toLowerCase())===n.toLowerCase()}else if(v){const r=(await u(()=>import("./index-aMUXh-4r.js").then(_=>_.ds),__vite__mapDeps([0,1]))).default;return await new A(t,r,e).isApprovedForAll(l,n)}else return console.error("Contract does not implement ERC 1155 or ERC 721."),!1}catch(d){return console.error("Failed to check if token is approved",d),!1}}async function L(e,n,t,s,l){const d=(await u(()=>import("./IERC165-rumQzOOh.js"),__vite__mapDeps([]))).default,c=new E(e.getSignerOrProvider(),t,d,e.options,e.storage),[p,v]=await Promise.all([c.read("supportsInterface",[C]),c.read("supportsInterface",[R])]);if(p){const r=(await u(()=>import("./index-aMUXh-4r.js").then(i=>i.dq),__vite__mapDeps([0,1]))).default,o=new E(e.getSignerOrProvider(),t,r,e.options,e.storage);await o.read("isApprovedForAll",[l,n])||(await o.read("getApproved",[s])).toLowerCase()===n.toLowerCase()||await o.sendTransaction("setApprovalForAll",[n,!0])}else if(v){const r=(await u(()=>import("./index-aMUXh-4r.js").then(i=>i.ds),__vite__mapDeps([0,1]))).default,o=new E(e.getSignerOrProvider(),t,r,e.options,e.storage);await o.read("isApprovedForAll",[l,n])||await o.sendTransaction("setApprovalForAll",[n,!0])}else throw Error("Contract must implement ERC 1155 or ERC 721.")}function b(e){switch(a(e.assetContractAddress!==void 0&&e.assetContractAddress!==null),a(e.buyoutPricePerToken!==void 0&&e.buyoutPricePerToken!==null),a(e.listingDurationInSeconds!==void 0&&e.listingDurationInSeconds!==null),a(e.startTimestamp!==void 0&&e.startTimestamp!==null),a(e.tokenId!==void 0&&e.tokenId!==null),a(e.quantity!==void 0&&e.quantity!==null),e.type){case"NewAuctionListing":a(e.reservePricePerToken!==void 0&&e.reservePricePerToken!==null)}}async function m(e,n,t){return{quantity:t.quantityDesired,pricePerToken:t.pricePerToken,currencyContractAddress:t.currency,buyerAddress:t.offeror,quantityDesired:t.quantityWanted,currencyValue:await y(e,t.currency,t.quantityWanted.mul(t.pricePerToken)),listingId:n}}function D(e,n,t){return t=f.from(t),e=f.from(e),n=f.from(n),e.eq(f.from(0))?!1:n.sub(e).mul(I).div(e).gte(t)}async function k(e,n,t){const s=[];for(;n-e>w;)s.push(t(e,e+w-1)),e+=w;return s.push(t(e,n-1)),await Promise.all(s)}export{g as a,k as g,L as h,D as i,m,b as v};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-aMUXh-4r.js","assets/index-AQUmr87M.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
