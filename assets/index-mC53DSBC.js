import{cw as zf,b2 as E,cy as Uf,cA as Wn,cq as Lt,dj as g,b1 as qf}from"./index-JUjgtMm3.js";import{h as Jf,c as Gf,f as Qf,j as Zf,i as Ae,k as Hr,l as Oc,m as it,n as Ps,o as js,s as Hn,p as Nc,q as Lc,t as Pc,u as Yf,v as Kf,w as Xf,x as eh,y as th}from"./index-toBz6Za-.js";function rh(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var Ds={},jr={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.walletLogo=void 0;const nh=(t,e)=>{let r;switch(t){case"standard":return r=e,`data:image/svg+xml,%3Csvg width='${e}' height='${r}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return r=e,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${r}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return r=(.1*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return r=(.25*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return r=(.1*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return r=(.25*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;default:return r=e,`data:image/svg+xml,%3Csvg width='${e}' height='${r}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `}};zn.walletLogo=nh;var Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.LINK_API_URL=void 0;Un.LINK_API_URL="https://www.walletlink.org";var qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.ScopedLocalStorage=void 0;class ih{constructor(e){this.scope=e}setItem(e,r){localStorage.setItem(this.scopedKey(e),r)}getItem(e){return localStorage.getItem(this.scopedKey(e))}removeItem(e){localStorage.removeItem(this.scopedKey(e))}clear(){const e=this.scopedKey(""),r=[];for(let n=0;n<localStorage.length;n++){const i=localStorage.key(n);typeof i=="string"&&i.startsWith(e)&&r.push(i)}r.forEach(n=>localStorage.removeItem(n))}scopedKey(e){return`${this.scope}:${e}`}}qn.ScopedLocalStorage=ih;var Yt={},Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});const sh=zf;function zo(t,e,r){try{Reflect.apply(t,e,r)}catch(n){setTimeout(()=>{throw n})}}function oh(t){const e=t.length,r=new Array(e);for(let n=0;n<e;n+=1)r[n]=t[n];return r}let ah=class extends sh.EventEmitter{emit(e,...r){let n=e==="error";const i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){let o;if(r.length>0&&([o]=r),o instanceof Error)throw o;const a=new Error(`Unhandled error.${o?` (${o.message})`:""}`);throw a.context=o,a}const s=i[e];if(s===void 0)return!1;if(typeof s=="function")zo(s,this,r);else{const o=s.length,a=oh(s);for(let u=0;u<o;u+=1)zo(a[u],this,r)}return!0}};Pt.default=ah;var hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.EVENTS=void 0;hr.EVENTS={STARTED_CONNECTING:"walletlink_sdk.started.connecting",CONNECTED_STATE_CHANGE:"walletlink_sdk.connected",DISCONNECTED:"walletlink_sdk.disconnected",METADATA_DESTROYED:"walletlink_sdk_metadata_destroyed",LINKED:"walletlink_sdk.linked",FAILURE:"walletlink_sdk.generic_failure",SESSION_CONFIG_RECEIVED:"walletlink_sdk.session_config_event_received",ETH_ACCOUNTS_STATE:"walletlink_sdk.eth_accounts_state",SESSION_STATE_CHANGE:"walletlink_sdk.session_state_change",UNLINKED_ERROR_STATE:"walletlink_sdk.unlinked_error_state",SKIPPED_CLEARING_SESSION:"walletlink_sdk.skipped_clearing_session",GENERAL_ERROR:"walletlink_sdk.general_error",WEB3_REQUEST:"walletlink_sdk.web3.request",WEB3_REQUEST_PUBLISHED:"walletlink_sdk.web3.request_published",WEB3_RESPONSE:"walletlink_sdk.web3.response",UNKNOWN_ADDRESS_ENCOUNTERED:"walletlink_sdk.unknown_address_encountered"};var zr={},Bs={},bt={},ch=Dr;Dr.default=Dr;Dr.stable=Bc;Dr.stableStringify=Bc;var Tn="[...]",jc="[Circular]",Tt=[],xt=[];function Dc(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Dr(t,e,r,n){typeof n>"u"&&(n=Dc()),fs(t,"",0,[],void 0,0,n);var i;try{xt.length===0?i=JSON.stringify(t,e,r):i=JSON.stringify(t,Fc(e),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Tt.length!==0;){var s=Tt.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function Jt(t,e,r,n){var i=Object.getOwnPropertyDescriptor(n,r);i.get!==void 0?i.configurable?(Object.defineProperty(n,r,{value:t}),Tt.push([n,r,e,i])):xt.push([e,r,t]):(n[r]=t,Tt.push([n,r,e]))}function fs(t,e,r,n,i,s,o){s+=1;var a;if(typeof t=="object"&&t!==null){for(a=0;a<n.length;a++)if(n[a]===t){Jt(jc,t,e,i);return}if(typeof o.depthLimit<"u"&&s>o.depthLimit){Jt(Tn,t,e,i);return}if(typeof o.edgesLimit<"u"&&r+1>o.edgesLimit){Jt(Tn,t,e,i);return}if(n.push(t),Array.isArray(t))for(a=0;a<t.length;a++)fs(t[a],a,a,n,t,s,o);else{var u=Object.keys(t);for(a=0;a<u.length;a++){var c=u[a];fs(t[c],c,a,n,t,s,o)}}n.pop()}}function uh(t,e){return t<e?-1:t>e?1:0}function Bc(t,e,r,n){typeof n>"u"&&(n=Dc());var i=hs(t,"",0,[],void 0,0,n)||t,s;try{xt.length===0?s=JSON.stringify(i,e,r):s=JSON.stringify(i,Fc(e),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Tt.length!==0;){var o=Tt.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return s}function hs(t,e,r,n,i,s,o){s+=1;var a;if(typeof t=="object"&&t!==null){for(a=0;a<n.length;a++)if(n[a]===t){Jt(jc,t,e,i);return}try{if(typeof t.toJSON=="function")return}catch{return}if(typeof o.depthLimit<"u"&&s>o.depthLimit){Jt(Tn,t,e,i);return}if(typeof o.edgesLimit<"u"&&r+1>o.edgesLimit){Jt(Tn,t,e,i);return}if(n.push(t),Array.isArray(t))for(a=0;a<t.length;a++)hs(t[a],a,a,n,t,s,o);else{var u={},c=Object.keys(t).sort(uh);for(a=0;a<c.length;a++){var l=c[a];hs(t[l],l,a,n,t,s,o),u[l]=t[l]}if(typeof i<"u")Tt.push([i,e,t]),i[e]=u;else return u}n.pop()}}function Fc(t){return t=typeof t<"u"?t:function(e,r){return r},function(e,r){if(xt.length>0)for(var n=0;n<xt.length;n++){var i=xt[n];if(i[1]===e&&i[0]===r){r=i[2],xt.splice(n,1);break}}return t.call(this,e,r)}}Object.defineProperty(bt,"__esModule",{value:!0});bt.EthereumProviderError=bt.EthereumRpcError=void 0;const lh=ch;class $c extends Error{constructor(e,r,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=e,n!==void 0&&(this.data=n)}serialize(){const e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return lh.default(this.serialize(),dh,2)}}bt.EthereumRpcError=$c;class fh extends $c{constructor(e,r,n){if(!hh(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,r,n)}}bt.EthereumProviderError=fh;function hh(t){return Number.isInteger(t)&&t>=1e3&&t<=4999}function dh(t,e){if(e!=="[Circular]")return e}var Fs={},gt={};Object.defineProperty(gt,"__esModule",{value:!0});gt.errorValues=gt.errorCodes=void 0;gt.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};gt.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=gt,r=bt,n=e.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",s={code:n,message:o(n)};t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function o(h,d=i){if(Number.isInteger(h)){const p=h.toString();if(f(e.errorValues,p))return e.errorValues[p].message;if(c(h))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return d}t.getMessageFromCode=o;function a(h){if(!Number.isInteger(h))return!1;const d=h.toString();return!!(e.errorValues[d]||c(h))}t.isValidCode=a;function u(h,{fallbackError:d=s,shouldIncludeStack:p=!1}={}){var v,y;if(!d||!Number.isInteger(d.code)||typeof d.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(h instanceof r.EthereumRpcError)return h.serialize();const b={};if(h&&typeof h=="object"&&!Array.isArray(h)&&f(h,"code")&&a(h.code)){const _=h;b.code=_.code,_.message&&typeof _.message=="string"?(b.message=_.message,f(_,"data")&&(b.data=_.data)):(b.message=o(b.code),b.data={originalError:l(h)})}else{b.code=d.code;const _=(v=h)===null||v===void 0?void 0:v.message;b.message=_&&typeof _=="string"?_:d.message,b.data={originalError:l(h)}}const m=(y=h)===null||y===void 0?void 0:y.stack;return p&&h&&m&&typeof m=="string"&&(b.stack=m),b}t.serializeError=u;function c(h){return h>=-32099&&h<=-32e3}function l(h){return h&&typeof h=="object"&&!Array.isArray(h)?Object.assign({},h):h}function f(h,d){return Object.prototype.hasOwnProperty.call(h,d)}})(Fs);var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.ethErrors=void 0;const $s=bt,Vc=Fs,ce=gt;Jn.ethErrors={rpc:{parse:t=>Ee(ce.errorCodes.rpc.parse,t),invalidRequest:t=>Ee(ce.errorCodes.rpc.invalidRequest,t),invalidParams:t=>Ee(ce.errorCodes.rpc.invalidParams,t),methodNotFound:t=>Ee(ce.errorCodes.rpc.methodNotFound,t),internal:t=>Ee(ce.errorCodes.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Ee(e,t)},invalidInput:t=>Ee(ce.errorCodes.rpc.invalidInput,t),resourceNotFound:t=>Ee(ce.errorCodes.rpc.resourceNotFound,t),resourceUnavailable:t=>Ee(ce.errorCodes.rpc.resourceUnavailable,t),transactionRejected:t=>Ee(ce.errorCodes.rpc.transactionRejected,t),methodNotSupported:t=>Ee(ce.errorCodes.rpc.methodNotSupported,t),limitExceeded:t=>Ee(ce.errorCodes.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>Er(ce.errorCodes.provider.userRejectedRequest,t),unauthorized:t=>Er(ce.errorCodes.provider.unauthorized,t),unsupportedMethod:t=>Er(ce.errorCodes.provider.unsupportedMethod,t),disconnected:t=>Er(ce.errorCodes.provider.disconnected,t),chainDisconnected:t=>Er(ce.errorCodes.provider.chainDisconnected,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:r,data:n}=t;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new $s.EthereumProviderError(e,r,n)}}};function Ee(t,e){const[r,n]=Wc(e);return new $s.EthereumRpcError(t,r||Vc.getMessageFromCode(t),n)}function Er(t,e){const[r,n]=Wc(e);return new $s.EthereumProviderError(t,r||Vc.getMessageFromCode(t),n)}function Wc(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:r}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,r]}}return[]}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const e=bt;Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const r=Fs;Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=Jn;Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const i=gt;Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(Bs);var W={},Gn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Web3Method=void 0,function(e){e.requestEthereumAccounts="requestEthereumAccounts",e.signEthereumMessage="signEthereumMessage",e.signEthereumTransaction="signEthereumTransaction",e.submitEthereumTransaction="submitEthereumTransaction",e.ethereumAddressFromSignedMessage="ethereumAddressFromSignedMessage",e.scanQRCode="scanQRCode",e.generic="generic",e.childRequestEthereumAccounts="childRequestEthereumAccounts",e.addEthereumChain="addEthereumChain",e.switchEthereumChain="switchEthereumChain",e.makeEthereumJSONRPCRequest="makeEthereumJSONRPCRequest",e.watchAsset="watchAsset",e.selectProvider="selectProvider"}(t.Web3Method||(t.Web3Method={}))})(Gn);Object.defineProperty(W,"__esModule",{value:!0});W.EthereumAddressFromSignedMessageResponse=W.SubmitEthereumTransactionResponse=W.SignEthereumTransactionResponse=W.SignEthereumMessageResponse=W.isRequestEthereumAccountsResponse=W.SelectProviderResponse=W.WatchAssetReponse=W.RequestEthereumAccountsResponse=W.SwitchEthereumChainResponse=W.AddEthereumChainResponse=W.isErrorResponse=void 0;const Ye=Gn;function ph(t){var e,r;return((e=t)===null||e===void 0?void 0:e.method)!==void 0&&((r=t)===null||r===void 0?void 0:r.errorMessage)!==void 0}W.isErrorResponse=ph;function bh(t){return{method:Ye.Web3Method.addEthereumChain,result:t}}W.AddEthereumChainResponse=bh;function gh(t){return{method:Ye.Web3Method.switchEthereumChain,result:t}}W.SwitchEthereumChainResponse=gh;function yh(t){return{method:Ye.Web3Method.requestEthereumAccounts,result:t}}W.RequestEthereumAccountsResponse=yh;function mh(t){return{method:Ye.Web3Method.watchAsset,result:t}}W.WatchAssetReponse=mh;function vh(t){return{method:Ye.Web3Method.selectProvider,result:t}}W.SelectProviderResponse=vh;function _h(t){return t&&t.method===Ye.Web3Method.requestEthereumAccounts}W.isRequestEthereumAccountsResponse=_h;function wh(t){return{method:Ye.Web3Method.signEthereumMessage,result:t}}W.SignEthereumMessageResponse=wh;function Sh(t){return{method:Ye.Web3Method.signEthereumTransaction,result:t}}W.SignEthereumTransactionResponse=Sh;function Eh(t){return{method:Ye.Web3Method.submitEthereumTransaction,result:t}}W.SubmitEthereumTransactionResponse=Eh;function Ch(t){return{method:Ye.Web3Method.ethereumAddressFromSignedMessage,result:t}}W.EthereumAddressFromSignedMessageResponse=Ch;var dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.LIB_VERSION=void 0;dr.LIB_VERSION="3.7.2";(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorCode=t.serializeError=t.standardErrors=t.standardErrorMessage=t.standardErrorCodes=void 0;const e=Bs,r=W,n=dr;t.standardErrorCodes=Object.freeze(Object.assign(Object.assign({},e.errorCodes),{provider:Object.freeze(Object.assign(Object.assign({},e.errorCodes.provider),{unsupportedChain:4902}))}));function i(l){return l!==void 0?(0,e.getMessageFromCode)(l):"Unknown error"}t.standardErrorMessage=i,t.standardErrors=Object.freeze(Object.assign(Object.assign({},e.ethErrors),{provider:Object.freeze(Object.assign(Object.assign({},e.ethErrors.provider),{unsupportedChain:(l="")=>e.ethErrors.provider.custom({code:t.standardErrorCodes.provider.unsupportedChain,message:`Unrecognized chain ID ${l}. Try adding the chain using wallet_addEthereumChain first.`})}))}));function s(l,f){const h=(0,e.serializeError)(o(l),{shouldIncludeStack:!0}),d=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");d.searchParams.set("version",n.LIB_VERSION),d.searchParams.set("code",h.code.toString());const p=a(h.data,f);return p&&d.searchParams.set("method",p),d.searchParams.set("message",h.message),Object.assign(Object.assign({},h),{docUrl:d.href})}t.serializeError=s;function o(l){return typeof l=="string"?{message:l,code:t.standardErrorCodes.rpc.internal}:(0,r.isErrorResponse)(l)?Object.assign(Object.assign({},l),{message:l.errorMessage,code:l.errorCode,data:{method:l.method,result:l.result}}):l}function a(l,f){var h;const d=(h=l)===null||h===void 0?void 0:h.method;if(d)return d;if(f!==void 0)return typeof f=="string"?f:Array.isArray(f)?f.length>0?f[0].method:void 0:f.method}function u(l){var f;if(typeof l=="number")return l;if(c(l))return(f=l.code)!==null&&f!==void 0?f:l.errorCode}t.getErrorCode=u;function c(l){return typeof l=="object"&&l!==null&&(typeof l.code=="number"||typeof l.errorCode=="number")}})(zr);var pr={},S={},Vs=typeof Map=="function"&&Map.prototype,Bi=Object.getOwnPropertyDescriptor&&Vs?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,An=Vs&&Bi&&typeof Bi.get=="function"?Bi.get:null,Uo=Vs&&Map.prototype.forEach,Ws=typeof Set=="function"&&Set.prototype,Fi=Object.getOwnPropertyDescriptor&&Ws?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,On=Ws&&Fi&&typeof Fi.get=="function"?Fi.get:null,qo=Ws&&Set.prototype.forEach,kh=typeof WeakMap=="function"&&WeakMap.prototype,Rr=kh?WeakMap.prototype.has:null,Ih=typeof WeakSet=="function"&&WeakSet.prototype,Tr=Ih?WeakSet.prototype.has:null,Mh=typeof WeakRef=="function"&&WeakRef.prototype,Jo=Mh?WeakRef.prototype.deref:null,xh=Boolean.prototype.valueOf,Rh=Object.prototype.toString,Th=Function.prototype.toString,Ah=String.prototype.match,Hs=String.prototype.slice,dt=String.prototype.replace,Oh=String.prototype.toUpperCase,Go=String.prototype.toLowerCase,Hc=RegExp.prototype.test,Qo=Array.prototype.concat,Ue=Array.prototype.join,Nh=Array.prototype.slice,Zo=Math.floor,ds=typeof BigInt=="function"?BigInt.prototype.valueOf:null,$i=Object.getOwnPropertySymbols,ps=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Kt=typeof Symbol=="function"&&typeof Symbol.iterator=="object",fe=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Kt||!0)?Symbol.toStringTag:null,zc=Object.prototype.propertyIsEnumerable,Yo=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Ko(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Hc.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-Zo(-t):Zo(t);if(n!==t){var i=String(n),s=Hs.call(e,i.length+1);return dt.call(i,r,"$&_")+"."+dt.call(dt.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return dt.call(e,r,"$&_")}var bs=Uf,Xo=bs.custom,ea=qc(Xo)?Xo:null,Lh=function t(e,r,n,i){var s=r||{};if(lt(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(lt(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=lt(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(lt(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(lt(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Gc(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return a?Ko(e,u):u}if(typeof e=="bigint"){var c=String(e)+"n";return a?Ko(e,c):c}var l=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=l&&l>0&&typeof e=="object")return gs(e)?"[Array]":"[Object]";var f=Kh(s,n);if(typeof i>"u")i=[];else if(Jc(i,e)>=0)return"[Circular]";function h(ge,Ne,ot){if(Ne&&(i=Nh.call(i),i.push(Ne)),ot){var Fe={depth:s.depth};return lt(s,"quoteStyle")&&(Fe.quoteStyle=s.quoteStyle),t(ge,Fe,n+1,i)}return t(ge,s,n+1,i)}if(typeof e=="function"&&!ta(e)){var d=Hh(e),p=fn(e,h);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(p.length>0?" { "+Ue.call(p,", ")+" }":"")}if(qc(e)){var v=Kt?dt.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):ps.call(e);return typeof e=="object"&&!Kt?Cr(v):v}if(Qh(e)){for(var y="<"+Go.call(String(e.nodeName)),b=e.attributes||[],m=0;m<b.length;m++)y+=" "+b[m].name+"="+Uc(Ph(b[m].value),"double",s);return y+=">",e.childNodes&&e.childNodes.length&&(y+="..."),y+="</"+Go.call(String(e.nodeName))+">",y}if(gs(e)){if(e.length===0)return"[]";var _=fn(e,h);return f&&!Yh(_)?"["+ys(_,f)+"]":"[ "+Ue.call(_,", ")+" ]"}if(Dh(e)){var k=fn(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!zc.call(e,"cause")?"{ ["+String(e)+"] "+Ue.call(Qo.call("[cause]: "+h(e.cause),k),", ")+" }":k.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Ue.call(k,", ")+" }"}if(typeof e=="object"&&o){if(ea&&typeof e[ea]=="function"&&bs)return bs(e,{depth:l-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(zh(e)){var w=[];return Uo&&Uo.call(e,function(ge,Ne){w.push(h(Ne,e,!0)+" => "+h(ge,e))}),ra("Map",An.call(e),w,f)}if(Jh(e)){var x=[];return qo&&qo.call(e,function(ge){x.push(h(ge,e))}),ra("Set",On.call(e),x,f)}if(Uh(e))return Vi("WeakMap");if(Gh(e))return Vi("WeakSet");if(qh(e))return Vi("WeakRef");if(Fh(e))return Cr(h(Number(e)));if(Vh(e))return Cr(h(ds.call(e)));if($h(e))return Cr(xh.call(e));if(Bh(e))return Cr(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===E)return"{ [object globalThis] }";if(!jh(e)&&!ta(e)){var j=fn(e,h),z=Yo?Yo(e)===Object.prototype:e instanceof Object||e.constructor===Object,M=e instanceof Object?"":"null prototype",L=!z&&fe&&Object(e)===e&&fe in e?Hs.call(_t(e),8,-1):M?"Object":"",te=z||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",B=te+(L||M?"["+Ue.call(Qo.call([],L||[],M||[]),": ")+"] ":"");return j.length===0?B+"{}":f?B+"{"+ys(j,f)+"}":B+"{ "+Ue.call(j,", ")+" }"}return String(e)};function Uc(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function Ph(t){return dt.call(String(t),/"/g,"&quot;")}function gs(t){return _t(t)==="[object Array]"&&(!fe||!(typeof t=="object"&&fe in t))}function jh(t){return _t(t)==="[object Date]"&&(!fe||!(typeof t=="object"&&fe in t))}function ta(t){return _t(t)==="[object RegExp]"&&(!fe||!(typeof t=="object"&&fe in t))}function Dh(t){return _t(t)==="[object Error]"&&(!fe||!(typeof t=="object"&&fe in t))}function Bh(t){return _t(t)==="[object String]"&&(!fe||!(typeof t=="object"&&fe in t))}function Fh(t){return _t(t)==="[object Number]"&&(!fe||!(typeof t=="object"&&fe in t))}function $h(t){return _t(t)==="[object Boolean]"&&(!fe||!(typeof t=="object"&&fe in t))}function qc(t){if(Kt)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!ps)return!1;try{return ps.call(t),!0}catch{}return!1}function Vh(t){if(!t||typeof t!="object"||!ds)return!1;try{return ds.call(t),!0}catch{}return!1}var Wh=Object.prototype.hasOwnProperty||function(t){return t in this};function lt(t,e){return Wh.call(t,e)}function _t(t){return Rh.call(t)}function Hh(t){if(t.name)return t.name;var e=Ah.call(Th.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Jc(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function zh(t){if(!An||!t||typeof t!="object")return!1;try{An.call(t);try{On.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Uh(t){if(!Rr||!t||typeof t!="object")return!1;try{Rr.call(t,Rr);try{Tr.call(t,Tr)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function qh(t){if(!Jo||!t||typeof t!="object")return!1;try{return Jo.call(t),!0}catch{}return!1}function Jh(t){if(!On||!t||typeof t!="object")return!1;try{On.call(t);try{An.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Gh(t){if(!Tr||!t||typeof t!="object")return!1;try{Tr.call(t,Tr);try{Rr.call(t,Rr)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Qh(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Gc(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Gc(Hs.call(t,0,e.maxStringLength),e)+n}var i=dt.call(dt.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Zh);return Uc(i,"single",e)}function Zh(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+Oh.call(e.toString(16))}function Cr(t){return"Object("+t+")"}function Vi(t){return t+" { ? }"}function ra(t,e,r,n){var i=n?ys(r,n):Ue.call(r,", ");return t+" ("+e+") {"+i+"}"}function Yh(t){for(var e=0;e<t.length;e++)if(Jc(t[e],`
`)>=0)return!1;return!0}function Kh(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Ue.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Ue.call(Array(e+1),r)}}function ys(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Ue.call(t,","+r)+`
`+e.prev}function fn(t,e){var r=gs(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=lt(t,i)?e(t[i],t):""}var s=typeof $i=="function"?$i(t):[],o;if(Kt){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var u in t)lt(t,u)&&(r&&String(Number(u))===u&&u<t.length||Kt&&o["$"+u]instanceof Symbol||(Hc.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if(typeof $i=="function")for(var c=0;c<s.length;c++)zc.call(t,s[c])&&n.push("["+e(s[c])+"]: "+e(t[s[c]],t));return n}var zs=Jf,br=Gf,Xh=Lh,ed=zs("%TypeError%"),hn=zs("%WeakMap%",!0),dn=zs("%Map%",!0),td=br("WeakMap.prototype.get",!0),rd=br("WeakMap.prototype.set",!0),nd=br("WeakMap.prototype.has",!0),id=br("Map.prototype.get",!0),sd=br("Map.prototype.set",!0),od=br("Map.prototype.has",!0),Us=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},ad=function(t,e){var r=Us(t,e);return r&&r.value},cd=function(t,e,r){var n=Us(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},ud=function(t,e){return!!Us(t,e)},ld=function(){var e,r,n,i={assert:function(s){if(!i.has(s))throw new ed("Side channel does not contain "+Xh(s))},get:function(s){if(hn&&s&&(typeof s=="object"||typeof s=="function")){if(e)return td(e,s)}else if(dn){if(r)return id(r,s)}else if(n)return ad(n,s)},has:function(s){if(hn&&s&&(typeof s=="object"||typeof s=="function")){if(e)return nd(e,s)}else if(dn){if(r)return od(r,s)}else if(n)return ud(n,s);return!1},set:function(s,o){hn&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new hn),rd(e,s,o)):dn?(r||(r=new dn),sd(r,s,o)):(n||(n={key:{},next:null}),cd(n,s,o))}};return i},fd=String.prototype.replace,hd=/%20/g,Wi={RFC1738:"RFC1738",RFC3986:"RFC3986"},qs={default:Wi.RFC3986,formatters:{RFC1738:function(t){return fd.call(t,hd,"+")},RFC3986:function(t){return String(t)}},RFC1738:Wi.RFC1738,RFC3986:Wi.RFC3986},dd=qs,Hi=Object.prototype.hasOwnProperty,Ct=Array.isArray,$e=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),pd=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(Ct(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);r.obj[r.prop]=i}}},Qc=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},bd=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(Ct(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Hi.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return Ct(e)&&!Ct(r)&&(i=Qc(e,n)),Ct(e)&&Ct(r)?(r.forEach(function(s,o){if(Hi.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=t(a,s,n):e.push(s)}else e[o]=s}),e):Object.keys(r).reduce(function(s,o){var a=r[o];return Hi.call(s,o)?s[o]=t(s[o],a,n):s[o]=a,s},i)},gd=function(e,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},e)},yd=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},md=function(e,r,n,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});for(var a="",u=0;u<o.length;++u){var c=o.charCodeAt(u);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||s===dd.RFC1738&&(c===40||c===41)){a+=o.charAt(u);continue}if(c<128){a=a+$e[c];continue}if(c<2048){a=a+($e[192|c>>6]+$e[128|c&63]);continue}if(c<55296||c>=57344){a=a+($e[224|c>>12]+$e[128|c>>6&63]+$e[128|c&63]);continue}u+=1,c=65536+((c&1023)<<10|o.charCodeAt(u)&1023),a+=$e[240|c>>18]+$e[128|c>>12&63]+$e[128|c>>6&63]+$e[128|c&63]}return a},vd=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],i=0;i<r.length;++i)for(var s=r[i],o=s.obj[s.prop],a=Object.keys(o),u=0;u<a.length;++u){var c=a[u],l=o[c];typeof l=="object"&&l!==null&&n.indexOf(l)===-1&&(r.push({obj:o,prop:c}),n.push(l))}return pd(r),e},_d=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},wd=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Sd=function(e,r){return[].concat(e,r)},Ed=function(e,r){if(Ct(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(r(e[i]));return n}return r(e)},Zc={arrayToObject:Qc,assign:gd,combine:Sd,compact:vd,decode:yd,encode:md,isBuffer:wd,isRegExp:_d,maybeMap:Ed,merge:bd},Yc=ld,kn=Zc,Ar=qs,Cd=Object.prototype.hasOwnProperty,na={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},Xe=Array.isArray,kd=Array.prototype.push,Kc=function(t,e){kd.apply(t,Xe(e)?e:[e])},Id=Date.prototype.toISOString,ia=Ar.default,le={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:kn.encode,encodeValuesOnly:!1,format:ia,formatter:Ar.formatters[ia],indices:!1,serializeDate:function(e){return Id.call(e)},skipNulls:!1,strictNullHandling:!1},Md=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},zi={},xd=function t(e,r,n,i,s,o,a,u,c,l,f,h,d,p,v,y){for(var b=e,m=y,_=0,k=!1;(m=m.get(zi))!==void 0&&!k;){var w=m.get(e);if(_+=1,typeof w<"u"){if(w===_)throw new RangeError("Cyclic object value");k=!0}typeof m.get(zi)>"u"&&(_=0)}if(typeof u=="function"?b=u(r,b):b instanceof Date?b=f(b):n==="comma"&&Xe(b)&&(b=kn.maybeMap(b,function(Fe){return Fe instanceof Date?f(Fe):Fe})),b===null){if(s)return a&&!p?a(r,le.encoder,v,"key",h):r;b=""}if(Md(b)||kn.isBuffer(b)){if(a){var x=p?r:a(r,le.encoder,v,"key",h);return[d(x)+"="+d(a(b,le.encoder,v,"value",h))]}return[d(r)+"="+d(String(b))]}var j=[];if(typeof b>"u")return j;var z;if(n==="comma"&&Xe(b))p&&a&&(b=kn.maybeMap(b,a)),z=[{value:b.length>0?b.join(",")||null:void 0}];else if(Xe(u))z=u;else{var M=Object.keys(b);z=c?M.sort(c):M}for(var L=i&&Xe(b)&&b.length===1?r+"[]":r,te=0;te<z.length;++te){var B=z[te],ge=typeof B=="object"&&typeof B.value<"u"?B.value:b[B];if(!(o&&ge===null)){var Ne=Xe(b)?typeof n=="function"?n(L,B):L:L+(l?"."+B:"["+B+"]");y.set(e,_);var ot=Yc();ot.set(zi,y),Kc(j,t(ge,Ne,n,i,s,o,n==="comma"&&p&&Xe(b)?null:a,u,c,l,f,h,d,p,v,ot))}}return j},Rd=function(e){if(!e)return le;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||le.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Ar.default;if(typeof e.format<"u"){if(!Cd.call(Ar.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=Ar.formatters[n],s=le.filter;return(typeof e.filter=="function"||Xe(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:le.addQueryPrefix,allowDots:typeof e.allowDots>"u"?le.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:le.charsetSentinel,delimiter:typeof e.delimiter>"u"?le.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:le.encode,encoder:typeof e.encoder=="function"?e.encoder:le.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:le.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:le.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:le.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:le.strictNullHandling}},Td=function(t,e){var r=t,n=Rd(e),i,s;typeof n.filter=="function"?(s=n.filter,r=s("",r)):Xe(n.filter)&&(s=n.filter,i=s);var o=[];if(typeof r!="object"||r===null)return"";var a;e&&e.arrayFormat in na?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var u=na[a];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=u==="comma"&&e&&e.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var l=Yc(),f=0;f<i.length;++f){var h=i[f];n.skipNulls&&r[h]===null||Kc(o,xd(r[h],h,u,c,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}var d=o.join(n.delimiter),p=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),d.length>0?p+d:""},Xt=Zc,ms=Object.prototype.hasOwnProperty,Ad=Array.isArray,re={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Xt.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Od=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},Xc=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},Nd="utf8=%26%2310003%3B",Ld="utf8=%E2%9C%93",Pd=function(e,r){var n={__proto__:null},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=r.parameterLimit===1/0?void 0:r.parameterLimit,o=i.split(r.delimiter,s),a=-1,u,c=r.charset;if(r.charsetSentinel)for(u=0;u<o.length;++u)o[u].indexOf("utf8=")===0&&(o[u]===Ld?c="utf-8":o[u]===Nd&&(c="iso-8859-1"),a=u,u=o.length);for(u=0;u<o.length;++u)if(u!==a){var l=o[u],f=l.indexOf("]="),h=f===-1?l.indexOf("="):f+1,d,p;h===-1?(d=r.decoder(l,re.decoder,c,"key"),p=r.strictNullHandling?null:""):(d=r.decoder(l.slice(0,h),re.decoder,c,"key"),p=Xt.maybeMap(Xc(l.slice(h+1),r),function(v){return r.decoder(v,re.decoder,c,"value")})),p&&r.interpretNumericEntities&&c==="iso-8859-1"&&(p=Od(p)),l.indexOf("[]=")>-1&&(p=Ad(p)?[p]:p),ms.call(n,d)?n[d]=Xt.combine(n[d],p):n[d]=p}return n},jd=function(t,e,r,n){for(var i=n?e:Xc(e,r),s=t.length-1;s>=0;--s){var o,a=t[s];if(a==="[]"&&r.parseArrays)o=[].concat(i);else{o=r.plainObjects?Object.create(null):{};var u=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=parseInt(u,10);!r.parseArrays&&u===""?o={0:i}:!isNaN(c)&&a!==u&&String(c)===u&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(o=[],o[c]=i):u!=="__proto__"&&(o[u]=i)}i=o}return i},Dd=function(e,r,n,i){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,u=n.depth>0&&o.exec(s),c=u?s.slice(0,u.index):s,l=[];if(c){if(!n.plainObjects&&ms.call(Object.prototype,c)&&!n.allowPrototypes)return;l.push(c)}for(var f=0;n.depth>0&&(u=a.exec(s))!==null&&f<n.depth;){if(f+=1,!n.plainObjects&&ms.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(u[1])}return u&&l.push("["+s.slice(u.index)+"]"),jd(l,r,n,i)}},Bd=function(e){if(!e)return re;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?re.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?re.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:re.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:re.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:re.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:re.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:re.comma,decoder:typeof e.decoder=="function"?e.decoder:re.decoder,delimiter:typeof e.delimiter=="string"||Xt.isRegExp(e.delimiter)?e.delimiter:re.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:re.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:re.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:re.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:re.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:re.strictNullHandling}},Fd=function(t,e){var r=Bd(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?Pd(t,r):t,i=r.plainObjects?Object.create(null):{},s=Object.keys(n),o=0;o<s.length;++o){var a=s[o],u=Dd(a,n[a],r,typeof t=="string");i=Xt.merge(i,u,r)}return r.allowSparse===!0?i:Xt.compact(i)},$d=Td,Vd=Fd,Wd=qs,Hd={formats:Wd,parse:Vd,stringify:$d},Ur={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ProviderType=t.RegExpString=t.IntNumber=t.BigIntString=t.AddressString=t.HexString=t.OpaqueType=void 0;function e(){return n=>n}t.OpaqueType=e,t.HexString=e(),t.AddressString=e(),t.BigIntString=e();function r(n){return Math.floor(n)}t.IntNumber=r,t.RegExpString=e(),function(n){n.CoinbaseWallet="CoinbaseWallet",n.MetaMask="MetaMask",n.Unselected=""}(t.ProviderType||(t.ProviderType={}))})(Ur);var zd=E&&E.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(S,"__esModule",{value:!0});S.isInIFrame=S.createQrUrl=S.getFavicon=S.range=S.isBigNumber=S.ensureParsedJSONObject=S.ensureBN=S.ensureRegExpString=S.ensureIntNumber=S.ensureBuffer=S.ensureAddressString=S.ensureEvenLengthHexString=S.ensureHexString=S.isHexString=S.prepend0x=S.strip0x=S.has0xPrefix=S.hexStringFromIntNumber=S.intNumberFromHexString=S.bigIntStringFromBN=S.hexStringFromBuffer=S.hexStringToUint8Array=S.uint8ArrayToHex=S.randomBytesHex=void 0;const ft=zd(Wn),Ud=Hd,jt=zr,Re=Ur,eu=/^[0-9]*$/,tu=/^[a-f0-9]*$/;function qd(t){return ru(crypto.getRandomValues(new Uint8Array(t)))}S.randomBytesHex=qd;function ru(t){return[...t].map(e=>e.toString(16).padStart(2,"0")).join("")}S.uint8ArrayToHex=ru;function Jd(t){return new Uint8Array(t.match(/.{1,2}/g).map(e=>parseInt(e,16)))}S.hexStringToUint8Array=Jd;function Gd(t,e=!1){const r=t.toString("hex");return(0,Re.HexString)(e?"0x"+r:r)}S.hexStringFromBuffer=Gd;function Qd(t){return(0,Re.BigIntString)(t.toString(10))}S.bigIntStringFromBN=Qd;function Zd(t){return(0,Re.IntNumber)(new ft.default(Jr(t,!1),16).toNumber())}S.intNumberFromHexString=Zd;function Yd(t){return(0,Re.HexString)("0x"+new ft.default(t).toString(16))}S.hexStringFromIntNumber=Yd;function Js(t){return t.startsWith("0x")||t.startsWith("0X")}S.has0xPrefix=Js;function Qn(t){return Js(t)?t.slice(2):t}S.strip0x=Qn;function nu(t){return Js(t)?"0x"+t.slice(2):"0x"+t}S.prepend0x=nu;function qr(t){if(typeof t!="string")return!1;const e=Qn(t).toLowerCase();return tu.test(e)}S.isHexString=qr;function iu(t,e=!1){if(typeof t=="string"){const r=Qn(t).toLowerCase();if(tu.test(r))return(0,Re.HexString)(e?"0x"+r:r)}throw jt.standardErrors.rpc.invalidParams(`"${String(t)}" is not a hexadecimal string`)}S.ensureHexString=iu;function Jr(t,e=!1){let r=iu(t,!1);return r.length%2===1&&(r=(0,Re.HexString)("0"+r)),e?(0,Re.HexString)("0x"+r):r}S.ensureEvenLengthHexString=Jr;function Kd(t){if(typeof t=="string"){const e=Qn(t).toLowerCase();if(qr(e)&&e.length===40)return(0,Re.AddressString)(nu(e))}throw jt.standardErrors.rpc.invalidParams(`Invalid Ethereum address: ${String(t)}`)}S.ensureAddressString=Kd;function Xd(t){if(Buffer.isBuffer(t))return t;if(typeof t=="string")if(qr(t)){const e=Jr(t,!1);return Buffer.from(e,"hex")}else return Buffer.from(t,"utf8");throw jt.standardErrors.rpc.invalidParams(`Not binary data: ${String(t)}`)}S.ensureBuffer=Xd;function su(t){if(typeof t=="number"&&Number.isInteger(t))return(0,Re.IntNumber)(t);if(typeof t=="string"){if(eu.test(t))return(0,Re.IntNumber)(Number(t));if(qr(t))return(0,Re.IntNumber)(new ft.default(Jr(t,!1),16).toNumber())}throw jt.standardErrors.rpc.invalidParams(`Not an integer: ${String(t)}`)}S.ensureIntNumber=su;function ep(t){if(t instanceof RegExp)return(0,Re.RegExpString)(t.toString());throw jt.standardErrors.rpc.invalidParams(`Not a RegExp: ${String(t)}`)}S.ensureRegExpString=ep;function tp(t){if(t!==null&&(ft.default.isBN(t)||ou(t)))return new ft.default(t.toString(10),10);if(typeof t=="number")return new ft.default(su(t));if(typeof t=="string"){if(eu.test(t))return new ft.default(t,10);if(qr(t))return new ft.default(Jr(t,!1),16)}throw jt.standardErrors.rpc.invalidParams(`Not an integer: ${String(t)}`)}S.ensureBN=tp;function rp(t){if(typeof t=="string")return JSON.parse(t);if(typeof t=="object")return t;throw jt.standardErrors.rpc.invalidParams(`Not a JSON string or an object: ${String(t)}`)}S.ensureParsedJSONObject=rp;function ou(t){if(t==null||typeof t.constructor!="function")return!1;const{constructor:e}=t;return typeof e.config=="function"&&typeof e.EUCLID=="number"}S.isBigNumber=ou;function np(t,e){return Array.from({length:e-t},(r,n)=>t+n)}S.range=np;function ip(){const t=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:e,host:r}=document.location,n=t?t.getAttribute("href"):null;return!n||n.startsWith("javascript:")?null:n.startsWith("http://")||n.startsWith("https://")||n.startsWith("data:")?n:n.startsWith("//")?e+n:`${e}//${r}${n}`}S.getFavicon=ip;function sp(t,e,r,n,i,s){const o=n?"parent-id":"id",a=(0,Ud.stringify)({[o]:t,secret:e,server:r,v:i,chainId:s});return`${r}/#/link?${a}`}S.createQrUrl=sp;function op(){try{return window.frameElement!==null}catch{return!1}}S.isInIFrame=op;Object.defineProperty(pr,"__esModule",{value:!0});pr.Session=void 0;const sa=Qf,oa=S,aa="session:id",ca="session:secret",ua="session:linked";class Gs{constructor(e,r,n,i){this._storage=e,this._id=r||(0,oa.randomBytesHex)(16),this._secret=n||(0,oa.randomBytesHex)(32),this._key=new sa.sha256().update(`${this._id}, ${this._secret} WalletLink`).digest("hex"),this._linked=!!i}static load(e){const r=e.getItem(aa),n=e.getItem(ua),i=e.getItem(ca);return r&&i?new Gs(e,r,i,n==="1"):null}static hash(e){return new sa.sha256().update(e).digest("hex")}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(e){this._linked=e,this.persistLinked()}save(){return this._storage.setItem(aa,this._id),this._storage.setItem(ca,this._secret),this.persistLinked(),this}persistLinked(){this._storage.setItem(ua,this._linked?"1":"0")}}pr.Session=Gs;var Be={};Object.defineProperty(Be,"__esModule",{value:!0});Be.WalletSDKRelayAbstract=Be.APP_VERSION_KEY=Be.LOCAL_STORAGE_ADDRESSES_KEY=Be.WALLET_USER_NAME_KEY=void 0;const la=zr;Be.WALLET_USER_NAME_KEY="walletUsername";Be.LOCAL_STORAGE_ADDRESSES_KEY="Addresses";Be.APP_VERSION_KEY="AppVersion";class ap{async makeEthereumJSONRPCRequest(e,r){if(!r)throw new Error("Error: No jsonRpcUrl provided");return window.fetch(r,{method:"POST",body:JSON.stringify(e),mode:"cors",headers:{"Content-Type":"application/json"}}).then(n=>n.json()).then(n=>{if(!n)throw la.standardErrors.rpc.parse({});const i=n,{error:s}=i;if(s)throw(0,la.serializeError)(s,e.method);return i})}}Be.WalletSDKRelayAbstract=ap;const cp=Zf,up=Wn;function au(t){return Buffer.allocUnsafe(t).fill(0)}function cu(t,e,r){const n=au(e);return t=Zn(t),r?t.length<e?(t.copy(n),n):t.slice(0,e):t.length<e?(t.copy(n,e-t.length),n):t.slice(-e)}function lp(t,e){return cu(t,e,!0)}function Zn(t){if(!Buffer.isBuffer(t))if(Array.isArray(t))t=Buffer.from(t);else if(typeof t=="string")uu(t)?t=Buffer.from(dp(lu(t)),"hex"):t=Buffer.from(t);else if(typeof t=="number")t=intToBuffer(t);else if(t==null)t=Buffer.allocUnsafe(0);else if(up.isBN(t))t=t.toArrayLike(Buffer);else if(t.toArray)t=Buffer.from(t.toArray());else throw new Error("invalid type");return t}function fp(t){return t=Zn(t),"0x"+t.toString("hex")}function hp(t,e){return t=Zn(t),e||(e=256),cp("keccak"+e).update(t).digest()}function dp(t){return t.length%2?"0"+t:t}function uu(t){return typeof t=="string"&&t.match(/^0x[0-9A-Fa-f]*$/)}function lu(t){return typeof t=="string"&&t.startsWith("0x")?t.slice(2):t}var fu={zeros:au,setLength:cu,setLengthRight:lp,isHexString:uu,stripHexPrefix:lu,toBuffer:Zn,bufferToHex:fp,keccak:hp};const At=fu,Rt=Wn;function hu(t){return t.startsWith("int[")?"int256"+t.slice(3):t==="int"?"int256":t.startsWith("uint[")?"uint256"+t.slice(4):t==="uint"?"uint256":t.startsWith("fixed[")?"fixed128x128"+t.slice(5):t==="fixed"?"fixed128x128":t.startsWith("ufixed[")?"ufixed128x128"+t.slice(6):t==="ufixed"?"ufixed128x128":t}function Gt(t){return parseInt(/^\D+(\d+)$/.exec(t)[1],10)}function fa(t){var e=/^\D+(\d+)x(\d+)$/.exec(t);return[parseInt(e[1],10),parseInt(e[2],10)]}function du(t){var e=t.match(/(.*)\[(.*?)\]$/);return e?e[2]===""?"dynamic":parseInt(e[2],10):null}function kt(t){var e=typeof t;if(e==="string")return At.isHexString(t)?new Rt(At.stripHexPrefix(t),16):new Rt(t,10);if(e==="number")return new Rt(t);if(t.toArray)return t;throw new Error("Argument is not a number")}function He(t,e){var r,n,i,s;if(t==="address")return He("uint160",kt(e));if(t==="bool")return He("uint8",e?1:0);if(t==="string")return He("bytes",new Buffer(e,"utf8"));if(bp(t)){if(typeof e.length>"u")throw new Error("Not an array?");if(r=du(t),r!=="dynamic"&&r!==0&&e.length>r)throw new Error("Elements exceed array size: "+r);i=[],t=t.slice(0,t.lastIndexOf("[")),typeof e=="string"&&(e=JSON.parse(e));for(s in e)i.push(He(t,e[s]));if(r==="dynamic"){var o=He("uint256",e.length);i.unshift(o)}return Buffer.concat(i)}else{if(t==="bytes")return e=new Buffer(e),i=Buffer.concat([He("uint256",e.length),e]),e.length%32!==0&&(i=Buffer.concat([i,At.zeros(32-e.length%32)])),i;if(t.startsWith("bytes")){if(r=Gt(t),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return At.setLengthRight(e,32)}else if(t.startsWith("uint")){if(r=Gt(t),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=kt(e),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(Buffer,"be",32)}else if(t.startsWith("int")){if(r=Gt(t),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=kt(e),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(Buffer,"be",32)}else if(t.startsWith("ufixed")){if(r=fa(t),n=kt(e),n<0)throw new Error("Supplied ufixed is negative");return He("uint256",n.mul(new Rt(2).pow(new Rt(r[1]))))}else if(t.startsWith("fixed"))return r=fa(t),He("int256",kt(e).mul(new Rt(2).pow(new Rt(r[1]))))}throw new Error("Unsupported or invalid type: "+t)}function pp(t){return t==="string"||t==="bytes"||du(t)==="dynamic"}function bp(t){return t.lastIndexOf("]")===t.length-1}function gp(t,e){var r=[],n=[],i=32*t.length;for(var s in t){var o=hu(t[s]),a=e[s],u=He(o,a);pp(o)?(r.push(He("uint256",i)),n.push(u),i+=u.length):r.push(u)}return Buffer.concat(r.concat(n))}function pu(t,e){if(t.length!==e.length)throw new Error("Number of types are not matching the values");for(var r,n,i=[],s=0;s<t.length;s++){var o=hu(t[s]),a=e[s];if(o==="bytes")i.push(a);else if(o==="string")i.push(new Buffer(a,"utf8"));else if(o==="bool")i.push(new Buffer(a?"01":"00","hex"));else if(o==="address")i.push(At.setLength(a,20));else if(o.startsWith("bytes")){if(r=Gt(o),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);i.push(At.setLengthRight(a,r))}else if(o.startsWith("uint")){if(r=Gt(o),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=kt(a),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());i.push(n.toArrayLike(Buffer,"be",r/8))}else if(o.startsWith("int")){if(r=Gt(o),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=kt(a),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());i.push(n.toTwos(r).toArrayLike(Buffer,"be",r/8))}else throw new Error("Unsupported or invalid type: "+o)}return Buffer.concat(i)}function yp(t,e){return At.keccak(pu(t,e))}var mp={rawEncode:gp,solidityPack:pu,soliditySHA3:yp};const je=fu,Or=mp,bu={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},Ui={encodeData(t,e,r,n=!0){const i=["bytes32"],s=[this.hashType(t,r)];if(n){const o=(a,u,c)=>{if(r[u]!==void 0)return["bytes32",c==null?"0x0000000000000000000000000000000000000000000000000000000000000000":je.keccak(this.encodeData(u,c,r,n))];if(c===void 0)throw new Error(`missing value for field ${a} of type ${u}`);if(u==="bytes")return["bytes32",je.keccak(c)];if(u==="string")return typeof c=="string"&&(c=Buffer.from(c,"utf8")),["bytes32",je.keccak(c)];if(u.lastIndexOf("]")===u.length-1){const l=u.slice(0,u.lastIndexOf("[")),f=c.map(h=>o(a,l,h));return["bytes32",je.keccak(Or.rawEncode(f.map(([h])=>h),f.map(([,h])=>h)))]}return[u,c]};for(const a of r[t]){const[u,c]=o(a.name,a.type,e[a.name]);i.push(u),s.push(c)}}else for(const o of r[t]){let a=e[o.name];if(a!==void 0)if(o.type==="bytes")i.push("bytes32"),a=je.keccak(a),s.push(a);else if(o.type==="string")i.push("bytes32"),typeof a=="string"&&(a=Buffer.from(a,"utf8")),a=je.keccak(a),s.push(a);else if(r[o.type]!==void 0)i.push("bytes32"),a=je.keccak(this.encodeData(o.type,a,r,n)),s.push(a);else{if(o.type.lastIndexOf("]")===o.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");i.push(o.type),s.push(a)}}return Or.rawEncode(i,s)},encodeType(t,e){let r="",n=this.findTypeDependencies(t,e).filter(i=>i!==t);n=[t].concat(n.sort());for(const i of n){if(!e[i])throw new Error("No type definition specified: "+i);r+=i+"("+e[i].map(({name:o,type:a})=>a+" "+o).join(",")+")"}return r},findTypeDependencies(t,e,r=[]){if(t=t.match(/^\w*/)[0],r.includes(t)||e[t]===void 0)return r;r.push(t);for(const n of e[t])for(const i of this.findTypeDependencies(n.type,e,r))!r.includes(i)&&r.push(i);return r},hashStruct(t,e,r,n=!0){return je.keccak(this.encodeData(t,e,r,n))},hashType(t,e){return je.keccak(this.encodeType(t,e))},sanitizeData(t){const e={};for(const r in bu.properties)t[r]&&(e[r]=t[r]);return e.types&&(e.types=Object.assign({EIP712Domain:[]},e.types)),e},hash(t,e=!0){const r=this.sanitizeData(t),n=[Buffer.from("1901","hex")];return n.push(this.hashStruct("EIP712Domain",r.domain,r.types,e)),r.primaryType!=="EIP712Domain"&&n.push(this.hashStruct(r.primaryType,r.message,r.types,e)),je.keccak(Buffer.concat(n))}};var vp={TYPED_MESSAGE_SCHEMA:bu,TypedDataUtils:Ui,hashForSignTypedDataLegacy:function(t){return _p(t.data)},hashForSignTypedData_v3:function(t){return Ui.hash(t.data,!1)},hashForSignTypedData_v4:function(t){return Ui.hash(t.data)}};function _p(t){const e=new Error("Expect argument to be non-empty array");if(typeof t!="object"||!t.length)throw e;const r=t.map(function(s){return s.type==="bytes"?je.toBuffer(s.value):s.value}),n=t.map(function(s){return s.type}),i=t.map(function(s){if(!s.name)throw e;return s.type+" "+s.name});return Or.soliditySHA3(["bytes32","bytes32"],[Or.soliditySHA3(new Array(t.length).fill("string"),i),Or.soliditySHA3(n,r)])}var er={};Object.defineProperty(er,"__esModule",{value:!0});er.filterFromParam=er.FilterPolyfill=void 0;const zt=Ur,he=S,wp=5*60*1e3,It={jsonrpc:"2.0",id:0};class Sp{constructor(e){this.logFilters=new Map,this.blockFilters=new Set,this.pendingTransactionFilters=new Set,this.cursors=new Map,this.timeouts=new Map,this.nextFilterId=(0,zt.IntNumber)(1),this.provider=e}async newFilter(e){const r=gu(e),n=this.makeFilterId(),i=await this.setInitialCursorPosition(n,r.fromBlock);return console.log(`Installing new log filter(${n}):`,r,"initial cursor position:",i),this.logFilters.set(n,r),this.setFilterTimeout(n),(0,he.hexStringFromIntNumber)(n)}async newBlockFilter(){const e=this.makeFilterId(),r=await this.setInitialCursorPosition(e,"latest");return console.log(`Installing new block filter (${e}) with initial cursor position:`,r),this.blockFilters.add(e),this.setFilterTimeout(e),(0,he.hexStringFromIntNumber)(e)}async newPendingTransactionFilter(){const e=this.makeFilterId(),r=await this.setInitialCursorPosition(e,"latest");return console.log(`Installing new block filter (${e}) with initial cursor position:`,r),this.pendingTransactionFilters.add(e),this.setFilterTimeout(e),(0,he.hexStringFromIntNumber)(e)}uninstallFilter(e){const r=(0,he.intNumberFromHexString)(e);return console.log(`Uninstalling filter (${r})`),this.deleteFilter(r),!0}getFilterChanges(e){const r=(0,he.intNumberFromHexString)(e);return this.timeouts.has(r)&&this.setFilterTimeout(r),this.logFilters.has(r)?this.getLogFilterChanges(r):this.blockFilters.has(r)?this.getBlockFilterChanges(r):this.pendingTransactionFilters.has(r)?this.getPendingTransactionFilterChanges(r):Promise.resolve(pn())}async getFilterLogs(e){const r=(0,he.intNumberFromHexString)(e),n=this.logFilters.get(r);return n?this.sendAsyncPromise(Object.assign(Object.assign({},It),{method:"eth_getLogs",params:[ha(n)]})):pn()}makeFilterId(){return(0,zt.IntNumber)(++this.nextFilterId)}sendAsyncPromise(e){return new Promise((r,n)=>{this.provider.sendAsync(e,(i,s)=>{if(i)return n(i);if(Array.isArray(s)||s==null)return n(new Error(`unexpected response received: ${JSON.stringify(s)}`));r(s)})})}deleteFilter(e){console.log(`Deleting filter (${e})`),this.logFilters.delete(e),this.blockFilters.delete(e),this.pendingTransactionFilters.delete(e),this.cursors.delete(e),this.timeouts.delete(e)}async getLogFilterChanges(e){const r=this.logFilters.get(e),n=this.cursors.get(e);if(!n||!r)return pn();const i=await this.getCurrentBlockHeight(),s=r.toBlock==="latest"?i:r.toBlock;if(n>i||n>r.toBlock)return bn();console.log(`Fetching logs from ${n} to ${s} for filter ${e}`);const o=await this.sendAsyncPromise(Object.assign(Object.assign({},It),{method:"eth_getLogs",params:[ha(Object.assign(Object.assign({},r),{fromBlock:n,toBlock:s}))]}));if(Array.isArray(o.result)){const a=o.result.map(c=>(0,he.intNumberFromHexString)(c.blockNumber||"0x0")),u=Math.max(...a);if(u&&u>n){const c=(0,zt.IntNumber)(u+1);console.log(`Moving cursor position for filter (${e}) from ${n} to ${c}`),this.cursors.set(e,c)}}return o}async getBlockFilterChanges(e){const r=this.cursors.get(e);if(!r)return pn();const n=await this.getCurrentBlockHeight();if(r>n)return bn();console.log(`Fetching blocks from ${r} to ${n} for filter (${e})`);const i=(await Promise.all((0,he.range)(r,n+1).map(o=>this.getBlockHashByNumber((0,zt.IntNumber)(o))))).filter(o=>!!o),s=(0,zt.IntNumber)(r+i.length);return console.log(`Moving cursor position for filter (${e}) from ${r} to ${s}`),this.cursors.set(e,s),Object.assign(Object.assign({},It),{result:i})}async getPendingTransactionFilterChanges(e){return Promise.resolve(bn())}async setInitialCursorPosition(e,r){const n=await this.getCurrentBlockHeight(),i=typeof r=="number"&&r>n?r:n;return this.cursors.set(e,i),i}setFilterTimeout(e){const r=this.timeouts.get(e);r&&window.clearTimeout(r);const n=window.setTimeout(()=>{console.log(`Filter (${e}) timed out`),this.deleteFilter(e)},wp);this.timeouts.set(e,n)}async getCurrentBlockHeight(){const{result:e}=await this.sendAsyncPromise(Object.assign(Object.assign({},It),{method:"eth_blockNumber",params:[]}));return(0,he.intNumberFromHexString)((0,he.ensureHexString)(e))}async getBlockHashByNumber(e){const r=await this.sendAsyncPromise(Object.assign(Object.assign({},It),{method:"eth_getBlockByNumber",params:[(0,he.hexStringFromIntNumber)(e),!1]}));return r.result&&typeof r.result.hash=="string"?(0,he.ensureHexString)(r.result.hash):null}}er.FilterPolyfill=Sp;function gu(t){return{fromBlock:da(t.fromBlock),toBlock:da(t.toBlock),addresses:t.address===void 0?null:Array.isArray(t.address)?t.address:[t.address],topics:t.topics||[]}}er.filterFromParam=gu;function ha(t){const e={fromBlock:pa(t.fromBlock),toBlock:pa(t.toBlock),topics:t.topics};return t.addresses!==null&&(e.address=t.addresses),e}function da(t){if(t===void 0||t==="latest"||t==="pending")return"latest";if(t==="earliest")return(0,zt.IntNumber)(0);if((0,he.isHexString)(t))return(0,he.intNumberFromHexString)(t);throw new Error(`Invalid block option: ${String(t)}`)}function pa(t){return t==="latest"?t:(0,he.hexStringFromIntNumber)(t)}function pn(){return Object.assign(Object.assign({},It),{error:{code:-32e3,message:"filter not found"}})}function bn(){return Object.assign(Object.assign({},It),{result:[]})}var yu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.JSONRPCMethod=void 0,function(e){e.eth_accounts="eth_accounts",e.eth_coinbase="eth_coinbase",e.net_version="net_version",e.eth_chainId="eth_chainId",e.eth_uninstallFilter="eth_uninstallFilter",e.eth_requestAccounts="eth_requestAccounts",e.eth_sign="eth_sign",e.eth_ecRecover="eth_ecRecover",e.personal_sign="personal_sign",e.personal_ecRecover="personal_ecRecover",e.eth_signTransaction="eth_signTransaction",e.eth_sendRawTransaction="eth_sendRawTransaction",e.eth_sendTransaction="eth_sendTransaction",e.eth_signTypedData_v1="eth_signTypedData_v1",e.eth_signTypedData_v2="eth_signTypedData_v2",e.eth_signTypedData_v3="eth_signTypedData_v3",e.eth_signTypedData_v4="eth_signTypedData_v4",e.eth_signTypedData="eth_signTypedData",e.cbWallet_arbitrary="walletlink_arbitrary",e.wallet_addEthereumChain="wallet_addEthereumChain",e.wallet_switchEthereumChain="wallet_switchEthereumChain",e.wallet_watchAsset="wallet_watchAsset",e.eth_subscribe="eth_subscribe",e.eth_unsubscribe="eth_unsubscribe",e.eth_newFilter="eth_newFilter",e.eth_newBlockFilter="eth_newBlockFilter",e.eth_newPendingTransactionFilter="eth_newPendingTransactionFilter",e.eth_getFilterChanges="eth_getFilterChanges",e.eth_getFilterLogs="eth_getFilterLogs"}(t.JSONRPCMethod||(t.JSONRPCMethod={}))})(yu);var Yn={},mu={},Kn={},Qs=Ep;function Ep(t){t=t||{};var e=t.max||Number.MAX_SAFE_INTEGER,r=typeof t.start<"u"?t.start:Math.floor(Math.random()*e);return function(){return r=r%e,r++}}const ba=(t,e)=>function(){const r=e.promiseModule,n=new Array(arguments.length);for(let i=0;i<arguments.length;i++)n[i]=arguments[i];return new r((i,s)=>{e.errorFirst?n.push(function(o,a){if(e.multiArgs){const u=new Array(arguments.length-1);for(let c=1;c<arguments.length;c++)u[c-1]=arguments[c];o?(u.unshift(o),s(u)):i(u)}else o?s(o):i(a)}):n.push(function(o){if(e.multiArgs){const a=new Array(arguments.length-1);for(let u=0;u<arguments.length;u++)a[u]=arguments[u];i(a)}else i(o)}),t.apply(this,n)})};var Cp=(t,e)=>{e=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},e);const r=i=>{const s=o=>typeof o=="string"?i===o:o.test(i);return e.include?e.include.some(s):!e.exclude.some(s)};let n;typeof t=="function"?n=function(){return e.excludeMain?t.apply(this,arguments):ba(t,e).apply(this,arguments)}:n=Object.create(Object.getPrototypeOf(t));for(const i in t){const s=t[i];n[i]=typeof s=="function"&&r(i)?ba(s,e):s}return n},Gr={},kp=E&&E.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.BaseBlockTracker=void 0;const Ip=kp(Pt),Mp=1e3,xp=(t,e)=>t+e,ga=["sync","latest"];class Rp extends Ip.default{constructor(e){super(),this._blockResetDuration=e.blockResetDuration||20*Mp,this._currentBlock=null,this._isRunning=!1,this._onNewListener=this._onNewListener.bind(this),this._onRemoveListener=this._onRemoveListener.bind(this),this._resetCurrentBlock=this._resetCurrentBlock.bind(this),this._setupInternalEvents()}async destroy(){this._cancelBlockResetTimeout(),await this._maybeEnd(),super.removeAllListeners()}isRunning(){return this._isRunning}getCurrentBlock(){return this._currentBlock}async getLatestBlock(){return this._currentBlock?this._currentBlock:await new Promise(r=>this.once("latest",r))}removeAllListeners(e){return e?super.removeAllListeners(e):super.removeAllListeners(),this._setupInternalEvents(),this._onRemoveListener(),this}_setupInternalEvents(){this.removeListener("newListener",this._onNewListener),this.removeListener("removeListener",this._onRemoveListener),this.on("newListener",this._onNewListener),this.on("removeListener",this._onRemoveListener)}_onNewListener(e){ga.includes(e)&&this._maybeStart()}_onRemoveListener(){this._getBlockTrackerEventCount()>0||this._maybeEnd()}async _maybeStart(){this._isRunning||(this._isRunning=!0,this._cancelBlockResetTimeout(),await this._start(),this.emit("_started"))}async _maybeEnd(){this._isRunning&&(this._isRunning=!1,this._setupBlockResetTimeout(),await this._end(),this.emit("_ended"))}_getBlockTrackerEventCount(){return ga.map(e=>this.listenerCount(e)).reduce(xp)}_newPotentialLatest(e){const r=this._currentBlock;r&&ya(e)<=ya(r)||this._setCurrentBlock(e)}_setCurrentBlock(e){const r=this._currentBlock;this._currentBlock=e,this.emit("latest",e),this.emit("sync",{oldBlock:r,newBlock:e})}_setupBlockResetTimeout(){this._cancelBlockResetTimeout(),this._blockResetTimeout=setTimeout(this._resetCurrentBlock,this._blockResetDuration),this._blockResetTimeout.unref&&this._blockResetTimeout.unref()}_cancelBlockResetTimeout(){this._blockResetTimeout&&clearTimeout(this._blockResetTimeout)}_resetCurrentBlock(){this._currentBlock=null}}Gr.BaseBlockTracker=Rp;function ya(t){return Number.parseInt(t,16)}var vu={},_u={},ae={};class wu extends TypeError{constructor(e,r){let n;const{message:i,explanation:s,...o}=e,{path:a}=e,u=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??u),s!=null&&(this.cause=u),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...r()])}}function Tp(t){return Te(t)&&typeof t[Symbol.iterator]=="function"}function Te(t){return typeof t=="object"&&t!=null}function ma(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function ee(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function Ap(t){const{done:e,value:r}=t.next();return e?void 0:r}function Op(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=r,{refinement:a,message:u=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${ee(n)}\``}=t;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:u}}function*vs(t,e,r,n){Tp(t)||(t=[t]);for(const i of t){const s=Op(i,e,r,n);s&&(yield s)}}function*Zs(t,e,r={}){const{path:n=[],branch:i=[t],coerce:s=!1,mask:o=!1}=r,a={path:n,branch:i};if(s&&(t=e.coercer(t,a),o&&e.type!=="type"&&Te(e.schema)&&Te(t)&&!Array.isArray(t)))for(const c in t)e.schema[c]===void 0&&delete t[c];let u="valid";for(const c of e.validator(t,a))c.explanation=r.message,u="not_valid",yield[c,void 0];for(let[c,l,f]of e.entries(t,a)){const h=Zs(l,f,{path:c===void 0?n:[...n,c],branch:c===void 0?i:[...i,l],coerce:s,mask:o,message:r.message});for(const d of h)d[0]?(u=d[0].refinement!=null?"not_refined":"not_valid",yield[d[0],void 0]):s&&(l=d[1],c===void 0?t=l:t instanceof Map?t.set(c,l):t instanceof Set?t.add(l):Te(t)&&(l!==void 0||c in t)&&(t[c]=l))}if(u!=="not_valid")for(const c of e.refiner(t,a))c.explanation=r.message,u="not_refined",yield[c,void 0];u==="valid"&&(yield[void 0,t])}class Y{constructor(e){const{type:r,schema:n,validator:i,refiner:s,coercer:o=u=>u,entries:a=function*(){}}=e;this.type=r,this.schema=n,this.entries=a,this.coercer=o,i?this.validator=(u,c)=>{const l=i(u,c);return vs(l,c,this,u)}:this.validator=()=>[],s?this.refiner=(u,c)=>{const l=s(u,c);return vs(l,c,this,u)}:this.refiner=()=>[]}assert(e,r){return Su(e,this,r)}create(e,r){return Eu(e,this,r)}is(e){return Ys(e,this)}mask(e,r){return Cu(e,this,r)}validate(e,r={}){return gr(e,this,r)}}function Su(t,e,r){const n=gr(t,e,{message:r});if(n[0])throw n[0]}function Eu(t,e,r){const n=gr(t,e,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function Cu(t,e,r){const n=gr(t,e,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function Ys(t,e){return!gr(t,e)[0]}function gr(t,e,r={}){const n=Zs(t,e,r),i=Ap(n);return i[0]?[new wu(i[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Np(...t){const e=t[0].type==="type",r=t.map(i=>i.schema),n=Object.assign({},...r);return e?Xs(n):Qr(n)}function me(t,e){return new Y({type:t,schema:null,validator:e})}function Lp(t,e){return new Y({...t,refiner:(r,n)=>r===void 0||t.refiner(r,n),validator(r,n){return r===void 0?!0:(e(r,n),t.validator(r,n))}})}function Pp(t){return new Y({type:"dynamic",schema:null,*entries(e,r){yield*t(e,r).entries(e,r)},validator(e,r){return t(e,r).validator(e,r)},coercer(e,r){return t(e,r).coercer(e,r)},refiner(e,r){return t(e,r).refiner(e,r)}})}function jp(t){let e;return new Y({type:"lazy",schema:null,*entries(r,n){e??(e=t()),yield*e.entries(r,n)},validator(r,n){return e??(e=t()),e.validator(r,n)},coercer(r,n){return e??(e=t()),e.coercer(r,n)},refiner(r,n){return e??(e=t()),e.refiner(r,n)}})}function Dp(t,e){const{schema:r}=t,n={...r};for(const i of e)delete n[i];switch(t.type){case"type":return Xs(n);default:return Qr(n)}}function Bp(t){const e=t instanceof Y?{...t.schema}:{...t};for(const r in e)e[r]=ku(e[r]);return Qr(e)}function Fp(t,e){const{schema:r}=t,n={};for(const i of e)n[i]=r[i];return Qr(n)}function $p(t,e){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),me(t,e)}function Vp(){return me("any",()=>!0)}function Wp(t){return new Y({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${ee(e)}`}})}function Hp(){return me("bigint",t=>typeof t=="bigint")}function zp(){return me("boolean",t=>typeof t=="boolean")}function Up(){return me("date",t=>t instanceof Date&&!isNaN(t.getTime())||`Expected a valid \`Date\` object, but received: ${ee(t)}`)}function qp(t){const e={},r=t.map(n=>ee(n)).join();for(const n of t)e[n]=n;return new Y({type:"enums",schema:e,validator(n){return t.includes(n)||`Expected one of \`${r}\`, but received: ${ee(n)}`}})}function Jp(){return me("func",t=>typeof t=="function"||`Expected a function, but received: ${ee(t)}`)}function Gp(t){return me("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${ee(e)}`)}function Qp(){return me("integer",t=>typeof t=="number"&&!isNaN(t)&&Number.isInteger(t)||`Expected an integer, but received: ${ee(t)}`)}function Zp(t){return new Y({type:"intersection",schema:null,*entries(e,r){for(const n of t)yield*n.entries(e,r)},*validator(e,r){for(const n of t)yield*n.validator(e,r)},*refiner(e,r){for(const n of t)yield*n.refiner(e,r)}})}function Yp(t){const e=ee(t),r=typeof t;return new Y({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${ee(n)}`}})}function Kp(t,e){return new Y({type:"map",schema:null,*entries(r){if(t&&e&&r instanceof Map)for(const[n,i]of r.entries())yield[n,n,t],yield[n,i,e]},coercer(r){return r instanceof Map?new Map(r):r},validator(r){return r instanceof Map||`Expected a \`Map\` object, but received: ${ee(r)}`}})}function Ks(){return me("never",()=>!1)}function Xp(t){return new Y({...t,validator:(e,r)=>e===null||t.validator(e,r),refiner:(e,r)=>e===null||t.refiner(e,r)})}function e0(){return me("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${ee(t)}`)}function Qr(t){const e=t?Object.keys(t):[],r=Ks();return new Y({type:"object",schema:t||null,*entries(n){if(t&&Te(n)){const i=new Set(Object.keys(n));for(const s of e)i.delete(s),yield[s,n[s],t[s]];for(const s of i)yield[s,n[s],r]}},validator(n){return Te(n)||`Expected an object, but received: ${ee(n)}`},coercer(n){return Te(n)?{...n}:n}})}function ku(t){return new Y({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function t0(t,e){return new Y({type:"record",schema:null,*entries(r){if(Te(r))for(const n in r){const i=r[n];yield[n,n,t],yield[n,i,e]}},validator(r){return Te(r)||`Expected an object, but received: ${ee(r)}`}})}function r0(){return me("regexp",t=>t instanceof RegExp)}function n0(t){return new Y({type:"set",schema:null,*entries(e){if(t&&e instanceof Set)for(const r of e)yield[r,r,t]},coercer(e){return e instanceof Set?new Set(e):e},validator(e){return e instanceof Set||`Expected a \`Set\` object, but received: ${ee(e)}`}})}function Iu(){return me("string",t=>typeof t=="string"||`Expected a string, but received: ${ee(t)}`)}function i0(t){const e=Ks();return new Y({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],t[i]||e]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${ee(r)}`}})}function Xs(t){const e=Object.keys(t);return new Y({type:"type",schema:t,*entries(r){if(Te(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return Te(r)||`Expected an object, but received: ${ee(r)}`},coercer(r){return Te(r)?{...r}:r}})}function s0(t){const e=t.map(r=>r.type).join(" | ");return new Y({type:"union",schema:null,coercer(r){for(const n of t){const[i,s]=n.validate(r,{coerce:!0});if(!i)return s}return r},validator(r,n){const i=[];for(const s of t){const[...o]=Zs(r,s,n),[a]=o;if(a[0])for(const[u]of o)u&&i.push(u);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${ee(r)}`,...i]}})}function Mu(){return me("unknown",()=>!0)}function eo(t,e,r){return new Y({...t,coercer:(n,i)=>Ys(n,e)?t.coercer(r(n,i),i):t.coercer(n,i)})}function o0(t,e,r={}){return eo(t,Mu(),n=>{const i=typeof e=="function"?e():e;if(n===void 0)return i;if(!r.strict&&ma(n)&&ma(i)){const s={...n};let o=!1;for(const a in i)s[a]===void 0&&(s[a]=i[a],o=!0);if(o)return s}return n})}function a0(t){return eo(t,Iu(),e=>e.trim())}function c0(t){return Dt(t,"empty",e=>{const r=xu(e);return r===0||`Expected an empty ${t.type} but received one with a size of \`${r}\``})}function xu(t){return t instanceof Map||t instanceof Set?t.size:t.length}function u0(t,e,r={}){const{exclusive:n}=r;return Dt(t,"max",i=>n?i<e:i<=e||`Expected a ${t.type} less than ${n?"":"or equal to "}${e} but received \`${i}\``)}function l0(t,e,r={}){const{exclusive:n}=r;return Dt(t,"min",i=>n?i>e:i>=e||`Expected a ${t.type} greater than ${n?"":"or equal to "}${e} but received \`${i}\``)}function f0(t){return Dt(t,"nonempty",e=>xu(e)>0||`Expected a nonempty ${t.type} but received an empty one`)}function h0(t,e){return Dt(t,"pattern",r=>e.test(r)||`Expected a ${t.type} matching \`/${e.source}/\` but received "${r}"`)}function d0(t,e,r=e){const n=`Expected a ${t.type}`,i=e===r?`of \`${e}\``:`between \`${e}\` and \`${r}\``;return Dt(t,"size",s=>{if(typeof s=="number"||s instanceof Date)return e<=s&&s<=r||`${n} ${i} but received \`${s}\``;if(s instanceof Map||s instanceof Set){const{size:o}=s;return e<=o&&o<=r||`${n} with a size ${i} but received one with a size of \`${o}\``}else{const{length:o}=s;return e<=o&&o<=r||`${n} with a length ${i} but received one with a length of \`${o}\``}})}function Dt(t,e,r){return new Y({...t,*refiner(n,i){yield*t.refiner(n,i);const s=r(n,i),o=vs(s,i,t,n);for(const a of o)yield{...a,refinement:e}}})}const p0=Object.freeze(Object.defineProperty({__proto__:null,Struct:Y,StructError:wu,any:Vp,array:Wp,assert:Su,assign:Np,bigint:Hp,boolean:zp,coerce:eo,create:Eu,date:Up,defaulted:o0,define:me,deprecated:Lp,dynamic:Pp,empty:c0,enums:qp,func:Jp,instance:Gp,integer:Qp,intersection:Zp,is:Ys,lazy:jp,literal:Yp,map:Kp,mask:Cu,max:u0,min:l0,never:Ks,nonempty:f0,nullable:Xp,number:e0,object:Qr,omit:Dp,optional:ku,partial:Bp,pattern:h0,pick:Fp,record:t0,refine:Dt,regexp:r0,set:n0,size:d0,string:Iu,struct:$p,trimmed:a0,tuple:i0,type:Xs,union:s0,unknown:Mu,validate:gr},Symbol.toStringTag,{value:"Module"})),Bt=Lt(p0);Object.defineProperty(ae,"__esModule",{value:!0});ae.assertExhaustive=ae.assertStruct=ae.assert=ae.AssertionError=void 0;const b0=Bt;function g0(t){return typeof t=="object"&&t!==null&&"message"in t}function y0(t){var e,r;return typeof((r=(e=t==null?void 0:t.prototype)===null||e===void 0?void 0:e.constructor)===null||r===void 0?void 0:r.name)=="string"}function m0(t){const e=g0(t)?t.message:String(t);return e.endsWith(".")?e.slice(0,-1):e}function Ru(t,e){return y0(t)?new t({message:e}):t({message:e})}class to extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}ae.AssertionError=to;function v0(t,e="Assertion failed.",r=to){if(!t)throw e instanceof Error?e:Ru(r,e)}ae.assert=v0;function _0(t,e,r="Assertion failed",n=to){try{(0,b0.assert)(t,e)}catch(i){throw Ru(n,`${r}: ${m0(i)}.`)}}ae.assertStruct=_0;function w0(t){throw new Error("Invalid branch reached. Should be detected during compilation.")}ae.assertExhaustive=w0;var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.base64=void 0;const S0=Bt,E0=ae,C0=(t,e={})=>{var r,n;const i=(r=e.paddingRequired)!==null&&r!==void 0?r:!1,s=(n=e.characterSet)!==null&&n!==void 0?n:"base64";let o;s==="base64"?o=String.raw`[A-Za-z0-9+\/]`:((0,E0.assert)(s==="base64url"),o=String.raw`[-_A-Za-z0-9]`);let a;return i?a=new RegExp(`^(?:${o}{4})*(?:${o}{3}=|${o}{2}==)?$`,"u"):a=new RegExp(`^(?:${o}{4})*(?:${o}{2,3}|${o}{3}=|${o}{2}==)?$`,"u"),(0,S0.pattern)(t,a)};Zr.base64=C0;var D={},Yr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.remove0x=t.add0x=t.assertIsStrictHexString=t.assertIsHexString=t.isStrictHexString=t.isHexString=t.StrictHexStruct=t.HexStruct=void 0;const e=Bt,r=ae;t.HexStruct=(0,e.pattern)((0,e.string)(),/^(?:0x)?[0-9a-f]+$/iu),t.StrictHexStruct=(0,e.pattern)((0,e.string)(),/^0x[0-9a-f]+$/iu);function n(c){return(0,e.is)(c,t.HexStruct)}t.isHexString=n;function i(c){return(0,e.is)(c,t.StrictHexStruct)}t.isStrictHexString=i;function s(c){(0,r.assert)(n(c),"Value must be a hexadecimal string.")}t.assertIsHexString=s;function o(c){(0,r.assert)(i(c),'Value must be a hexadecimal string, starting with "0x".')}t.assertIsStrictHexString=o;function a(c){return c.startsWith("0x")?c:c.startsWith("0X")?`0x${c.substring(2)}`:`0x${c}`}t.add0x=a;function u(c){return c.startsWith("0x")||c.startsWith("0X")?c.substring(2):c}t.remove0x=u})(Yr);Object.defineProperty(D,"__esModule",{value:!0});D.createDataView=D.concatBytes=D.valueToBytes=D.stringToBytes=D.numberToBytes=D.signedBigIntToBytes=D.bigIntToBytes=D.hexToBytes=D.bytesToString=D.bytesToNumber=D.bytesToSignedBigInt=D.bytesToBigInt=D.bytesToHex=D.assertIsBytes=D.isBytes=void 0;const _e=ae,_s=Yr,va=48,_a=58,wa=87;function k0(){const t=[];return()=>{if(t.length===0)for(let e=0;e<256;e++)t.push(e.toString(16).padStart(2,"0"));return t}}const I0=k0();function ro(t){return t instanceof Uint8Array}D.isBytes=ro;function yr(t){(0,_e.assert)(ro(t),"Value must be a Uint8Array.")}D.assertIsBytes=yr;function Tu(t){if(yr(t),t.length===0)return"0x";const e=I0(),r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=e[t[n]];return(0,_s.add0x)(r.join(""))}D.bytesToHex=Tu;function Au(t){yr(t);const e=Tu(t);return BigInt(e)}D.bytesToBigInt=Au;function M0(t){yr(t);let e=BigInt(0);for(const r of t)e=(e<<BigInt(8))+BigInt(r);return BigInt.asIntN(t.length*8,e)}D.bytesToSignedBigInt=M0;function x0(t){yr(t);const e=Au(t);return(0,_e.assert)(e<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(e)}D.bytesToNumber=x0;function R0(t){return yr(t),new TextDecoder().decode(t)}D.bytesToString=R0;function Xn(t){var e;if(((e=t==null?void 0:t.toLowerCase)===null||e===void 0?void 0:e.call(t))==="0x")return new Uint8Array;(0,_s.assertIsHexString)(t);const r=(0,_s.remove0x)(t).toLowerCase(),n=r.length%2===0?r:`0${r}`,i=new Uint8Array(n.length/2);for(let s=0;s<i.length;s++){const o=n.charCodeAt(s*2),a=n.charCodeAt(s*2+1),u=o-(o<_a?va:wa),c=a-(a<_a?va:wa);i[s]=u*16+c}return i}D.hexToBytes=Xn;function Ou(t){(0,_e.assert)(typeof t=="bigint","Value must be a bigint."),(0,_e.assert)(t>=BigInt(0),"Value must be a non-negative bigint.");const e=t.toString(16);return Xn(e)}D.bigIntToBytes=Ou;function T0(t,e){(0,_e.assert)(e>0);const r=t>>BigInt(31);return!((~t&r)+(t&~r)>>BigInt(e*8+-1))}function A0(t,e){(0,_e.assert)(typeof t=="bigint","Value must be a bigint."),(0,_e.assert)(typeof e=="number","Byte length must be a number."),(0,_e.assert)(e>0,"Byte length must be greater than 0."),(0,_e.assert)(T0(t,e),"Byte length is too small to represent the given value.");let r=t;const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()}D.signedBigIntToBytes=A0;function Nu(t){(0,_e.assert)(typeof t=="number","Value must be a number."),(0,_e.assert)(t>=0,"Value must be a non-negative number."),(0,_e.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `bigIntToBytes` instead.");const e=t.toString(16);return Xn(e)}D.numberToBytes=Nu;function Lu(t){return(0,_e.assert)(typeof t=="string","Value must be a string."),new TextEncoder().encode(t)}D.stringToBytes=Lu;function Pu(t){if(typeof t=="bigint")return Ou(t);if(typeof t=="number")return Nu(t);if(typeof t=="string")return t.startsWith("0x")?Xn(t):Lu(t);if(ro(t))return t;throw new TypeError(`Unsupported value type: "${typeof t}".`)}D.valueToBytes=Pu;function O0(t){const e=new Array(t.length);let r=0;for(let i=0;i<t.length;i++){const s=Pu(t[i]);e[i]=s,r+=s.length}const n=new Uint8Array(r);for(let i=0,s=0;i<e.length;i++)n.set(e[i],s),s+=e[i].length;return n}D.concatBytes=O0;function N0(t){if(typeof Buffer<"u"&&t instanceof Buffer){const e=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);return new DataView(e)}return new DataView(t.buffer,t.byteOffset,t.byteLength)}D.createDataView=N0;var ei={};Object.defineProperty(ei,"__esModule",{value:!0});ei.ChecksumStruct=void 0;const Sa=Bt,L0=Zr;ei.ChecksumStruct=(0,Sa.size)((0,L0.base64)((0,Sa.string)(),{paddingRequired:!0}),44,44);var Je={};Object.defineProperty(Je,"__esModule",{value:!0});Je.createHex=Je.createBytes=Je.createBigInt=Je.createNumber=void 0;const q=Bt,P0=ae,ju=D,ti=Yr,Du=(0,q.union)([(0,q.number)(),(0,q.bigint)(),(0,q.string)(),ti.StrictHexStruct]),j0=(0,q.coerce)((0,q.number)(),Du,Number),D0=(0,q.coerce)((0,q.bigint)(),Du,BigInt);(0,q.union)([ti.StrictHexStruct,(0,q.instance)(Uint8Array)]);const B0=(0,q.coerce)((0,q.instance)(Uint8Array),(0,q.union)([ti.StrictHexStruct]),ju.hexToBytes),F0=(0,q.coerce)(ti.StrictHexStruct,(0,q.instance)(Uint8Array),ju.bytesToHex);function $0(t){try{const e=(0,q.create)(t,j0);return(0,P0.assert)(Number.isFinite(e),`Expected a number-like value, got "${t}".`),e}catch(e){throw e instanceof q.StructError?new Error(`Expected a number-like value, got "${t}".`):e}}Je.createNumber=$0;function V0(t){try{return(0,q.create)(t,D0)}catch(e){throw e instanceof q.StructError?new Error(`Expected a number-like value, got "${String(e.value)}".`):e}}Je.createBigInt=V0;function W0(t){if(typeof t=="string"&&t.toLowerCase()==="0x")return new Uint8Array;try{return(0,q.create)(t,B0)}catch(e){throw e instanceof q.StructError?new Error(`Expected a bytes-like value, got "${String(e.value)}".`):e}}Je.createBytes=W0;function H0(t){if(t instanceof Uint8Array&&t.length===0||typeof t=="string"&&t.toLowerCase()==="0x")return"0x";try{return(0,q.create)(t,F0)}catch(e){throw e instanceof q.StructError?new Error(`Expected a bytes-like value, got "${String(e.value)}".`):e}}Je.createHex=H0;var tr={},Bu=E&&E.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},de=E&&E.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Le,Ve;Object.defineProperty(tr,"__esModule",{value:!0});tr.FrozenSet=tr.FrozenMap=void 0;class no{constructor(e){Le.set(this,void 0),Bu(this,Le,new Map(e),"f"),Object.freeze(this)}get size(){return de(this,Le,"f").size}[(Le=new WeakMap,Symbol.iterator)](){return de(this,Le,"f")[Symbol.iterator]()}entries(){return de(this,Le,"f").entries()}forEach(e,r){return de(this,Le,"f").forEach((n,i,s)=>e.call(r,n,i,this))}get(e){return de(this,Le,"f").get(e)}has(e){return de(this,Le,"f").has(e)}keys(){return de(this,Le,"f").keys()}values(){return de(this,Le,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([e,r])=>`${String(e)} => ${String(r)}`).join(", ")} `:""}}`}}tr.FrozenMap=no;class io{constructor(e){Ve.set(this,void 0),Bu(this,Ve,new Set(e),"f"),Object.freeze(this)}get size(){return de(this,Ve,"f").size}[(Ve=new WeakMap,Symbol.iterator)](){return de(this,Ve,"f")[Symbol.iterator]()}entries(){return de(this,Ve,"f").entries()}forEach(e,r){return de(this,Ve,"f").forEach((n,i,s)=>e.call(r,n,i,this))}has(e){return de(this,Ve,"f").has(e)}keys(){return de(this,Ve,"f").keys()}values(){return de(this,Ve,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(e=>String(e)).join(", ")} `:""}}`}}tr.FrozenSet=io;Object.freeze(no);Object.freeze(no.prototype);Object.freeze(io);Object.freeze(io.prototype);var Fu={},so={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.calculateNumberSize=t.calculateStringSize=t.isASCII=t.isPlainObject=t.ESCAPE_CHARACTERS_REGEXP=t.JsonSize=t.hasProperty=t.isObject=t.isNullOrUndefined=t.isNonEmptyArray=void 0;function e(c){return Array.isArray(c)&&c.length>0}t.isNonEmptyArray=e;function r(c){return c==null}t.isNullOrUndefined=r;function n(c){return!!c&&typeof c=="object"&&!Array.isArray(c)}t.isObject=n;const i=(c,l)=>Object.hasOwnProperty.call(c,l);t.hasProperty=i,function(c){c[c.Null=4]="Null",c[c.Comma=1]="Comma",c[c.Wrapper=1]="Wrapper",c[c.True=4]="True",c[c.False=5]="False",c[c.Quote=1]="Quote",c[c.Colon=1]="Colon",c[c.Date=24]="Date"}(t.JsonSize||(t.JsonSize={})),t.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu;function s(c){if(typeof c!="object"||c===null)return!1;try{let l=c;for(;Object.getPrototypeOf(l)!==null;)l=Object.getPrototypeOf(l);return Object.getPrototypeOf(c)===l}catch{return!1}}t.isPlainObject=s;function o(c){return c.charCodeAt(0)<=127}t.isASCII=o;function a(c){var l;return c.split("").reduce((h,d)=>o(d)?h+1:h+2,0)+((l=c.match(t.ESCAPE_CHARACTERS_REGEXP))!==null&&l!==void 0?l:[]).length}t.calculateStringSize=a;function u(c){return c.toString().length}t.calculateNumberSize=u})(so);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateJsonAndGetSize=t.getJsonRpcIdValidator=t.assertIsJsonRpcError=t.isJsonRpcError=t.assertIsJsonRpcFailure=t.isJsonRpcFailure=t.assertIsJsonRpcSuccess=t.isJsonRpcSuccess=t.assertIsJsonRpcResponse=t.isJsonRpcResponse=t.assertIsPendingJsonRpcResponse=t.isPendingJsonRpcResponse=t.JsonRpcResponseStruct=t.JsonRpcFailureStruct=t.JsonRpcSuccessStruct=t.PendingJsonRpcResponseStruct=t.assertIsJsonRpcRequest=t.isJsonRpcRequest=t.assertIsJsonRpcNotification=t.isJsonRpcNotification=t.JsonRpcNotificationStruct=t.JsonRpcRequestStruct=t.JsonRpcParamsStruct=t.JsonRpcErrorStruct=t.JsonRpcIdStruct=t.JsonRpcVersionStruct=t.jsonrpc2=t.isValidJson=t.JsonStruct=void 0;const e=Bt,r=ae,n=so;t.JsonStruct=(0,e.define)("Json",w=>{const[x]=k(w,!0);return x?!0:"Expected a valid JSON-serializable value"});function i(w){return(0,e.is)(w,t.JsonStruct)}t.isValidJson=i,t.jsonrpc2="2.0",t.JsonRpcVersionStruct=(0,e.literal)(t.jsonrpc2),t.JsonRpcIdStruct=(0,e.nullable)((0,e.union)([(0,e.number)(),(0,e.string)()])),t.JsonRpcErrorStruct=(0,e.object)({code:(0,e.integer)(),message:(0,e.string)(),data:(0,e.optional)(t.JsonStruct),stack:(0,e.optional)((0,e.string)())}),t.JsonRpcParamsStruct=(0,e.optional)((0,e.union)([(0,e.record)((0,e.string)(),t.JsonStruct),(0,e.array)(t.JsonStruct)])),t.JsonRpcRequestStruct=(0,e.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,method:(0,e.string)(),params:t.JsonRpcParamsStruct}),t.JsonRpcNotificationStruct=(0,e.omit)(t.JsonRpcRequestStruct,["id"]);function s(w){return(0,e.is)(w,t.JsonRpcNotificationStruct)}t.isJsonRpcNotification=s;function o(w,x){(0,r.assertStruct)(w,t.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",x)}t.assertIsJsonRpcNotification=o;function a(w){return(0,e.is)(w,t.JsonRpcRequestStruct)}t.isJsonRpcRequest=a;function u(w,x){(0,r.assertStruct)(w,t.JsonRpcRequestStruct,"Invalid JSON-RPC request",x)}t.assertIsJsonRpcRequest=u,t.PendingJsonRpcResponseStruct=(0,e.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,result:(0,e.optional)((0,e.unknown)()),error:(0,e.optional)(t.JsonRpcErrorStruct)}),t.JsonRpcSuccessStruct=(0,e.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,result:t.JsonStruct}),t.JsonRpcFailureStruct=(0,e.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,error:t.JsonRpcErrorStruct}),t.JsonRpcResponseStruct=(0,e.union)([t.JsonRpcSuccessStruct,t.JsonRpcFailureStruct]);function c(w){return(0,e.is)(w,t.PendingJsonRpcResponseStruct)}t.isPendingJsonRpcResponse=c;function l(w,x){(0,r.assertStruct)(w,t.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",x)}t.assertIsPendingJsonRpcResponse=l;function f(w){return(0,e.is)(w,t.JsonRpcResponseStruct)}t.isJsonRpcResponse=f;function h(w,x){(0,r.assertStruct)(w,t.JsonRpcResponseStruct,"Invalid JSON-RPC response",x)}t.assertIsJsonRpcResponse=h;function d(w){return(0,e.is)(w,t.JsonRpcSuccessStruct)}t.isJsonRpcSuccess=d;function p(w,x){(0,r.assertStruct)(w,t.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",x)}t.assertIsJsonRpcSuccess=p;function v(w){return(0,e.is)(w,t.JsonRpcFailureStruct)}t.isJsonRpcFailure=v;function y(w,x){(0,r.assertStruct)(w,t.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",x)}t.assertIsJsonRpcFailure=y;function b(w){return(0,e.is)(w,t.JsonRpcErrorStruct)}t.isJsonRpcError=b;function m(w,x){(0,r.assertStruct)(w,t.JsonRpcErrorStruct,"Invalid JSON-RPC error",x)}t.assertIsJsonRpcError=m;function _(w){const{permitEmptyString:x,permitFractions:j,permitNull:z}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},w);return L=>!!(typeof L=="number"&&(j||Number.isInteger(L))||typeof L=="string"&&(x||L.length>0)||z&&L===null)}t.getJsonRpcIdValidator=_;function k(w,x=!1){const j=new Set;function z(M,L){if(M===void 0)return[!1,0];if(M===null)return[!0,L?0:n.JsonSize.Null];const te=typeof M;try{if(te==="function")return[!1,0];if(te==="string"||M instanceof String)return[!0,L?0:(0,n.calculateStringSize)(M)+n.JsonSize.Quote*2];if(te==="boolean"||M instanceof Boolean)return L?[!0,0]:[!0,M==!0?n.JsonSize.True:n.JsonSize.False];if(te==="number"||M instanceof Number)return L?[!0,0]:[!0,(0,n.calculateNumberSize)(M)];if(M instanceof Date)return L?[!0,0]:[!0,isNaN(M.getDate())?n.JsonSize.Null:n.JsonSize.Date+n.JsonSize.Quote*2]}catch{return[!1,0]}if(!(0,n.isPlainObject)(M)&&!Array.isArray(M))return[!1,0];if(j.has(M))return[!1,0];j.add(M);try{return[!0,Object.entries(M).reduce((B,[ge,Ne],ot,Fe)=>{let[$f,Vf]=z(Ne,L);if(!$f)throw new Error("JSON validation did not pass. Validation process stopped.");if(j.delete(M),L)return 0;const Wf=Array.isArray(M)?0:ge.length+n.JsonSize.Comma+n.JsonSize.Colon*2,Hf=ot<Fe.length-1?n.JsonSize.Comma:0;return B+Wf+Vf+Hf},L?0:n.JsonSize.Wrapper*2)]}catch{return[!1,0]}}return z(w,x)}t.validateJsonAndGetSize=k})(Fu);var rr={},ws={exports:{}},qi,Ea;function z0(){if(Ea)return qi;Ea=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,s=n*365.25;qi=function(l,f){f=f||{};var h=typeof l;if(h==="string"&&l.length>0)return o(l);if(h==="number"&&isFinite(l))return f.long?u(l):a(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function o(l){if(l=String(l),!(l.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(f){var h=parseFloat(f[1]),d=(f[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return h*s;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*n;case"hours":case"hour":case"hrs":case"hr":case"h":return h*r;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function a(l){var f=Math.abs(l);return f>=n?Math.round(l/n)+"d":f>=r?Math.round(l/r)+"h":f>=e?Math.round(l/e)+"m":f>=t?Math.round(l/t)+"s":l+"ms"}function u(l){var f=Math.abs(l);return f>=n?c(l,f,n,"day"):f>=r?c(l,f,r,"hour"):f>=e?c(l,f,e,"minute"):f>=t?c(l,f,t,"second"):l+" ms"}function c(l,f,h,d){var p=f>=h*1.5;return Math.round(l/h)+" "+d+(p?"s":"")}return qi}function U0(t){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=i,r.enabled=o,r.humanize=z0(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let f=0;for(let h=0;h<l.length;h++)f=(f<<5)-f+l.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(l){let f,h=null,d,p;function v(...y){if(!v.enabled)return;const b=v,m=Number(new Date),_=m-(f||m);b.diff=_,b.prev=f,b.curr=m,f=m,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let k=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(x,j)=>{if(x==="%%")return"%";k++;const z=r.formatters[j];if(typeof z=="function"){const M=y[k];x=z.call(b,M),y.splice(k,1),k--}return x}),r.formatArgs.call(b,y),(b.log||r.log).apply(b,y)}return v.namespace=l,v.useColors=r.useColors(),v.color=r.selectColor(l),v.extend=n,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(d!==r.namespaces&&(d=r.namespaces,p=r.enabled(l)),p),set:y=>{h=y}}),typeof r.init=="function"&&r.init(v),v}function n(l,f){const h=r(this.namespace+(typeof f>"u"?":":f)+l);return h.log=this.log,h}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let f;const h=(typeof l=="string"?l:"").split(/[\s,]+/),d=h.length;for(f=0;f<d;f++)h[f]&&(l=h[f].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.slice(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function s(){const l=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),l}function o(l){if(l[l.length-1]==="*")return!0;let f,h;for(f=0,h=r.skips.length;f<h;f++)if(r.skips[f].test(l))return!1;for(f=0,h=r.names.length;f<h;f++)if(r.names[f].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var q0=U0;(function(t,e){var r={};e.formatArgs=i,e.save=s,e.load=o,e.useColors=n,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;c.splice(1,0,l,"color: inherit");let f=0,h=0;c[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(f++,d==="%c"&&(h=f))}),c.splice(h,0,l)}e.log=console.debug||console.log||(()=>{});function s(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function o(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=r.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=q0(e);const{formatters:u}=t.exports;u.j=function(c){try{return JSON.stringify(c)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(ws,ws.exports);var J0=ws.exports,G0=E&&E.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rr,"__esModule",{value:!0});rr.createModuleLogger=rr.createProjectLogger=void 0;const Q0=G0(J0),Z0=(0,Q0.default)("metamask");function Y0(t){return Z0.extend(t)}rr.createProjectLogger=Y0;function K0(t,e){return t.extend(e)}rr.createModuleLogger=K0;var Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.hexToBigInt=Ge.hexToNumber=Ge.bigIntToHex=Ge.numberToHex=void 0;const Qt=ae,Br=Yr,X0=t=>((0,Qt.assert)(typeof t=="number","Value must be a number."),(0,Qt.assert)(t>=0,"Value must be a non-negative number."),(0,Qt.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,Br.add0x)(t.toString(16)));Ge.numberToHex=X0;const eb=t=>((0,Qt.assert)(typeof t=="bigint","Value must be a bigint."),(0,Qt.assert)(t>=0,"Value must be a non-negative bigint."),(0,Br.add0x)(t.toString(16)));Ge.bigIntToHex=eb;const tb=t=>{(0,Br.assertIsHexString)(t);const e=parseInt(t,16);return(0,Qt.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `hexToBigInt` instead."),e};Ge.hexToNumber=tb;const rb=t=>((0,Br.assertIsHexString)(t),BigInt((0,Br.add0x)(t)));Ge.hexToBigInt=rb;var $u={};Object.defineProperty($u,"__esModule",{value:!0});var Vu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.timeSince=t.inMilliseconds=t.Duration=void 0,function(s){s[s.Millisecond=1]="Millisecond",s[s.Second=1e3]="Second",s[s.Minute=6e4]="Minute",s[s.Hour=36e5]="Hour",s[s.Day=864e5]="Day",s[s.Week=6048e5]="Week",s[s.Year=31536e6]="Year"}(t.Duration||(t.Duration={}));const e=s=>Number.isInteger(s)&&s>=0,r=(s,o)=>{if(!e(s))throw new Error(`"${o}" must be a non-negative integer. Received: "${s}".`)};function n(s,o){return r(s,"count"),s*o}t.inMilliseconds=n;function i(s){return r(s,"timestamp"),Date.now()-s}t.timeSince=i})(Vu);var Wu={};const Ca=Ae,nb=(t,e,r=!1)=>{if(t instanceof Ca)return t;try{return new Ca(t,e)}catch(n){if(!r)return null;throw n}};var mr=nb;const ib=mr,sb=(t,e)=>{const r=ib(t,e);return r?r.version:null};var ob=sb;const ab=mr,cb=(t,e)=>{const r=ab(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};var ub=cb;const ka=Ae,lb=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new ka(t instanceof ka?t.version:t,r).inc(e,n,i).version}catch{return null}};var fb=lb;const Ia=mr,hb=(t,e)=>{const r=Ia(t,null,!0),n=Ia(e,null,!0),i=r.compare(n);if(i===0)return null;const s=i>0,o=s?r:n,a=s?n:r,u=!!o.prerelease.length;if(!!a.prerelease.length&&!u)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";const l=u?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};var db=hb;const pb=Ae,bb=(t,e)=>new pb(t,e).major;var gb=bb;const yb=Ae,mb=(t,e)=>new yb(t,e).minor;var vb=mb;const _b=Ae,wb=(t,e)=>new _b(t,e).patch;var Sb=wb;const Eb=mr,Cb=(t,e)=>{const r=Eb(t,e);return r&&r.prerelease.length?r.prerelease:null};var kb=Cb;const Ib=Hr,Mb=(t,e,r)=>Ib(e,t,r);var xb=Mb;const Rb=Hr,Tb=(t,e)=>Rb(t,e,!0);var Ab=Tb;const Ma=Ae,Ob=(t,e,r)=>{const n=new Ma(t,r),i=new Ma(e,r);return n.compare(i)||n.compareBuild(i)};var oo=Ob;const Nb=oo,Lb=(t,e)=>t.sort((r,n)=>Nb(r,n,e));var Pb=Lb;const jb=oo,Db=(t,e)=>t.sort((r,n)=>jb(n,r,e));var Bb=Db;const Fb=Ae,$b=mr,{safeRe:gn,t:yn}=Oc,Vb=(t,e)=>{if(t instanceof Fb)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(gn[yn.COERCE]);else{let n;for(;(n=gn[yn.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),gn[yn.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;gn[yn.COERCERTL].lastIndex=-1}return r===null?null:$b(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};var Wb=Vb;const Hb=it(),zb=(t,e)=>new Hb(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var Ub=zb;const qb=Ae,Jb=it(),Gb=(t,e,r)=>{let n=null,i=null,s=null;try{s=new Jb(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new qb(n,r))}),n};var Qb=Gb;const Zb=Ae,Yb=it(),Kb=(t,e,r)=>{let n=null,i=null,s=null;try{s=new Yb(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new Zb(n,r))}),n};var Xb=Kb;const Ji=Ae,eg=it(),xa=Ps,tg=(t,e)=>{t=new eg(t,e);let r=new Ji("0.0.0");if(t.test(r)||(r=new Ji("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){const i=t.set[n];let s=null;i.forEach(o=>{const a=new Ji(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||xa(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||xa(r,s))&&(r=s)}return r&&t.test(r)?r:null};var rg=tg;const ng=it(),ig=(t,e)=>{try{return new ng(t,e).range||"*"}catch{return null}};var sg=ig;const og=Ae,Hu=js(),{ANY:ag}=Hu,cg=it(),ug=Hn,Ra=Ps,Ta=Nc,lg=Lc,fg=Pc,hg=(t,e,r,n)=>{t=new og(t,n),e=new cg(e,n);let i,s,o,a,u;switch(r){case">":i=Ra,s=lg,o=Ta,a=">",u=">=";break;case"<":i=Ta,s=fg,o=Ra,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ug(t,e,n))return!1;for(let c=0;c<e.set.length;++c){const l=e.set[c];let f=null,h=null;if(l.forEach(d=>{d.semver===ag&&(d=new Hu(">=0.0.0")),f=f||d,h=h||d,i(d.semver,f.semver,n)?f=d:o(d.semver,h.semver,n)&&(h=d)}),f.operator===a||f.operator===u||(!h.operator||h.operator===a)&&s(t,h.semver))return!1;if(h.operator===u&&o(t,h.semver))return!1}return!0};var ao=hg;const dg=ao,pg=(t,e,r)=>dg(t,e,">",r);var bg=pg;const gg=ao,yg=(t,e,r)=>gg(t,e,"<",r);var mg=yg;const Aa=it(),vg=(t,e,r)=>(t=new Aa(t,r),e=new Aa(e,r),t.intersects(e,r));var _g=vg;const wg=Hn,Sg=Hr;var Eg=(t,e,r)=>{const n=[];let i=null,s=null;const o=t.sort((l,f)=>Sg(l,f,r));for(const l of o)wg(l,e,r)?(s=l,i||(i=l)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);const a=[];for(const[l,f]of n)l===f?a.push(l):!f&&l===o[0]?a.push("*"):f?l===o[0]?a.push(`<=${f}`):a.push(`${l} - ${f}`):a.push(`>=${l}`);const u=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return u.length<c.length?u:e};const Oa=it(),co=js(),{ANY:Gi}=co,kr=Hn,uo=Hr,Cg=(t,e,r={})=>{if(t===e)return!0;t=new Oa(t,r),e=new Oa(e,r);let n=!1;e:for(const i of t.set){for(const s of e.set){const o=Ig(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},kg=[new co(">=0.0.0-0")],Na=[new co(">=0.0.0")],Ig=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Gi){if(e.length===1&&e[0].semver===Gi)return!0;r.includePrerelease?t=kg:t=Na}if(e.length===1&&e[0].semver===Gi){if(r.includePrerelease)return!0;e=Na}const n=new Set;let i,s;for(const d of t)d.operator===">"||d.operator===">="?i=La(i,d,r):d.operator==="<"||d.operator==="<="?s=Pa(s,d,r):n.add(d.semver);if(n.size>1)return null;let o;if(i&&s){if(o=uo(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(const d of n){if(i&&!kr(d,String(i),r)||s&&!kr(d,String(s),r))return null;for(const p of e)if(!kr(d,String(p),r))return!1;return!0}let a,u,c,l,f=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,h=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&s.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(const d of e){if(l=l||d.operator===">"||d.operator===">=",c=c||d.operator==="<"||d.operator==="<=",i){if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),d.operator===">"||d.operator===">="){if(a=La(i,d,r),a===d&&a!==i)return!1}else if(i.operator===">="&&!kr(i.semver,String(d),r))return!1}if(s){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(u=Pa(s,d,r),u===d&&u!==s)return!1}else if(s.operator==="<="&&!kr(s.semver,String(d),r))return!1}if(!d.operator&&(s||i)&&o!==0)return!1}return!(i&&c&&!s&&o!==0||s&&l&&!i&&o!==0||h||f)},La=(t,e,r)=>{if(!t)return e;const n=uo(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},Pa=(t,e,r)=>{if(!t)return e;const n=uo(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};var Mg=Cg;const Qi=Oc,ja=Yf,xg=Ae,Da=Kf,Rg=mr,Tg=ob,Ag=ub,Og=fb,Ng=db,Lg=gb,Pg=vb,jg=Sb,Dg=kb,Bg=Hr,Fg=xb,$g=Ab,Vg=oo,Wg=Pb,Hg=Bb,zg=Ps,Ug=Nc,qg=Xf,Jg=eh,Gg=Pc,Qg=Lc,Zg=th,Yg=Wb,Kg=js(),Xg=it(),ey=Hn,ty=Ub,ry=Qb,ny=Xb,iy=rg,sy=sg,oy=ao,ay=bg,cy=mg,uy=_g,ly=Eg,fy=Mg;var hy={parse:Rg,valid:Tg,clean:Ag,inc:Og,diff:Ng,major:Lg,minor:Pg,patch:jg,prerelease:Dg,compare:Bg,rcompare:Fg,compareLoose:$g,compareBuild:Vg,sort:Wg,rsort:Hg,gt:zg,lt:Ug,eq:qg,neq:Jg,gte:Gg,lte:Qg,cmp:Zg,coerce:Yg,Comparator:Kg,Range:Xg,satisfies:ey,toComparators:ty,maxSatisfying:ry,minSatisfying:ny,minVersion:iy,validRange:sy,outside:oy,gtr:ay,ltr:cy,intersects:uy,simplifyRange:ly,subset:fy,SemVer:xg,re:Qi.re,src:Qi.src,tokens:Qi.t,SEMVER_SPEC_VERSION:ja.SEMVER_SPEC_VERSION,RELEASE_TYPES:ja.RELEASE_TYPES,compareIdentifiers:Da.compareIdentifiers,rcompareIdentifiers:Da.rcompareIdentifiers};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.satisfiesVersionRange=t.gtRange=t.gtVersion=t.assertIsSemVerRange=t.assertIsSemVerVersion=t.isValidSemVerRange=t.isValidSemVerVersion=t.VersionRangeStruct=t.VersionStruct=void 0;const e=hy,r=Bt,n=ae;t.VersionStruct=(0,r.refine)((0,r.string)(),"Version",f=>(0,e.valid)(f)===null?`Expected SemVer version, got "${f}"`:!0),t.VersionRangeStruct=(0,r.refine)((0,r.string)(),"Version range",f=>(0,e.validRange)(f)===null?`Expected SemVer range, got "${f}"`:!0);function i(f){return(0,r.is)(f,t.VersionStruct)}t.isValidSemVerVersion=i;function s(f){return(0,r.is)(f,t.VersionRangeStruct)}t.isValidSemVerRange=s;function o(f){(0,n.assertStruct)(f,t.VersionStruct)}t.assertIsSemVerVersion=o;function a(f){(0,n.assertStruct)(f,t.VersionRangeStruct)}t.assertIsSemVerRange=a;function u(f,h){return(0,e.gt)(f,h)}t.gtVersion=u;function c(f,h){return(0,e.gtr)(f,h)}t.gtRange=c;function l(f,h){return(0,e.satisfies)(f,h,{includePrerelease:!0})}t.satisfiesVersionRange=l})(Wu);(function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,a)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=E&&E.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ae,t),r(Zr,t),r(D,t),r(ei,t),r(Je,t),r(tr,t),r(Yr,t),r(Fu,t),r(rr,t),r(so,t),r(Ge,t),r($u,t),r(Vu,t),r(Wu,t)})(_u);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.createModuleLogger=t.projectLogger=void 0;const e=_u;Object.defineProperty(t,"createModuleLogger",{enumerable:!0,get:function(){return e.createModuleLogger}}),t.projectLogger=(0,e.createProjectLogger)("eth-block-tracker")})(vu);var zu=E&&E.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.PollingBlockTracker=void 0;const dy=zu(Qs),py=zu(Cp),by=Gr,Ba=vu,Fa=(0,Ba.createModuleLogger)(Ba.projectLogger,"polling-block-tracker"),gy=(0,dy.default)(),yy=1e3;class my extends by.BaseBlockTracker{constructor(e={}){var r;if(!e.provider)throw new Error("PollingBlockTracker - no provider specified.");super({blockResetDuration:(r=e.blockResetDuration)!==null&&r!==void 0?r:e.pollingInterval}),this._provider=e.provider,this._pollingInterval=e.pollingInterval||20*yy,this._retryTimeout=e.retryTimeout||this._pollingInterval/10,this._keepEventLoopActive=e.keepEventLoopActive===void 0?!0:e.keepEventLoopActive,this._setSkipCacheFlag=e.setSkipCacheFlag||!1}async checkForLatestBlock(){return await this._updateLatestBlock(),await this.getLatestBlock()}async _start(){this._synchronize()}async _end(){}async _synchronize(){for(var e;this._isRunning;)try{await this._updateLatestBlock();const r=$a(this._pollingInterval,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await r}catch(r){const n=new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:
${(e=r.stack)!==null&&e!==void 0?e:r}`);try{this.emit("error",n)}catch{console.error(n)}const i=$a(this._retryTimeout,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await i}}async _updateLatestBlock(){const e=await this._fetchLatestBlock();this._newPotentialLatest(e)}async _fetchLatestBlock(){const e={jsonrpc:"2.0",id:gy(),method:"eth_blockNumber",params:[]};this._setSkipCacheFlag&&(e.skipCache=!0),Fa("Making request",e);const r=await(0,py.default)(n=>this._provider.sendAsync(e,n))();if(Fa("Got response",r),r.error)throw new Error(`PollingBlockTracker - encountered error fetching block:
${r.error.message}`);return r.result}}Kn.PollingBlockTracker=my;function $a(t,e){return new Promise(r=>{const n=setTimeout(r,t);n.unref&&e&&n.unref()})}var ri={},vy=E&&E.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ri,"__esModule",{value:!0});ri.SubscribeBlockTracker=void 0;const _y=vy(Qs),wy=Gr,Sy=(0,_y.default)();class Ey extends wy.BaseBlockTracker{constructor(e={}){if(!e.provider)throw new Error("SubscribeBlockTracker - no provider specified.");super(e),this._provider=e.provider,this._subscriptionId=null}async checkForLatestBlock(){return await this.getLatestBlock()}async _start(){if(this._subscriptionId===void 0||this._subscriptionId===null)try{const e=await this._call("eth_blockNumber");this._subscriptionId=await this._call("eth_subscribe","newHeads"),this._provider.on("data",this._handleSubData.bind(this)),this._newPotentialLatest(e)}catch(e){this.emit("error",e)}}async _end(){if(this._subscriptionId!==null&&this._subscriptionId!==void 0)try{await this._call("eth_unsubscribe",this._subscriptionId),this._subscriptionId=null}catch(e){this.emit("error",e)}}_call(e,...r){return new Promise((n,i)=>{this._provider.sendAsync({id:Sy(),method:e,params:r,jsonrpc:"2.0"},(s,o)=>{s?i(s):n(o.result)})})}_handleSubData(e,r){var n;r.method==="eth_subscription"&&((n=r.params)===null||n===void 0?void 0:n.subscription)===this._subscriptionId&&this._newPotentialLatest(r.params.result.number)}}ri.SubscribeBlockTracker=Ey;var Uu={};Object.defineProperty(Uu,"__esModule",{value:!0});(function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=E&&E.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Kn,t),r(ri,t),r(Uu,t)})(mu);var lo={},ni={},Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.getUniqueId=void 0;const qu=4294967295;let Zi=Math.floor(Math.random()*qu);function Cy(){return Zi=(Zi+1)%qu,Zi}Kr.getUniqueId=Cy;Object.defineProperty(ni,"__esModule",{value:!0});ni.createIdRemapMiddleware=void 0;const ky=Kr;function Iy(){return(t,e,r,n)=>{const i=t.id,s=ky.getUniqueId();t.id=s,e.id=s,r(o=>{t.id=i,e.id=i,o()})}}ni.createIdRemapMiddleware=Iy;var ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.createAsyncMiddleware=void 0;function My(t){return async(e,r,n,i)=>{let s;const o=new Promise(l=>{s=l});let a=null,u=!1;const c=async()=>{u=!0,n(l=>{a=l,s()}),await o};try{await t(e,r,c),u?(await o,a(null)):i(null)}catch(l){a?a(l):i(l)}}}ii.createAsyncMiddleware=My;var si={};Object.defineProperty(si,"__esModule",{value:!0});si.createScaffoldMiddleware=void 0;function xy(t){return(e,r,n,i)=>{const s=t[e.method];return s===void 0?n():typeof s=="function"?s(e,r,n,i):(r.result=s,i())}}si.createScaffoldMiddleware=xy;var Xr={},Ry=E&&E.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.JsonRpcEngine=void 0;const Ty=Ry(Pt),Ce=Bs;class Ke extends Ty.default{constructor(){super(),this._middleware=[]}push(e){this._middleware.push(e)}handle(e,r){if(r&&typeof r!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?r?this._handleBatch(e,r):this._handleBatch(e):r?this._handle(e,r):this._promiseHandle(e)}asMiddleware(){return async(e,r,n,i)=>{try{const[s,o,a]=await Ke._runAllMiddleware(e,r,this._middleware);return o?(await Ke._runReturnHandlers(a),i(s)):n(async u=>{try{await Ke._runReturnHandlers(a)}catch(c){return u(c)}return u()})}catch(s){return i(s)}}}async _handleBatch(e,r){try{const n=await Promise.all(e.map(this._promiseHandle.bind(this)));return r?r(null,n):n}catch(n){if(r)return r(n);throw n}}_promiseHandle(e){return new Promise(r=>{this._handle(e,(n,i)=>{r(i)})})}async _handle(e,r){if(!e||Array.isArray(e)||typeof e!="object"){const o=new Ce.EthereumRpcError(Ce.errorCodes.rpc.invalidRequest,`Requests must be plain objects. Received: ${typeof e}`,{request:e});return r(o,{id:void 0,jsonrpc:"2.0",error:o})}if(typeof e.method!="string"){const o=new Ce.EthereumRpcError(Ce.errorCodes.rpc.invalidRequest,`Must specify a string method. Received: ${typeof e.method}`,{request:e});return r(o,{id:e.id,jsonrpc:"2.0",error:o})}const n=Object.assign({},e),i={id:n.id,jsonrpc:n.jsonrpc};let s=null;try{await this._processRequest(n,i)}catch(o){s=o}return s&&(delete i.result,i.error||(i.error=Ce.serializeError(s))),r(s,i)}async _processRequest(e,r){const[n,i,s]=await Ke._runAllMiddleware(e,r,this._middleware);if(Ke._checkForCompletion(e,r,i),await Ke._runReturnHandlers(s),n)throw n}static async _runAllMiddleware(e,r,n){const i=[];let s=null,o=!1;for(const a of n)if([s,o]=await Ke._runMiddleware(e,r,a,i),o)break;return[s,o,i.reverse()]}static _runMiddleware(e,r,n,i){return new Promise(s=>{const o=u=>{const c=u||r.error;c&&(r.error=Ce.serializeError(c)),s([c,!0])},a=u=>{r.error?o(r.error):(u&&(typeof u!="function"&&o(new Ce.EthereumRpcError(Ce.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof u}" for request:
${Yi(e)}`,{request:e})),i.push(u)),s([null,!1]))};try{n(e,r,a,o)}catch(u){o(u)}})}static async _runReturnHandlers(e){for(const r of e)await new Promise((n,i)=>{r(s=>s?i(s):n())})}static _checkForCompletion(e,r,n){if(!("result"in r)&&!("error"in r))throw new Ce.EthereumRpcError(Ce.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:
${Yi(e)}`,{request:e});if(!n)throw new Ce.EthereumRpcError(Ce.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:
${Yi(e)}`,{request:e})}}Xr.JsonRpcEngine=Ke;function Yi(t){return JSON.stringify(t,null,2)}var oi={};Object.defineProperty(oi,"__esModule",{value:!0});oi.mergeMiddleware=void 0;const Ay=Xr;function Oy(t){const e=new Ay.JsonRpcEngine;return t.forEach(r=>e.push(r)),e.asMiddleware()}oi.mergeMiddleware=Oy;(function(t){var e=E&&E.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=E&&E.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ni,t),r(ii,t),r(si,t),r(Kr,t),r(Xr,t),r(oi,t)})(lo);var Ju={},fo={},Ss=function(t,e){return Ss=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Ss(t,e)};function Gu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ss(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Nn=function(){return Nn=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Nn.apply(this,arguments)};function Qu(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Zu(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Yu(t,e){return function(r,n){e(r,n,t)}}function Ny(t,e,r,n,i,s){function o(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var a=n.kind,u=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?n.static?t:t.prototype:null,l=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),f,h=!1,d=r.length-1;d>=0;d--){var p={};for(var v in n)p[v]=v==="access"?{}:n[v];for(var v in n.access)p.access[v]=n.access[v];p.addInitializer=function(b){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(b||null))};var y=(0,r[d])(a==="accessor"?{get:l.get,set:l.set}:l[u],p);if(a==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(f=o(y.get))&&(l.get=f),(f=o(y.set))&&(l.set=f),(f=o(y.init))&&i.unshift(f)}else(f=o(y))&&(a==="field"?i.unshift(f):l[u]=f)}c&&Object.defineProperty(c,n.name,l),h=!0}function Ly(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function Py(t){return typeof t=="symbol"?t:"".concat(t)}function jy(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Ku(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Xu(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})}function el(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var ai=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function tl(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ai(e,t,r)}function Ln(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ho(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function rl(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ho(arguments[e]));return t}function nl(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function il(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function nr(t){return this instanceof nr?(this.v=t,this):new nr(t)}function sl(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){n[h]&&(i[h]=function(d){return new Promise(function(p,v){s.push([h,d,p,v])>1||a(h,d)})})}function a(h,d){try{u(n[h](d))}catch(p){f(s[0][3],p)}}function u(h){h.value instanceof nr?Promise.resolve(h.value.v).then(c,l):f(s[0][2],h)}function c(h){a("next",h)}function l(h){a("throw",h)}function f(h,d){h(d),s.shift(),s.length&&a(s[0][0],s[0][1])}}function ol(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:nr(t[i](o)),done:!1}:s?s(o):o}:s}}function al(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Ln=="function"?Ln(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function cl(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Dy=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function ul(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ai(e,t,r);return Dy(e,t),e}function ll(t){return t&&t.__esModule?t:{default:t}}function fl(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function hl(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function dl(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function pl(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var By=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function bl(t){function e(n){t.error=t.hasError?new By(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}function r(){for(;t.stack.length;){var n=t.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,function(s){return e(s),r()})}catch(s){e(s)}}if(t.hasError)throw t.error}return r()}const Fy={__extends:Gu,__assign:Nn,__rest:Qu,__decorate:Zu,__param:Yu,__metadata:Ku,__awaiter:Xu,__generator:el,__createBinding:ai,__exportStar:tl,__values:Ln,__read:ho,__spread:rl,__spreadArrays:nl,__spreadArray:il,__await:nr,__asyncGenerator:sl,__asyncDelegator:ol,__asyncValues:al,__makeTemplateObject:cl,__importStar:ul,__importDefault:ll,__classPrivateFieldGet:fl,__classPrivateFieldSet:hl,__classPrivateFieldIn:dl,__addDisposableResource:pl,__disposeResources:bl},$y=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:pl,get __assign(){return Nn},__asyncDelegator:ol,__asyncGenerator:sl,__asyncValues:al,__await:nr,__awaiter:Xu,__classPrivateFieldGet:fl,__classPrivateFieldIn:dl,__classPrivateFieldSet:hl,__createBinding:ai,__decorate:Zu,__disposeResources:bl,__esDecorate:Ny,__exportStar:tl,__extends:Gu,__generator:el,__importDefault:ll,__importStar:ul,__makeTemplateObject:cl,__metadata:Ku,__param:Yu,__propKey:Py,__read:ho,__rest:Qu,__runInitializers:Ly,__setFunctionName:jy,__spread:rl,__spreadArray:il,__spreadArrays:nl,__values:Ln,default:Fy},Symbol.toStringTag,{value:"Module"})),po=Lt($y);var ci={};Object.defineProperty(ci,"__esModule",{value:!0});var Va=po,Vy=function(){function t(e){if(this._maxConcurrency=e,this._queue=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}return t.prototype.acquire=function(){var e=this,r=this.isLocked(),n=new Promise(function(i){return e._queue.push(i)});return r||this._dispatch(),n},t.prototype.runExclusive=function(e){return Va.__awaiter(this,void 0,void 0,function(){var r,n,i;return Va.__generator(this,function(s){switch(s.label){case 0:return[4,this.acquire()];case 1:r=s.sent(),n=r[0],i=r[1],s.label=2;case 2:return s.trys.push([2,,4,5]),[4,e(n)];case 3:return[2,s.sent()];case 4:return i(),[7];case 5:return[2]}})})},t.prototype.isLocked=function(){return this._value<=0},t.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var e=this._currentReleaser;this._currentReleaser=void 0,e()}},t.prototype._dispatch=function(){var e=this,r=this._queue.shift();if(r){var n=!1;this._currentReleaser=function(){n||(n=!0,e._value++,e._dispatch())},r([this._value--,this._currentReleaser])}},t}();ci.default=Vy;Object.defineProperty(fo,"__esModule",{value:!0});var Wa=po,Wy=ci,Hy=function(){function t(){this._semaphore=new Wy.default(1)}return t.prototype.acquire=function(){return Wa.__awaiter(this,void 0,void 0,function(){var e,r;return Wa.__generator(this,function(n){switch(n.label){case 0:return[4,this._semaphore.acquire()];case 1:return e=n.sent(),r=e[1],[2,r]}})})},t.prototype.runExclusive=function(e){return this._semaphore.runExclusive(function(){return e()})},t.prototype.isLocked=function(){return this._semaphore.isLocked()},t.prototype.release=function(){this._semaphore.release()},t}();fo.default=Hy;var ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.withTimeout=void 0;var mn=po;function zy(t,e,r){var n=this;return r===void 0&&(r=new Error("timeout")),{acquire:function(){return new Promise(function(i,s){return mn.__awaiter(n,void 0,void 0,function(){var o,a,u;return mn.__generator(this,function(c){switch(c.label){case 0:return o=!1,setTimeout(function(){o=!0,s(r)},e),[4,t.acquire()];case 1:return a=c.sent(),o?(u=Array.isArray(a)?a[1]:a,u()):i(a),[2]}})})})},runExclusive:function(i){return mn.__awaiter(this,void 0,void 0,function(){var s,o;return mn.__generator(this,function(a){switch(a.label){case 0:s=function(){},a.label=1;case 1:return a.trys.push([1,,7,8]),[4,this.acquire()];case 2:return o=a.sent(),Array.isArray(o)?(s=o[1],[4,i(o[0])]):[3,4];case 3:return[2,a.sent()];case 4:return s=o,[4,i()];case 5:return[2,a.sent()];case 6:return[3,8];case 7:return s(),[7];case 8:return[2]}})})},release:function(){t.release()},isLocked:function(){return t.isLocked()}}}ui.withTimeout=zy;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.withTimeout=t.Semaphore=t.Mutex=void 0;var e=fo;Object.defineProperty(t,"Mutex",{enumerable:!0,get:function(){return e.default}});var r=ci;Object.defineProperty(t,"Semaphore",{enumerable:!0,get:function(){return r.default}});var n=ui;Object.defineProperty(t,"withTimeout",{enumerable:!0,get:function(){return n.withTimeout}})})(Ju);var Uy=Jy,qy=Object.prototype.hasOwnProperty;function Jy(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)qy.call(r,n)&&(t[n]=r[n])}return t}const Gy=Uy,Qy=Qs();var Zy=T;function T(t){const e=this;e.currentProvider=t}T.prototype.getBalance=en(2,"eth_getBalance");T.prototype.getCode=en(2,"eth_getCode");T.prototype.getTransactionCount=en(2,"eth_getTransactionCount");T.prototype.getStorageAt=en(3,"eth_getStorageAt");T.prototype.call=en(2,"eth_call");T.prototype.protocolVersion=N("eth_protocolVersion");T.prototype.syncing=N("eth_syncing");T.prototype.coinbase=N("eth_coinbase");T.prototype.mining=N("eth_mining");T.prototype.hashrate=N("eth_hashrate");T.prototype.gasPrice=N("eth_gasPrice");T.prototype.accounts=N("eth_accounts");T.prototype.blockNumber=N("eth_blockNumber");T.prototype.getBlockTransactionCountByHash=N("eth_getBlockTransactionCountByHash");T.prototype.getBlockTransactionCountByNumber=N("eth_getBlockTransactionCountByNumber");T.prototype.getUncleCountByBlockHash=N("eth_getUncleCountByBlockHash");T.prototype.getUncleCountByBlockNumber=N("eth_getUncleCountByBlockNumber");T.prototype.sign=N("eth_sign");T.prototype.sendTransaction=N("eth_sendTransaction");T.prototype.sendRawTransaction=N("eth_sendRawTransaction");T.prototype.estimateGas=N("eth_estimateGas");T.prototype.getBlockByHash=N("eth_getBlockByHash");T.prototype.getBlockByNumber=N("eth_getBlockByNumber");T.prototype.getTransactionByHash=N("eth_getTransactionByHash");T.prototype.getTransactionByBlockHashAndIndex=N("eth_getTransactionByBlockHashAndIndex");T.prototype.getTransactionByBlockNumberAndIndex=N("eth_getTransactionByBlockNumberAndIndex");T.prototype.getTransactionReceipt=N("eth_getTransactionReceipt");T.prototype.getUncleByBlockHashAndIndex=N("eth_getUncleByBlockHashAndIndex");T.prototype.getUncleByBlockNumberAndIndex=N("eth_getUncleByBlockNumberAndIndex");T.prototype.getCompilers=N("eth_getCompilers");T.prototype.compileLLL=N("eth_compileLLL");T.prototype.compileSolidity=N("eth_compileSolidity");T.prototype.compileSerpent=N("eth_compileSerpent");T.prototype.newFilter=N("eth_newFilter");T.prototype.newBlockFilter=N("eth_newBlockFilter");T.prototype.newPendingTransactionFilter=N("eth_newPendingTransactionFilter");T.prototype.uninstallFilter=N("eth_uninstallFilter");T.prototype.getFilterChanges=N("eth_getFilterChanges");T.prototype.getFilterLogs=N("eth_getFilterLogs");T.prototype.getLogs=N("eth_getLogs");T.prototype.getWork=N("eth_getWork");T.prototype.submitWork=N("eth_submitWork");T.prototype.submitHashrate=N("eth_submitHashrate");T.prototype.sendAsync=function(t,e){this.currentProvider.sendAsync(Yy(t),function(n,i){if(!n&&i.error&&(n=new Error("EthQuery - RPC Error - "+i.error.message)),n)return e(n);e(null,i.result)})};function N(t){return function(){const e=this;var r=[].slice.call(arguments),n=r.pop();e.sendAsync({method:t,params:r},n)}}function en(t,e){return function(){const r=this;var n=[].slice.call(arguments),i=n.pop();n.length<t&&n.push("latest"),r.sendAsync({method:e,params:n},i)}}function Yy(t){return Gy({id:Qy(),jsonrpc:"2.0",params:[]},t)}const Ha=(t,e,r,n)=>function(...i){const s=e.promiseModule;return new s((o,a)=>{e.multiArgs?i.push((...c)=>{e.errorFirst?c[0]?a(c):(c.shift(),o(c)):o(c)}):e.errorFirst?i.push((c,l)=>{c?a(c):o(l)}):i.push(o),Reflect.apply(t,this===r?n:this,i)})},za=new WeakMap;var Ky=(t,e)=>{e={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...e};const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const n=(o,a)=>{let u=za.get(o);if(u||(u={},za.set(o,u)),a in u)return u[a];const c=p=>typeof p=="string"||typeof a=="symbol"?a===p:p.test(a),l=Reflect.getOwnPropertyDescriptor(o,a),f=l===void 0||l.writable||l.configurable,d=(e.include?e.include.some(c):!e.exclude.some(c))&&f;return u[a]=d,d},i=new WeakMap,s=new Proxy(t,{apply(o,a,u){const c=i.get(o);if(c)return Reflect.apply(c,a,u);const l=e.excludeMain?o:Ha(o,e,s,o);return i.set(o,l),Reflect.apply(l,a,u)},get(o,a){const u=o[a];if(!n(o,a)||u===Function.prototype[a])return u;const c=i.get(u);if(c)return c;if(typeof u=="function"){const l=Ha(u,e,s,o);return i.set(u,l),l}return u}});return s};const Xy=Pt.default;let em=class extends Xy{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach(r=>this.emit("update",r))}addInitialResults(e){}getChangesAndClear(){const e=this.updates;return this.updates=[],e}};var bo=em;const tm=bo;let rm=class extends tm{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}};var nm=rm,tn={minBlockRef:im,maxBlockRef:sm,sortBlockRefs:go,bnToHex:om,blockRefIsNumber:am,hexToInt:Pn,incrementHexInt:cm,intToHex:gl,unsafeRandomBytes:um};function im(...t){return go(t)[0]}function sm(...t){const e=go(t);return e[e.length-1]}function go(t){return t.sort((e,r)=>e==="latest"||r==="earliest"?1:r==="latest"||e==="earliest"?-1:Pn(e)-Pn(r))}function om(t){return"0x"+t.toString(16)}function am(t){return t&&!["earliest","latest","pending"].includes(t)}function Pn(t){return t==null?t:Number.parseInt(t,16)}function cm(t){if(t==null)return t;const e=Pn(t);return gl(e+1)}function gl(t){if(t==null)return t;let e=t.toString(16);return e.length%2&&(e="0"+e),"0x"+e}function um(t){let e="0x";for(let r=0;r<t;r++)e+=Ua(),e+=Ua();return e}function Ua(){return Math.floor(Math.random()*16).toString(16)}const lm=Zy,fm=Ky,hm=nm,{bnToHex:N3,hexToInt:vn,incrementHexInt:dm,minBlockRef:pm,blockRefIsNumber:bm}=tn;let gm=class extends hm{constructor({provider:e,params:r}){super(),this.type="log",this.ethQuery=new lm(e),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:void 0,topics:[]},r),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map(n=>n.toLowerCase()))}async initialize({currentBlock:e}){let r=this.params.fromBlock;["latest","pending"].includes(r)&&(r=e),r==="earliest"&&(r="0x0"),this.params.fromBlock=r;const n=pm(this.params.toBlock,e),i=Object.assign({},this.params,{toBlock:n}),s=await this._fetchLogs(i);this.addInitialResults(s)}async update({oldBlock:e,newBlock:r}){const n=r;let i;e?i=dm(e):i=r;const s=Object.assign({},this.params,{fromBlock:i,toBlock:n}),a=(await this._fetchLogs(s)).filter(u=>this.matchLog(u));this.addResults(a)}async _fetchLogs(e){return await fm(n=>this.ethQuery.getLogs(e,n))()}matchLog(e){if(vn(this.params.fromBlock)>=vn(e.blockNumber)||bm(this.params.toBlock)&&vn(this.params.toBlock)<=vn(e.blockNumber))return!1;const r=e.address&&e.address.toLowerCase();return this.params.address&&r&&!this.params.address.includes(r)?!1:this.params.topics.every((i,s)=>{let o=e.topics[s];if(!o)return!1;o=o.toLowerCase();let a=Array.isArray(i)?i:[i];return a.includes(null)?!0:(a=a.map(l=>l.toLowerCase()),a.includes(o))})}};var ym=gm,yo=mm;async function mm({provider:t,fromBlock:e,toBlock:r}){e||(e=r);const n=qa(e),s=qa(r)-n+1,o=Array(s).fill().map((u,c)=>n+c).map(vm);return await Promise.all(o.map(u=>wm(t,"eth_getBlockByNumber",[u,!1])))}function qa(t){return t==null?t:Number.parseInt(t,16)}function vm(t){return t==null?t:"0x"+t.toString(16)}function _m(t,e){return new Promise((r,n)=>{t.sendAsync(e,(i,s)=>{i?n(i):s.error?n(s.error):s.result?r(s.result):n(new Error("Result was empty"))})})}async function wm(t,e,r){for(let n=0;n<3;n++)try{return await _m(t,{id:1,jsonrpc:"2.0",method:e,params:r})}catch(i){console.error(`provider.sendAsync failed: ${i.stack||i.message||i}`)}throw new Error(`Block not found for params: ${JSON.stringify(r)}`)}const Sm=bo,Em=yo,{incrementHexInt:Cm}=tn;let km=class extends Sm{constructor({provider:e,params:r}){super(),this.type="block",this.provider=e}async update({oldBlock:e,newBlock:r}){const n=r,i=Cm(e),o=(await Em({provider:this.provider,fromBlock:i,toBlock:n})).map(a=>a.hash);this.addResults(o)}};var Im=km;const Mm=bo,xm=yo,{incrementHexInt:Rm}=tn;let Tm=class extends Mm{constructor({provider:e}){super(),this.type="tx",this.provider=e}async update({oldBlock:e}){const r=e,n=Rm(e),i=await xm({provider:this.provider,fromBlock:n,toBlock:r}),s=[];for(const o of i)s.push(...o.transactions);this.addResults(s)}};var Am=Tm;const Om=Ju.Mutex,{createAsyncMiddleware:Nm,createScaffoldMiddleware:Lm}=lo,Pm=ym,jm=Im,Dm=Am,{intToHex:yl,hexToInt:Ki}=tn;var Bm=Fm;function Fm({blockTracker:t,provider:e}){let r=0,n={};const i=new Om,s=$m({mutex:i}),o=Lm({eth_newFilter:s(Xi(u)),eth_newBlockFilter:s(Xi(c)),eth_newPendingTransactionFilter:s(Xi(l)),eth_uninstallFilter:s(In(d)),eth_getFilterChanges:s(In(f)),eth_getFilterLogs:s(In(h))}),a=async({oldBlock:m,newBlock:_})=>{if(n.length===0)return;const k=await i.acquire();try{await Promise.all(Vt(n).map(async w=>{try{await w.update({oldBlock:m,newBlock:_})}catch(x){console.error(x)}}))}catch(w){console.error(w)}k()};return o.newLogFilter=u,o.newBlockFilter=c,o.newPendingTransactionFilter=l,o.uninstallFilter=d,o.getFilterChanges=f,o.getFilterLogs=h,o.destroy=()=>{y()},o;async function u(m){const _=new Pm({provider:e,params:m});return await p(_),_}async function c(){const m=new jm({provider:e});return await p(m),m}async function l(){const m=new Dm({provider:e});return await p(m),m}async function f(m){const _=Ki(m),k=n[_];if(!k)throw new Error(`No filter for index "${_}"`);return k.getChangesAndClear()}async function h(m){const _=Ki(m),k=n[_];if(!k)throw new Error(`No filter for index "${_}"`);let w=[];return k.type==="log"&&(w=k.getAllResults()),w}async function d(m){const _=Ki(m),w=!!n[_];return w&&await v(_),w}async function p(m){const _=Vt(n).length,k=await t.getLatestBlock();await m.initialize({currentBlock:k}),r++,n[r]=m,m.id=r,m.idHex=yl(r);const w=Vt(n).length;return b({prevFilterCount:_,newFilterCount:w}),r}async function v(m){const _=Vt(n).length;delete n[m];const k=Vt(n).length;b({prevFilterCount:_,newFilterCount:k})}async function y(){const m=Vt(n).length;n={},b({prevFilterCount:m,newFilterCount:0})}function b({prevFilterCount:m,newFilterCount:_}){if(m===0&&_>0){t.on("sync",a);return}if(m>0&&_===0){t.removeListener("sync",a);return}}}function Xi(t){return In(async(...e)=>{const r=await t(...e);return yl(r.id)})}function In(t){return Nm(async(e,r)=>{const n=await t.apply(null,e.params);r.result=n})}function $m({mutex:t}){return e=>async(r,n,i,s)=>{(await t.acquire())(),e(r,n,i,s)}}function Vt(t,e){const r=[];for(let n in t)r.push(t[n]);return r}const Vm=Pt.default,{createAsyncMiddleware:Ja,createScaffoldMiddleware:Wm}=lo,Hm=Bm,{unsafeRandomBytes:zm,incrementHexInt:Um}=tn,qm=yo;var Jm=Gm;function Gm({blockTracker:t,provider:e}){const r={},n=Hm({blockTracker:t,provider:e});let i=!1;const s=new Vm,o=Wm({eth_subscribe:Ja(a),eth_unsubscribe:Ja(u)});return o.destroy=l,{events:s,middleware:o};async function a(f,h){if(i)throw new Error("SubscriptionManager - attempting to use after destroying");const d=f.params[0],p=zm(16);let v;switch(d){case"newHeads":v=y({subId:p});break;case"logs":const m=f.params[1],_=await n.newLogFilter(m);v=b({subId:p,filter:_});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${d}"`)}r[p]=v,h.result=p;return;function y({subId:m}){const _={type:d,destroy:async()=>{t.removeListener("sync",_.update)},update:async({oldBlock:k,newBlock:w})=>{const x=w,j=Um(k);(await qm({provider:e,fromBlock:j,toBlock:x})).map(Qm).filter(L=>L!==null).forEach(L=>{c(m,L)})}};return t.on("sync",_.update),_}function b({subId:m,filter:_}){return _.on("update",w=>c(m,w)),{type:d,destroy:async()=>await n.uninstallFilter(_.idHex)}}}async function u(f,h){if(i)throw new Error("SubscriptionManager - attempting to use after destroying");const d=f.params[0],p=r[d];if(!p){h.result=!1;return}delete r[d],await p.destroy(),h.result=!0}function c(f,h){s.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:f,result:h}})}function l(){s.removeAllListeners();for(const f in r)r[f].destroy(),delete r[f];i=!0}}function Qm(t){return t==null?null:{hash:t.hash,parentHash:t.parentHash,sha3Uncles:t.sha3Uncles,miner:t.miner,stateRoot:t.stateRoot,transactionsRoot:t.transactionsRoot,receiptsRoot:t.receiptsRoot,logsBloom:t.logsBloom,difficulty:t.difficulty,number:t.number,gasLimit:t.gasLimit,gasUsed:t.gasUsed,nonce:t.nonce,mixHash:t.mixHash,timestamp:t.timestamp,extraData:t.extraData}}Object.defineProperty(Yn,"__esModule",{value:!0});Yn.SubscriptionManager=void 0;const Zm=mu,Ym=Jm,Ga=()=>{};class Km{constructor(e){const r=new Zm.PollingBlockTracker({provider:e,pollingInterval:15e3,setSkipCacheFlag:!0}),{events:n,middleware:i}=Ym({blockTracker:r,provider:e});this.events=n,this.subscriptionMiddleware=i}async handleRequest(e){const r={};return await this.subscriptionMiddleware(e,r,Ga,Ga),r}destroy(){this.subscriptionMiddleware.destroy()}}Yn.SubscriptionManager=Km;var mo=E&&E.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.CoinbaseWalletProvider=void 0;const Xm=mo(Pt),ev=mo(Wn),es=hr,$=zr,Qa=pr,Za=Be,ts=Gn,tv=W,A=S,rs=mo(vp),rv=er,F=yu,nv=Yn,Ya="DefaultChainId",Ka="DefaultJsonRpcUrl";class iv extends Xm.default{constructor(e){var r,n;super(),this._filterPolyfill=new rv.FilterPolyfill(this),this._subscriptionManager=new nv.SubscriptionManager(this),this._relay=null,this._addresses=[],this.hasMadeFirstChainChangedEmission=!1,this.setProviderInfo=this.setProviderInfo.bind(this),this.updateProviderInfo=this.updateProviderInfo.bind(this),this.getChainId=this.getChainId.bind(this),this.setAppInfo=this.setAppInfo.bind(this),this.enable=this.enable.bind(this),this.close=this.close.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this.request=this.request.bind(this),this._setAddresses=this._setAddresses.bind(this),this.scanQRCode=this.scanQRCode.bind(this),this.genericRequest=this.genericRequest.bind(this),this._chainIdFromOpts=e.chainId,this._jsonRpcUrlFromOpts=e.jsonRpcUrl,this._overrideIsMetaMask=e.overrideIsMetaMask,this._relayProvider=e.relayProvider,this._storage=e.storage,this._relayEventManager=e.relayEventManager,this.diagnostic=e.diagnosticLogger,this.reloadOnDisconnect=!0,this.isCoinbaseWallet=(r=e.overrideIsCoinbaseWallet)!==null&&r!==void 0?r:!0,this.isCoinbaseBrowser=(n=e.overrideIsCoinbaseBrowser)!==null&&n!==void 0?n:!1,this.qrUrl=e.qrUrl;const i=this.getChainId(),s=(0,A.prepend0x)(i.toString(16));this.emit("connect",{chainIdStr:s});const o=this._storage.getItem(Za.LOCAL_STORAGE_ADDRESSES_KEY);if(o){const a=o.split(" ");a[0]!==""&&(this._addresses=a.map(u=>(0,A.ensureAddressString)(u)),this.emit("accountsChanged",a))}this._subscriptionManager.events.on("notification",a=>{this.emit("message",{type:a.method,data:a.params})}),this._isAuthorized()&&this.initializeRelay(),window.addEventListener("message",a=>{var u;if(!(a.origin!==location.origin||a.source!==window)&&a.data.type==="walletLinkMessage"){if(a.data.data.action==="dappChainSwitched"){const c=a.data.data.chainId,l=(u=a.data.data.jsonRpcUrl)!==null&&u!==void 0?u:this.jsonRpcUrl;this.updateProviderInfo(l,Number(c))}a.data.data.action==="addressChanged"&&this._setAddresses([a.data.data.address])}})}get selectedAddress(){return this._addresses[0]||void 0}get networkVersion(){return this.getChainId().toString(10)}get chainId(){return(0,A.prepend0x)(this.getChainId().toString(16))}get isWalletLink(){return!0}get isMetaMask(){return this._overrideIsMetaMask}get host(){return this.jsonRpcUrl}get connected(){return!0}isConnected(){return!0}get jsonRpcUrl(){var e;return(e=this._storage.getItem(Ka))!==null&&e!==void 0?e:this._jsonRpcUrlFromOpts}set jsonRpcUrl(e){this._storage.setItem(Ka,e)}disableReloadOnDisconnect(){this.reloadOnDisconnect=!1}setProviderInfo(e,r){this.isCoinbaseBrowser||(this._chainIdFromOpts=r,this._jsonRpcUrlFromOpts=e),this.updateProviderInfo(this.jsonRpcUrl,this.getChainId())}updateProviderInfo(e,r){this.jsonRpcUrl=e;const n=this.getChainId();this._storage.setItem(Ya,r.toString(10)),((0,A.ensureIntNumber)(r)!==n||!this.hasMadeFirstChainChangedEmission)&&(this.emit("chainChanged",this.getChainId()),this.hasMadeFirstChainChangedEmission=!0)}async watchAsset(e,r,n,i,s,o){return!!(await(await this.initializeRelay()).watchAsset(e,r,n,i,s,o==null?void 0:o.toString()).promise).result}async addEthereumChain(e,r,n,i,s,o){var a,u;if((0,A.ensureIntNumber)(e)===this.getChainId())return!1;const c=await this.initializeRelay(),l=c.inlineAddEthereumChain(e.toString());!this._isAuthorized()&&!l&&await c.requestEthereumAccounts().promise;const f=await c.addEthereumChain(e.toString(),r,s,n,i,o).promise;return((a=f.result)===null||a===void 0?void 0:a.isApproved)===!0&&this.updateProviderInfo(r[0],e),((u=f.result)===null||u===void 0?void 0:u.isApproved)===!0}async switchEthereumChain(e){const n=await(await this.initializeRelay()).switchEthereumChain(e.toString(10),this.selectedAddress||void 0).promise;if((0,tv.isErrorResponse)(n)&&n.errorCode)throw n.errorCode===$.standardErrorCodes.provider.unsupportedChain?$.standardErrors.provider.unsupportedChain(e):$.standardErrors.provider.custom({message:n.errorMessage,code:n.errorCode});const i=n.result;i.isApproved&&i.rpcUrl.length>0&&this.updateProviderInfo(i.rpcUrl,e)}setAppInfo(e,r){this.initializeRelay().then(n=>n.setAppInfo(e,r))}async enable(){var e;return(e=this.diagnostic)===null||e===void 0||e.log(es.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::enable",addresses_length:this._addresses.length,sessionIdHash:this._relay?Qa.Session.hash(this._relay.session.id):void 0}),this._isAuthorized()?[...this._addresses]:await this.send(F.JSONRPCMethod.eth_requestAccounts)}async close(){(await this.initializeRelay()).resetAndReload()}send(e,r){try{const n=this._send(e,r);if(n instanceof Promise)return n.catch(i=>{throw(0,$.serializeError)(i,e)})}catch(n){throw(0,$.serializeError)(n,e)}}_send(e,r){if(typeof e=="string"){const i=e,s=Array.isArray(r)?r:r!==void 0?[r]:[],o={jsonrpc:"2.0",id:0,method:i,params:s};return this._sendRequestAsync(o).then(a=>a.result)}if(typeof r=="function"){const i=e,s=r;return this._sendAsync(i,s)}if(Array.isArray(e))return e.map(s=>this._sendRequest(s));const n=e;return this._sendRequest(n)}async sendAsync(e,r){try{return this._sendAsync(e,r).catch(n=>{throw(0,$.serializeError)(n,e)})}catch(n){return Promise.reject((0,$.serializeError)(n,e))}}async _sendAsync(e,r){if(typeof r!="function")throw new Error("callback is required");if(Array.isArray(e)){const i=r;this._sendMultipleRequestsAsync(e).then(s=>i(null,s)).catch(s=>i(s,null));return}const n=r;return this._sendRequestAsync(e).then(i=>n(null,i)).catch(i=>n(i,null))}async request(e){try{return this._request(e).catch(r=>{throw(0,$.serializeError)(r,e.method)})}catch(r){return Promise.reject((0,$.serializeError)(r,e.method))}}async _request(e){if(!e||typeof e!="object"||Array.isArray(e))throw $.standardErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:e});const{method:r,params:n}=e;if(typeof r!="string"||r.length===0)throw $.standardErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:e});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw $.standardErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:e});const i=n===void 0?[]:n,s=this._relayEventManager.makeRequestId();return(await this._sendRequestAsync({method:r,params:i,jsonrpc:"2.0",id:s})).result}async scanQRCode(e){var r;const i=await(await this.initializeRelay()).scanQRCode((0,A.ensureRegExpString)(e)).promise;if(typeof i.result!="string")throw(0,$.serializeError)((r=i.errorMessage)!==null&&r!==void 0?r:"result was not a string",ts.Web3Method.scanQRCode);return i.result}async genericRequest(e,r){var n;const s=await(await this.initializeRelay()).genericRequest(e,r).promise;if(typeof s.result!="string")throw(0,$.serializeError)((n=s.errorMessage)!==null&&n!==void 0?n:"result was not a string",ts.Web3Method.generic);return s.result}async selectProvider(e){var r;const i=await(await this.initializeRelay()).selectProvider(e).promise;if(typeof i.result!="string")throw(0,$.serializeError)((r=i.errorMessage)!==null&&r!==void 0?r:"result was not a string",ts.Web3Method.selectProvider);return i.result}supportsSubscriptions(){return!1}subscribe(){throw new Error("Subscriptions are not supported")}unsubscribe(){throw new Error("Subscriptions are not supported")}disconnect(){return!0}_sendRequest(e){const r={jsonrpc:"2.0",id:e.id},{method:n}=e;if(r.result=this._handleSynchronousMethods(e),r.result===void 0)throw new Error(`Coinbase Wallet does not support calling ${n} synchronously without a callback. Please provide a callback parameter to call ${n} asynchronously.`);return r}_setAddresses(e,r){if(!Array.isArray(e))throw new Error("addresses is not an array");const n=e.map(i=>(0,A.ensureAddressString)(i));JSON.stringify(n)!==JSON.stringify(this._addresses)&&(this._addresses=n,this.emit("accountsChanged",this._addresses),this._storage.setItem(Za.LOCAL_STORAGE_ADDRESSES_KEY,n.join(" ")))}_sendRequestAsync(e){return new Promise((r,n)=>{try{const i=this._handleSynchronousMethods(e);if(i!==void 0)return r({jsonrpc:"2.0",id:e.id,result:i});const s=this._handleAsynchronousFilterMethods(e);if(s!==void 0){s.then(a=>r(Object.assign(Object.assign({},a),{id:e.id}))).catch(a=>n(a));return}const o=this._handleSubscriptionMethods(e);if(o!==void 0){o.then(a=>r({jsonrpc:"2.0",id:e.id,result:a.result})).catch(a=>n(a));return}}catch(i){return n(i)}this._handleAsynchronousMethods(e).then(i=>i&&r(Object.assign(Object.assign({},i),{id:e.id}))).catch(i=>n(i))})}_sendMultipleRequestsAsync(e){return Promise.all(e.map(r=>this._sendRequestAsync(r)))}_handleSynchronousMethods(e){const{method:r}=e,n=e.params||[];switch(r){case F.JSONRPCMethod.eth_accounts:return this._eth_accounts();case F.JSONRPCMethod.eth_coinbase:return this._eth_coinbase();case F.JSONRPCMethod.eth_uninstallFilter:return this._eth_uninstallFilter(n);case F.JSONRPCMethod.net_version:return this._net_version();case F.JSONRPCMethod.eth_chainId:return this._eth_chainId();default:return}}async _handleAsynchronousMethods(e){const{method:r}=e,n=e.params||[];switch(r){case F.JSONRPCMethod.eth_requestAccounts:return this._eth_requestAccounts();case F.JSONRPCMethod.eth_sign:return this._eth_sign(n);case F.JSONRPCMethod.eth_ecRecover:return this._eth_ecRecover(n);case F.JSONRPCMethod.personal_sign:return this._personal_sign(n);case F.JSONRPCMethod.personal_ecRecover:return this._personal_ecRecover(n);case F.JSONRPCMethod.eth_signTransaction:return this._eth_signTransaction(n);case F.JSONRPCMethod.eth_sendRawTransaction:return this._eth_sendRawTransaction(n);case F.JSONRPCMethod.eth_sendTransaction:return this._eth_sendTransaction(n);case F.JSONRPCMethod.eth_signTypedData_v1:return this._eth_signTypedData_v1(n);case F.JSONRPCMethod.eth_signTypedData_v2:return this._throwUnsupportedMethodError();case F.JSONRPCMethod.eth_signTypedData_v3:return this._eth_signTypedData_v3(n);case F.JSONRPCMethod.eth_signTypedData_v4:case F.JSONRPCMethod.eth_signTypedData:return this._eth_signTypedData_v4(n);case F.JSONRPCMethod.cbWallet_arbitrary:return this._cbwallet_arbitrary(n);case F.JSONRPCMethod.wallet_addEthereumChain:return this._wallet_addEthereumChain(n);case F.JSONRPCMethod.wallet_switchEthereumChain:return this._wallet_switchEthereumChain(n);case F.JSONRPCMethod.wallet_watchAsset:return this._wallet_watchAsset(n)}return(await this.initializeRelay()).makeEthereumJSONRPCRequest(e,this.jsonRpcUrl)}_handleAsynchronousFilterMethods(e){const{method:r}=e,n=e.params||[];switch(r){case F.JSONRPCMethod.eth_newFilter:return this._eth_newFilter(n);case F.JSONRPCMethod.eth_newBlockFilter:return this._eth_newBlockFilter();case F.JSONRPCMethod.eth_newPendingTransactionFilter:return this._eth_newPendingTransactionFilter();case F.JSONRPCMethod.eth_getFilterChanges:return this._eth_getFilterChanges(n);case F.JSONRPCMethod.eth_getFilterLogs:return this._eth_getFilterLogs(n)}}_handleSubscriptionMethods(e){switch(e.method){case F.JSONRPCMethod.eth_subscribe:case F.JSONRPCMethod.eth_unsubscribe:return this._subscriptionManager.handleRequest(e)}}_isKnownAddress(e){try{const r=(0,A.ensureAddressString)(e);return this._addresses.map(i=>(0,A.ensureAddressString)(i)).includes(r)}catch{}return!1}_ensureKnownAddress(e){var r;if(!this._isKnownAddress(e))throw(r=this.diagnostic)===null||r===void 0||r.log(es.EVENTS.UNKNOWN_ADDRESS_ENCOUNTERED),new Error("Unknown Ethereum address")}_prepareTransactionParams(e){const r=e.from?(0,A.ensureAddressString)(e.from):this.selectedAddress;if(!r)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(r);const n=e.to?(0,A.ensureAddressString)(e.to):null,i=e.value!=null?(0,A.ensureBN)(e.value):new ev.default(0),s=e.data?(0,A.ensureBuffer)(e.data):Buffer.alloc(0),o=e.nonce!=null?(0,A.ensureIntNumber)(e.nonce):null,a=e.gasPrice!=null?(0,A.ensureBN)(e.gasPrice):null,u=e.maxFeePerGas!=null?(0,A.ensureBN)(e.maxFeePerGas):null,c=e.maxPriorityFeePerGas!=null?(0,A.ensureBN)(e.maxPriorityFeePerGas):null,l=e.gas!=null?(0,A.ensureBN)(e.gas):null,f=this.getChainId();return{fromAddress:r,toAddress:n,weiValue:i,data:s,nonce:o,gasPriceInWei:a,maxFeePerGas:u,maxPriorityFeePerGas:c,gasLimit:l,chainId:f}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized())throw $.standardErrors.provider.unauthorized({})}_throwUnsupportedMethodError(){throw $.standardErrors.provider.unsupportedMethod({})}async _signEthereumMessage(e,r,n,i){this._ensureKnownAddress(r);try{return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).signEthereumMessage(e,r,n,i).promise).result}}catch(s){throw typeof s.message=="string"&&s.message.match(/(denied|rejected)/i)?$.standardErrors.provider.userRejectedRequest("User denied message signature"):s}}async _ethereumAddressFromSignedMessage(e,r,n){return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).ethereumAddressFromSignedMessage(e,r,n).promise).result}}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,A.hexStringFromIntNumber)(this.getChainId())}getChainId(){const e=this._storage.getItem(Ya);if(!e)return(0,A.ensureIntNumber)(this._chainIdFromOpts);const r=parseInt(e,10);return(0,A.ensureIntNumber)(r)}async _eth_requestAccounts(){var e;if((e=this.diagnostic)===null||e===void 0||e.log(es.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::_eth_requestAccounts",addresses_length:this._addresses.length,sessionIdHash:this._relay?Qa.Session.hash(this._relay.session.id):void 0}),this._isAuthorized())return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses});let r;try{r=await(await this.initializeRelay()).requestEthereumAccounts().promise}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?$.standardErrors.provider.userRejectedRequest("User denied account authorization"):n}if(!r.result)throw new Error("accounts received is empty");return this._setAddresses(r.result),this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),{jsonrpc:"2.0",id:0,result:this._addresses}}_eth_sign(e){this._requireAuthorization();const r=(0,A.ensureAddressString)(e[0]),n=(0,A.ensureBuffer)(e[1]);return this._signEthereumMessage(n,r,!1)}_eth_ecRecover(e){const r=(0,A.ensureBuffer)(e[0]),n=(0,A.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(r,n,!1)}_personal_sign(e){this._requireAuthorization();const r=(0,A.ensureBuffer)(e[0]),n=(0,A.ensureAddressString)(e[1]);return this._signEthereumMessage(r,n,!0)}_personal_ecRecover(e){const r=(0,A.ensureBuffer)(e[0]),n=(0,A.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(r,n,!0)}async _eth_signTransaction(e){this._requireAuthorization();const r=this._prepareTransactionParams(e[0]||{});try{return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).signEthereumTransaction(r).promise).result}}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?$.standardErrors.provider.userRejectedRequest("User denied transaction signature"):n}}async _eth_sendRawTransaction(e){const r=(0,A.ensureBuffer)(e[0]);return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).submitEthereumTransaction(r,this.getChainId()).promise).result}}async _eth_sendTransaction(e){this._requireAuthorization();const r=this._prepareTransactionParams(e[0]||{});try{return{jsonrpc:"2.0",id:0,result:(await(await this.initializeRelay()).signAndSubmitEthereumTransaction(r).promise).result}}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?$.standardErrors.provider.userRejectedRequest("User denied transaction signature"):n}}async _eth_signTypedData_v1(e){this._requireAuthorization();const r=(0,A.ensureParsedJSONObject)(e[0]),n=(0,A.ensureAddressString)(e[1]);this._ensureKnownAddress(n);const i=rs.default.hashForSignTypedDataLegacy({data:r}),s=JSON.stringify(r,null,2);return this._signEthereumMessage(i,n,!1,s)}async _eth_signTypedData_v3(e){this._requireAuthorization();const r=(0,A.ensureAddressString)(e[0]),n=(0,A.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(r);const i=rs.default.hashForSignTypedData_v3({data:n}),s=JSON.stringify(n,null,2);return this._signEthereumMessage(i,r,!1,s)}async _eth_signTypedData_v4(e){this._requireAuthorization();const r=(0,A.ensureAddressString)(e[0]),n=(0,A.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(r);const i=rs.default.hashForSignTypedData_v4({data:n}),s=JSON.stringify(n,null,2);return this._signEthereumMessage(i,r,!1,s)}async _cbwallet_arbitrary(e){const r=e[0],n=e[1];if(typeof n!="string")throw new Error("parameter must be a string");if(typeof r!="object"||r===null)throw new Error("parameter must be an object");return{jsonrpc:"2.0",id:0,result:await this.genericRequest(r,n)}}async _wallet_addEthereumChain(e){var r,n,i,s;const o=e[0];if(((r=o.rpcUrls)===null||r===void 0?void 0:r.length)===0)return{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}};if(!o.chainName||o.chainName.trim()==="")throw $.standardErrors.rpc.invalidParams("chainName is a required field");if(!o.nativeCurrency)throw $.standardErrors.rpc.invalidParams("nativeCurrency is a required field");const a=parseInt(o.chainId,16);return await this.addEthereumChain(a,(n=o.rpcUrls)!==null&&n!==void 0?n:[],(i=o.blockExplorerUrls)!==null&&i!==void 0?i:[],o.chainName,(s=o.iconUrls)!==null&&s!==void 0?s:[],o.nativeCurrency)?{jsonrpc:"2.0",id:0,result:null}:{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}}}async _wallet_switchEthereumChain(e){const r=e[0];return await this.switchEthereumChain(parseInt(r.chainId,16)),{jsonrpc:"2.0",id:0,result:null}}async _wallet_watchAsset(e){const r=Array.isArray(e)?e[0]:e;if(!r.type)throw $.standardErrors.rpc.invalidParams("Type is required");if((r==null?void 0:r.type)!=="ERC20")throw $.standardErrors.rpc.invalidParams(`Asset of type '${r.type}' is not supported`);if(!(r!=null&&r.options))throw $.standardErrors.rpc.invalidParams("Options are required");if(!(r!=null&&r.options.address))throw $.standardErrors.rpc.invalidParams("Address is required");const n=this.getChainId(),{address:i,symbol:s,image:o,decimals:a}=r.options;return{jsonrpc:"2.0",id:0,result:await this.watchAsset(r.type,i,s,a,o,n)}}_eth_uninstallFilter(e){const r=(0,A.ensureHexString)(e[0]);return this._filterPolyfill.uninstallFilter(r)}async _eth_newFilter(e){const r=e[0];return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newFilter(r)}}async _eth_newBlockFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newBlockFilter()}}async _eth_newPendingTransactionFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newPendingTransactionFilter()}}_eth_getFilterChanges(e){const r=(0,A.ensureHexString)(e[0]);return this._filterPolyfill.getFilterChanges(r)}_eth_getFilterLogs(e){const r=(0,A.ensureHexString)(e[0]);return this._filterPolyfill.getFilterLogs(r)}initializeRelay(){return this._relay?Promise.resolve(this._relay):this._relayProvider().then(e=>(e.setAccountsCallback((r,n)=>this._setAddresses(r,n)),e.setChainCallback((r,n)=>{this.updateProviderInfo(n,parseInt(r,10))}),e.setDappDefaultChainCallback(this._chainIdFromOpts),this._relay=e,e))}}Yt.CoinbaseWalletProvider=iv;var li={},fi={},rn,R,ml,vl,Mt,Xa,_l,Es,wl,Fr={},Sl=[],sv=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,hi=Array.isArray;function et(t,e){for(var r in e)t[r]=e[r];return t}function El(t){var e=t.parentNode;e&&e.removeChild(t)}function Cs(t,e,r){var n,i,s,o={};for(s in e)s=="key"?n=e[s]:s=="ref"?i=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?rn.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)o[s]===void 0&&(o[s]=t.defaultProps[s]);return Nr(t,o,n,i,null)}function Nr(t,e,r,n,i){var s={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i??++ml,__i:-1,__u:0};return i==null&&R.vnode!=null&&R.vnode(s),s}function ov(){return{current:null}}function nn(t){return t.children}function Lr(t,e){this.props=t,this.context=e}function ir(t,e){if(e==null)return t.__?ir(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?ir(t):null}function Cl(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Cl(t)}}function ks(t){(!t.__d&&(t.__d=!0)&&Mt.push(t)&&!jn.__r++||Xa!==R.debounceRendering)&&((Xa=R.debounceRendering)||_l)(jn)}function jn(){var t,e,r,n,i,s,o,a,u;for(Mt.sort(Es);t=Mt.shift();)t.__d&&(e=Mt.length,n=void 0,s=(i=(r=t).__v).__e,a=[],u=[],(o=r.__P)&&((n=et({},i)).__v=i.__v+1,R.vnode&&R.vnode(n),vo(o,n,i,r.__n,o.ownerSVGElement!==void 0,32&i.__u?[s]:null,a,s??ir(i),!!(32&i.__u),u),n.__.__k[n.__i]=n,xl(a,n,u),n.__e!=s&&Cl(n)),Mt.length>e&&Mt.sort(Es));jn.__r=0}function kl(t,e,r,n,i,s,o,a,u,c,l){var f,h,d,p,v,y=n&&n.__k||Sl,b=e.length;for(r.__d=u,av(r,e,y),u=r.__d,f=0;f<b;f++)(d=r.__k[f])!=null&&typeof d!="boolean"&&typeof d!="function"&&(h=d.__i===-1?Fr:y[d.__i]||Fr,d.__i=f,vo(t,d,h,i,s,o,a,u,c,l),p=d.__e,d.ref&&h.ref!=d.ref&&(h.ref&&_o(h.ref,null,d),l.push(d.ref,d.__c||p,d)),v==null&&p!=null&&(v=p),65536&d.__u||h.__k===d.__k?u=Il(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:p&&(u=p.nextSibling),d.__d=void 0,d.__u&=-196609);r.__d=u,r.__e=v}function av(t,e,r){var n,i,s,o,a,u=e.length,c=r.length,l=c,f=0;for(t.__k=[],n=0;n<u;n++)(i=t.__k[n]=(i=e[n])==null||typeof i=="boolean"||typeof i=="function"?null:typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?Nr(null,i,null,null,i):hi(i)?Nr(nn,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?Nr(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)!=null?(i.__=t,i.__b=t.__b+1,a=cv(i,r,o=n+f,l),i.__i=a,s=null,a!==-1&&(l--,(s=r[a])&&(s.__u|=131072)),s==null||s.__v===null?(a==-1&&f--,typeof i.type!="function"&&(i.__u|=65536)):a!==o&&(a===o+1?f++:a>o?l>u-o?f+=a-o:f--:f=a<o&&a==o-1?a-o:0,a!==n+f&&(i.__u|=65536))):(s=r[n])&&s.key==null&&s.__e&&(s.__e==t.__d&&(t.__d=ir(s)),Is(s,s,!1),r[n]=null,l--);if(l)for(n=0;n<c;n++)(s=r[n])!=null&&!(131072&s.__u)&&(s.__e==t.__d&&(t.__d=ir(s)),Is(s,s))}function Il(t,e,r){var n,i;if(typeof t.type=="function"){for(n=t.__k,i=0;n&&i<n.length;i++)n[i]&&(n[i].__=t,e=Il(n[i],e,r));return e}return t.__e!=e&&(r.insertBefore(t.__e,e||null),e=t.__e),e&&e.nextSibling}function Ml(t,e){return e=e||[],t==null||typeof t=="boolean"||(hi(t)?t.some(function(r){Ml(r,e)}):e.push(t)),e}function cv(t,e,r,n){var i=t.key,s=t.type,o=r-1,a=r+1,u=e[r];if(u===null||u&&i==u.key&&s===u.type)return r;if(n>(u!=null&&!(131072&u.__u)?1:0))for(;o>=0||a<e.length;){if(o>=0){if((u=e[o])&&!(131072&u.__u)&&i==u.key&&s===u.type)return o;o--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&i==u.key&&s===u.type)return a;a++}}return-1}function ec(t,e,r){e[0]==="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||sv.test(e)?r:r+"px"}function _n(t,e,r,n,i){var s;e:if(e==="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||ec(t.style,e,"");if(r)for(e in r)n&&r[e]===n[e]||ec(t.style,e,r[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/(PointerCapture)$|Capture$/,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=r,r?n?r.u=n.u:(r.u=Date.now(),t.addEventListener(e,s?rc:tc,s)):t.removeEventListener(e,s?rc:tc,s);else{if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,r))}}function tc(t){var e=this.l[t.type+!1];if(t.t){if(t.t<=e.u)return}else t.t=Date.now();return e(R.event?R.event(t):t)}function rc(t){return this.l[t.type+!0](R.event?R.event(t):t)}function vo(t,e,r,n,i,s,o,a,u,c){var l,f,h,d,p,v,y,b,m,_,k,w,x,j,z,M=e.type;if(e.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),s=[a=e.__e=r.__e]),(l=R.__b)&&l(e);e:if(typeof M=="function")try{if(b=e.props,m=(l=M.contextType)&&n[l.__c],_=l?m?m.props.value:l.__:n,r.__c?y=(f=e.__c=r.__c).__=f.__E:("prototype"in M&&M.prototype.render?e.__c=f=new M(b,_):(e.__c=f=new Lr(b,_),f.constructor=M,f.render=lv),m&&m.sub(f),f.props=b,f.state||(f.state={}),f.context=_,f.__n=n,h=f.__d=!0,f.__h=[],f._sb=[]),f.__s==null&&(f.__s=f.state),M.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=et({},f.__s)),et(f.__s,M.getDerivedStateFromProps(b,f.__s))),d=f.props,p=f.state,f.__v=e,h)M.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(M.getDerivedStateFromProps==null&&b!==d&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(b,_),!f.__e&&(f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(b,f.__s,_)===!1||e.__v===r.__v)){for(e.__v!==r.__v&&(f.props=b,f.state=f.__s,f.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.forEach(function(L){L&&(L.__=e)}),k=0;k<f._sb.length;k++)f.__h.push(f._sb[k]);f._sb=[],f.__h.length&&o.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(b,f.__s,_),f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(d,p,v)})}if(f.context=_,f.props=b,f.__P=t,f.__e=!1,w=R.__r,x=0,"prototype"in M&&M.prototype.render){for(f.state=f.__s,f.__d=!1,w&&w(e),l=f.render(f.props,f.state,f.context),j=0;j<f._sb.length;j++)f.__h.push(f._sb[j]);f._sb=[]}else do f.__d=!1,w&&w(e),l=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++x<25);f.state=f.__s,f.getChildContext!=null&&(n=et(et({},n),f.getChildContext())),h||f.getSnapshotBeforeUpdate==null||(v=f.getSnapshotBeforeUpdate(d,p)),kl(t,hi(z=l!=null&&l.type===nn&&l.key==null?l.props.children:l)?z:[z],e,r,n,i,s,o,a,u,c),f.base=e.__e,e.__u&=-161,f.__h.length&&o.push(f),y&&(f.__E=f.__=null)}catch(L){e.__v=null,u||s!=null?(e.__e=a,e.__u|=u?160:32,s[s.indexOf(a)]=null):(e.__e=r.__e,e.__k=r.__k),R.__e(L,e,r)}else s==null&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=uv(r.__e,e,r,n,i,s,o,u,c);(l=R.diffed)&&l(e)}function xl(t,e,r){e.__d=void 0;for(var n=0;n<r.length;n++)_o(r[n],r[++n],r[++n]);R.__c&&R.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(s){s.call(i)})}catch(s){R.__e(s,i.__v)}})}function uv(t,e,r,n,i,s,o,a,u){var c,l,f,h,d,p,v,y=r.props,b=e.props,m=e.type;if(m==="svg"&&(i=!0),s!=null){for(c=0;c<s.length;c++)if((d=s[c])&&"setAttribute"in d==!!m&&(m?d.localName===m:d.nodeType===3)){t=d,s[c]=null;break}}if(t==null){if(m===null)return document.createTextNode(b);t=i?document.createElementNS("http://www.w3.org/2000/svg",m):document.createElement(m,b.is&&b),s=null,a=!1}if(m===null)y===b||a&&t.data===b||(t.data=b);else{if(s=s&&rn.call(t.childNodes),y=r.props||Fr,!a&&s!=null)for(y={},c=0;c<t.attributes.length;c++)y[(d=t.attributes[c]).name]=d.value;for(c in y)d=y[c],c=="children"||(c=="dangerouslySetInnerHTML"?f=d:c==="key"||c in b||_n(t,c,null,d,i));for(c in b)d=b[c],c=="children"?h=d:c=="dangerouslySetInnerHTML"?l=d:c=="value"?p=d:c=="checked"?v=d:c==="key"||a&&typeof d!="function"||y[c]===d||_n(t,c,d,y[c],i);if(l)a||f&&(l.__html===f.__html||l.__html===t.innerHTML)||(t.innerHTML=l.__html),e.__k=[];else if(f&&(t.innerHTML=""),kl(t,hi(h)?h:[h],e,r,n,i&&m!=="foreignObject",s,o,s?s[0]:r.__k&&ir(r,0),a,u),s!=null)for(c=s.length;c--;)s[c]!=null&&El(s[c]);a||(c="value",p!==void 0&&(p!==t[c]||m==="progress"&&!p||m==="option"&&p!==y[c])&&_n(t,c,p,y[c],!1),c="checked",v!==void 0&&v!==t[c]&&_n(t,c,v,y[c],!1))}return t}function _o(t,e,r){try{typeof t=="function"?t(e):t.current=e}catch(n){R.__e(n,r)}}function Is(t,e,r){var n,i;if(R.unmount&&R.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||_o(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){R.__e(s,e)}n.base=n.__P=null,t.__c=void 0}if(n=t.__k)for(i=0;i<n.length;i++)n[i]&&Is(n[i],e,r||typeof t.type!="function");r||t.__e==null||El(t.__e),t.__=t.__e=t.__d=void 0}function lv(t,e,r){return this.constructor(t,r)}function Rl(t,e,r){var n,i,s,o;R.__&&R.__(t,e),i=(n=typeof r=="function")?null:r&&r.__k||e.__k,s=[],o=[],vo(e,t=(!n&&r||e).__k=Cs(nn,null,[t]),i||Fr,Fr,e.ownerSVGElement!==void 0,!n&&r?[r]:i?null:e.firstChild?rn.call(e.childNodes):null,s,!n&&r?r:i?i.__e:e.firstChild,n,o),xl(s,t,o)}function Tl(t,e){Rl(t,e,Tl)}function fv(t,e,r){var n,i,s,o,a=et({},t.props);for(s in t.type&&t.type.defaultProps&&(o=t.type.defaultProps),e)s=="key"?n=e[s]:s=="ref"?i=e[s]:a[s]=e[s]===void 0&&o!==void 0?o[s]:e[s];return arguments.length>2&&(a.children=arguments.length>3?rn.call(arguments,2):r),Nr(t.type,a,n||t.key,i||t.ref,null)}function hv(t,e){var r={__c:e="__cC"+wl++,__:t,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,s;return this.getChildContext||(i=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.some(function(a){a.__e=!0,ks(a)})},this.sub=function(o){i.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){i.splice(i.indexOf(o),1),a&&a.call(o)}}),n.children}};return r.Provider.__=r.Consumer.contextType=r}rn=Sl.slice,R={__e:function(t,e,r,n){for(var i,s,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,n||{}),o=i.__d),o)return i.__E=i}catch(a){t=a}throw t}},ml=0,vl=function(t){return t!=null&&t.constructor==null},Lr.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=et({},this.state),typeof t=="function"&&(t=t(et({},r),this.props)),t&&et(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),ks(this))},Lr.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ks(this))},Lr.prototype.render=nn,Mt=[],_l=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Es=function(t,e){return t.__v.__b-e.__v.__b},jn.__r=0,wl=0;const dv=Object.freeze(Object.defineProperty({__proto__:null,Component:Lr,Fragment:nn,cloneElement:fv,createContext:hv,createElement:Cs,createRef:ov,h:Cs,hydrate:Tl,get isValidElement(){return vl},get options(){return R},render:Rl,toChildArray:Ml},Symbol.toStringTag,{value:"Module"})),Se=Lt(dv);function sr(t){return typeof t=="function"}var nc=!1,Ie={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;""+e.stack}nc=t},get useDeprecatedSynchronousErrorHandling(){return nc}};function Ut(t){setTimeout(function(){throw t},0)}var Dn={closed:!0,next:function(t){},error:function(t){if(Ie.useDeprecatedSynchronousErrorHandling)throw t;Ut(t)},complete:function(){}},pe=function(){return Array.isArray||function(t){return t&&typeof t.length=="number"}}();function wo(t){return t!==null&&typeof t=="object"}var pv=function(){function t(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(r,n){return n+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t}(),Pr=pv,J=function(){function t(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this,n=r._parentOrParents,i=r._ctorUnsubscribe,s=r._unsubscribe,o=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(n!==null)for(var a=0;a<n.length;++a){var u=n[a];u.remove(this)}if(sr(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(f){e=f instanceof Pr?ic(f.errors):[f]}}if(pe(o))for(var a=-1,c=o.length;++a<c;){var l=o[a];if(wo(l))try{l.unsubscribe()}catch(h){e=e||[],h instanceof Pr?e=e.concat(ic(h.errors)):e.push(h)}}if(e)throw new Pr(e)}},t.prototype.add=function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||typeof r.unsubscribe!="function")return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;r=new t,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=r._parentOrParents;if(i===null)r._parentOrParents=this;else if(i instanceof t){if(i===this)return r;r._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return r;var s=this._subscriptions;return s===null?this._subscriptions=[r]:s.push(r),r},t.prototype.remove=function(e){var r=this._subscriptions;if(r){var n=r.indexOf(e);n!==-1&&r.splice(n,1)}},t.EMPTY=function(e){return e.closed=!0,e}(new t),t}();function ic(t){return t.reduce(function(e,r){return e.concat(r instanceof Pr?r.errors:r)},[])}var Bn=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),C=function(t){g(e,t);function e(r,n,i){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=Dn;break;case 1:if(!r){s.destination=Dn;break}if(typeof r=="object"){r instanceof e?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new sc(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new sc(s,r,n,i);break}return s}return e.prototype[Bn]=function(){return this},e.create=function(r,n,i){var s=new e(r,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var r=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=r,this},e}(J),sc=function(t){g(e,t);function e(r,n,i,s){var o=t.call(this)||this;o._parentSubscriber=r;var a,u=o;return sr(n)?a=n:n&&(a=n.next,i=n.error,s=n.complete,n!==Dn&&(u=Object.create(n),sr(u.unsubscribe)&&o.add(u.unsubscribe.bind(u)),u.unsubscribe=o.unsubscribe.bind(o))),o._context=u,o._next=a,o._error=i,o._complete=s,o}return e.prototype.next=function(r){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!Ie.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,r):this.__tryOrSetError(n,this._next,r)&&this.unsubscribe()}},e.prototype.error=function(r){if(!this.isStopped){var n=this._parentSubscriber,i=Ie.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,r),this.unsubscribe()):(this.__tryOrSetError(n,this._error,r),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=r,n.syncErrorThrown=!0):Ut(r),this.unsubscribe();else{if(this.unsubscribe(),i)throw r;Ut(r)}}},e.prototype.complete=function(){var r=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return r._complete.call(r._context)};!Ie.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(r,n){try{r.call(this._context,n)}catch(i){if(this.unsubscribe(),Ie.useDeprecatedSynchronousErrorHandling)throw i;Ut(i)}},e.prototype.__tryOrSetError=function(r,n,i){if(!Ie.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(s){return Ie.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=s,r.syncErrorThrown=!0,!0):(Ut(s),!0)}return!1},e.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},e}(C);function So(t){for(;t;){var e=t,r=e.closed,n=e.destination,i=e.isStopped;if(r||i)return!1;n&&n instanceof C?t=n:t=null}return!0}function bv(t,e,r){if(t){if(t instanceof C)return t;if(t[Bn])return t[Bn]()}return!t&&!e&&!r?new C(Dn):new C(t,e,r)}var vr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function yt(t){return t}function Ms(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Al(t)}function Al(t){return t.length===0?yt:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var O=function(){function t(e){this._isScalar=!1,e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this.operator,s=bv(e,r,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||Ie.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),Ie.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){Ie.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=r),So(e)?e.error(r):console.warn(r)}},t.prototype.forEach=function(e,r){var n=this;return r=oc(r),new r(function(i,s){var o;o=n.subscribe(function(a){try{e(a)}catch(u){s(u),o&&o.unsubscribe()}},s,i)})},t.prototype._subscribe=function(e){var r=this.source;return r&&r.subscribe(e)},t.prototype[vr]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length===0?this:Al(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=oc(e),new e(function(n,i){var s;r.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},t.create=function(e){return new t(e)},t}();function oc(t){if(t||(t=Ie.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var gv=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),ht=gv,Ol=function(t){g(e,t);function e(r,n){var i=t.call(this)||this;return i.subject=r,i.subscriber=n,i.closed=!1,i}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var r=this.subject,n=r.observers;if(this.subject=null,!(!n||n.length===0||r.isStopped||r.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},e}(J),Nl=function(t){g(e,t);function e(r){var n=t.call(this,r)||this;return n.destination=r,n}return e}(C),ie=function(t){g(e,t);function e(){var r=t.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype[Bn]=function(){return new Nl(this)},e.prototype.lift=function(r){var n=new ac(this,this);return n.operator=r,n},e.prototype.next=function(r){if(this.closed)throw new ht;if(!this.isStopped)for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].next(r)},e.prototype.error=function(r){if(this.closed)throw new ht;this.hasError=!0,this.thrownError=r,this.isStopped=!0;for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].error(r);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new ht;this.isStopped=!0;for(var r=this.observers,n=r.length,i=r.slice(),s=0;s<n;s++)i[s].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(r){if(this.closed)throw new ht;return t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){if(this.closed)throw new ht;return this.hasError?(r.error(this.thrownError),J.EMPTY):this.isStopped?(r.complete(),J.EMPTY):(this.observers.push(r),new Ol(this,r))},e.prototype.asObservable=function(){var r=new O;return r.source=this,r},e.create=function(r,n){return new ac(r,n)},e}(O),ac=function(t){g(e,t);function e(r,n){var i=t.call(this)||this;return i.destination=r,i.source=n,i}return e.prototype.next=function(r){var n=this.destination;n&&n.next&&n.next(r)},e.prototype.error=function(r){var n=this.destination;n&&n.error&&this.destination.error(r)},e.prototype.complete=function(){var r=this.destination;r&&r.complete&&this.destination.complete()},e.prototype._subscribe=function(r){var n=this.source;return n?this.source.subscribe(r):J.EMPTY},e}(ie);function Eo(){return function(e){return e.lift(new yv(e))}}var yv=function(){function t(e){this.connectable=e}return t.prototype.call=function(e,r){var n=this.connectable;n._refCount++;var i=new mv(e,n),s=r.subscribe(i);return i.closed||(i.connection=n.connect()),s},t}(),mv=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.connectable=n,i}return e.prototype._unsubscribe=function(){var r=this.connectable;if(!r){this.connection=null;return}this.connectable=null;var n=r._refCount;if(n<=0){this.connection=null;return}if(r._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,s=r._connection;this.connection=null,s&&(!i||s===i)&&s.unsubscribe()},e}(C),Ll=function(t){g(e,t);function e(r,n){var i=t.call(this)||this;return i.source=r,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return e.prototype._subscribe=function(r){return this.getSubject().subscribe(r)},e.prototype.getSubject=function(){var r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var r=this._connection;return r||(this._isComplete=!1,r=this._connection=new J,r.add(this.source.subscribe(new _v(this.getSubject(),this))),r.closed&&(this._connection=null,r=J.EMPTY)),r},e.prototype.refCount=function(){return Eo()(this)},e}(O),vv=function(){var t=Ll.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),_v=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.connectable=n,i}return e.prototype._error=function(r){this._unsubscribe(),t.prototype._error.call(this,r)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var r=this.connectable;if(r){this.connectable=null;var n=r._connection;r._refCount=0,r._subject=null,r._connection=null,n&&n.unsubscribe()}},e}(Nl);function wv(t,e,r,n){return function(i){return i.lift(new Sv(t,e,r,n))}}var Sv=function(){function t(e,r,n,i){this.keySelector=e,this.elementSelector=r,this.durationSelector=n,this.subjectSelector=i}return t.prototype.call=function(e,r){return r.subscribe(new Ev(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),Ev=function(t){g(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;return a.keySelector=n,a.elementSelector=i,a.durationSelector=s,a.subjectSelector=o,a.groups=null,a.attemptedToUnsubscribe=!1,a.count=0,a}return e.prototype._next=function(r){var n;try{n=this.keySelector(r)}catch(i){this.error(i);return}this._group(r,n)},e.prototype._group=function(r,n){var i=this.groups;i||(i=this.groups=new Map);var s=i.get(n),o;if(this.elementSelector)try{o=this.elementSelector(r)}catch(c){this.error(c)}else o=r;if(!s){s=this.subjectSelector?this.subjectSelector():new ie,i.set(n,s);var a=new xs(n,s,this);if(this.destination.next(a),this.durationSelector){var u=void 0;try{u=this.durationSelector(new xs(n,s))}catch(c){this.error(c);return}this.add(u.subscribe(new Cv(n,s,this)))}}s.closed||s.next(o)},e.prototype._error=function(r){var n=this.groups;n&&(n.forEach(function(i,s){i.error(r)}),n.clear()),this.destination.error(r)},e.prototype._complete=function(){var r=this.groups;r&&(r.forEach(function(n,i){n.complete()}),r.clear()),this.destination.complete()},e.prototype.removeGroup=function(r){this.groups.delete(r)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&t.prototype.unsubscribe.call(this))},e}(C),Cv=function(t){g(e,t);function e(r,n,i){var s=t.call(this,n)||this;return s.key=r,s.group=n,s.parent=i,s}return e.prototype._next=function(r){this.complete()},e.prototype._unsubscribe=function(){var r=this,n=r.parent,i=r.key;this.key=this.parent=null,n&&n.removeGroup(i)},e}(C),xs=function(t){g(e,t);function e(r,n,i){var s=t.call(this)||this;return s.key=r,s.groupSubject=n,s.refCountSubscription=i,s}return e.prototype._subscribe=function(r){var n=new J,i=this,s=i.refCountSubscription,o=i.groupSubject;return s&&!s.closed&&n.add(new kv(s)),n.add(o.subscribe(r)),n},e}(O),kv=function(t){g(e,t);function e(r){var n=t.call(this)||this;return n.parent=r,r.count++,n}return e.prototype.unsubscribe=function(){var r=this.parent;!r.closed&&!this.closed&&(t.prototype.unsubscribe.call(this),r.count-=1,r.count===0&&r.attemptedToUnsubscribe&&r.unsubscribe())},e}(J),Pl=function(t){g(e,t);function e(r){var n=t.call(this)||this;return n._value=r,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(r){var n=t.prototype._subscribe.call(this,r);return n&&!n.closed&&r.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ht;return this._value},e.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},e}(ie),Iv=function(t){g(e,t);function e(r,n){return t.call(this)||this}return e.prototype.schedule=function(r,n){return this},e}(J),sn=function(t){g(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return e.prototype.schedule=function(r,n){if(n===void 0&&(n=0),this.closed)return this;this.state=r;var i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(s,this.id,n),this},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),setInterval(r.flush.bind(r,this),i)},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1)return n;clearInterval(n)},e.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,n){var i=!1,s=void 0;try{this.work(r)}catch(o){i=!0,s=!!o&&o||new Error(o)}if(i)return this.unsubscribe(),s},e.prototype._unsubscribe=function(){var r=this.id,n=this.scheduler,i=n.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,s!==-1&&i.splice(s,1),r!=null&&(this.id=this.recycleAsyncId(n,r,null)),this.delay=null},e}(Iv),Mv=function(t){g(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.schedule=function(r,n){return n===void 0&&(n=0),n>0?t.prototype.schedule.call(this,r,n):(this.delay=n,this.state=r,this.scheduler.flush(this),this)},e.prototype.execute=function(r,n){return n>0||this.closed?t.prototype.execute.call(this,r,n):this._execute(r,n)},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0?t.prototype.requestAsyncId.call(this,r,n,i):r.flush(this)},e}(sn),Rs=function(){function t(e,r){r===void 0&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(e,r,n){return r===void 0&&(r=0),new this.SchedulerAction(this,e).schedule(n,r)},t.now=function(){return Date.now()},t}(),on=function(t){g(e,t);function e(r,n){n===void 0&&(n=Rs.now);var i=t.call(this,r,function(){return e.delegate&&e.delegate!==i?e.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return e.prototype.schedule=function(r,n,i){return n===void 0&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(r,n,i):t.prototype.schedule.call(this,r,n,i)},e.prototype.flush=function(r){var n=this.actions;if(this.active){n.push(r);return}var i;this.active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this.active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},e}(Rs),xv=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(on),jl=new xv(Mv),Dl=jl,or=new O(function(t){return t.complete()});function _r(t){return t?Rv(t):or}function Rv(t){return new O(function(e){return t.schedule(function(){return e.complete()})})}function we(t){return t&&typeof t.schedule=="function"}var Bl=function(t){return function(e){for(var r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.complete()}};function Co(t,e){return new O(function(r){var n=new J,i=0;return n.add(e.schedule(function(){if(i===t.length){r.complete();return}r.next(t[i++]),r.closed||n.add(this.schedule())})),n})}function an(t,e){return e?Co(t,e):new O(Bl(t))}function di(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return we(r)?(t.pop(),Co(t,r)):an(t)}function ko(t,e){return e?new O(function(r){return e.schedule(Tv,0,{error:t,subscriber:r})}):new O(function(r){return r.error(t)})}function Tv(t){var e=t.error,r=t.subscriber;r.error(e)}var Ts;Ts||(Ts={});var tt=function(){function t(e,r,n){this.kind=e,this.value=r,this.error=n,this.hasValue=e==="N"}return t.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},t.prototype.do=function(e,r,n){var i=this.kind;switch(i){case"N":return e&&e(this.value);case"E":return r&&r(this.error);case"C":return n&&n()}},t.prototype.accept=function(e,r,n){return e&&typeof e.next=="function"?this.observe(e):this.do(e,r,n)},t.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return di(this.value);case"E":return ko(this.error);case"C":return _r()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return typeof e<"u"?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();function Av(t,e){return e===void 0&&(e=0),function(n){return n.lift(new Ov(t,e))}}var Ov=function(){function t(e,r){r===void 0&&(r=0),this.scheduler=e,this.delay=r}return t.prototype.call=function(e,r){return r.subscribe(new Fl(e,this.scheduler,this.delay))},t}(),Fl=function(t){g(e,t);function e(r,n,i){i===void 0&&(i=0);var s=t.call(this,r)||this;return s.scheduler=n,s.delay=i,s}return e.dispatch=function(r){var n=r.notification,i=r.destination;n.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(r){var n=this.destination;n.add(this.scheduler.schedule(e.dispatch,this.delay,new Nv(r,this.destination)))},e.prototype._next=function(r){this.scheduleMessage(tt.createNext(r))},e.prototype._error=function(r){this.scheduleMessage(tt.createError(r)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(tt.createComplete()),this.unsubscribe()},e}(C),Nv=function(){function t(e,r){this.notification=e,this.destination=r}return t}(),Io=function(t){g(e,t);function e(r,n,i){r===void 0&&(r=Number.POSITIVE_INFINITY),n===void 0&&(n=Number.POSITIVE_INFINITY);var s=t.call(this)||this;return s.scheduler=i,s._events=[],s._infiniteTimeWindow=!1,s._bufferSize=r<1?1:r,s._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(s._infiniteTimeWindow=!0,s.next=s.nextInfiniteTimeWindow):s.next=s.nextTimeWindow,s}return e.prototype.nextInfiniteTimeWindow=function(r){if(!this.isStopped){var n=this._events;n.push(r),n.length>this._bufferSize&&n.shift()}t.prototype.next.call(this,r)},e.prototype.nextTimeWindow=function(r){this.isStopped||(this._events.push(new Lv(this._getNow(),r)),this._trimBufferThenGetEvents()),t.prototype.next.call(this,r)},e.prototype._subscribe=function(r){var n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,o=i.length,a;if(this.closed)throw new ht;if(this.isStopped||this.hasError?a=J.EMPTY:(this.observers.push(r),a=new Ol(this,r)),s&&r.add(r=new Fl(r,s)),n)for(var u=0;u<o&&!r.closed;u++)r.next(i[u]);else for(var u=0;u<o&&!r.closed;u++)r.next(i[u].value);return this.hasError?r.error(this.thrownError):this.isStopped&&r.complete(),a},e.prototype._getNow=function(){return(this.scheduler||Dl).now()},e.prototype._trimBufferThenGetEvents=function(){for(var r=this._getNow(),n=this._bufferSize,i=this._windowTime,s=this._events,o=s.length,a=0;a<o&&!(r-s[a].time<i);)a++;return o>n&&(a=Math.max(a,o-n)),a>0&&s.splice(0,a),s},e}(ie),Lv=function(){function t(e,r){this.time=e,this.value=r}return t}(),wr=function(t){g(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.value=null,r.hasNext=!1,r.hasCompleted=!1,r}return e.prototype._subscribe=function(r){return this.hasError?(r.error(this.thrownError),J.EMPTY):this.hasCompleted&&this.hasNext?(r.next(this.value),r.complete(),J.EMPTY):t.prototype._subscribe.call(this,r)},e.prototype.next=function(r){this.hasCompleted||(this.value=r,this.hasNext=!0)},e.prototype.error=function(r){this.hasCompleted||t.prototype.error.call(this,r)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(ie),Pv=1,jv=function(){return Promise.resolve()}(),As={};function cc(t){return t in As?(delete As[t],!0):!1}var uc={setImmediate:function(t){var e=Pv++;return As[e]=!0,jv.then(function(){return cc(e)&&t()}),e},clearImmediate:function(t){cc(t)}},Dv=function(t){g(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0?t.prototype.requestAsyncId.call(this,r,n,i):(r.actions.push(this),r.scheduled||(r.scheduled=uc.setImmediate(r.flush.bind(r,null))))},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return t.prototype.recycleAsyncId.call(this,r,n,i);r.actions.length===0&&(uc.clearImmediate(n),r.scheduled=void 0)},e}(sn),Bv=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.flush=function(r){this.active=!0,this.scheduled=void 0;var n=this.actions,i,s=-1,o=n.length;r=r||n.shift();do if(i=r.execute(r.state,r.delay))break;while(++s<o&&(r=n.shift()));if(this.active=!1,i){for(;++s<o&&(r=n.shift());)r.unsubscribe();throw i}},e}(on),$l=new Bv(Dv),Mn=$l,Vl=new on(sn),be=Vl,Fv=function(t){g(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0?t.prototype.requestAsyncId.call(this,r,n,i):(r.actions.push(this),r.scheduled||(r.scheduled=requestAnimationFrame(function(){return r.flush(null)})))},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return t.prototype.recycleAsyncId.call(this,r,n,i);r.actions.length===0&&(cancelAnimationFrame(n),r.scheduled=void 0)},e}(sn),$v=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.flush=function(r){this.active=!0,this.scheduled=void 0;var n=this.actions,i,s=-1,o=n.length;r=r||n.shift();do if(i=r.execute(r.state,r.delay))break;while(++s<o&&(r=n.shift()));if(this.active=!1,i){for(;++s<o&&(r=n.shift());)r.unsubscribe();throw i}},e}(on),Wl=new $v(Fv),Vv=Wl,Wv=function(t){g(e,t);function e(r,n){r===void 0&&(r=Hl),n===void 0&&(n=Number.POSITIVE_INFINITY);var i=t.call(this,r,function(){return i.frame})||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return e.prototype.flush=function(){for(var r=this,n=r.actions,i=r.maxFrames,s,o;(o=n[0])&&o.delay<=i&&(n.shift(),this.frame=o.delay,!(s=o.execute(o.state,o.delay))););if(s){for(;o=n.shift();)o.unsubscribe();throw s}},e.frameTimeFactor=10,e}(on),Hl=function(t){g(e,t);function e(r,n,i){i===void 0&&(i=r.index+=1);var s=t.call(this,r,n)||this;return s.scheduler=r,s.work=n,s.index=i,s.active=!0,s.index=r.index=i,s}return e.prototype.schedule=function(r,n){if(n===void 0&&(n=0),!this.id)return t.prototype.schedule.call(this,r,n);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(r,n)},e.prototype.requestAsyncId=function(r,n,i){i===void 0&&(i=0),this.delay=r.frame+i;var s=r.actions;return s.push(this),s.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(r,n,i){},e.prototype._execute=function(r,n){if(this.active===!0)return t.prototype._execute.call(this,r,n)},e.sortActions=function(r,n){return r.delay===n.delay?r.index===n.index?0:r.index>n.index?1:-1:r.delay>n.delay?1:-1},e}(sn);function ze(){}function Hv(t){return!!t&&(t instanceof O||typeof t.lift=="function"&&typeof t.subscribe=="function")}var zv=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),ar=zv,Uv=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),cn=Uv,qv=function(){function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t}(),zl=qv;function Oe(t,e){return function(n){if(typeof t!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Jv(t,e))}}var Jv=function(){function t(e,r){this.project=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new Gv(e,this.project,this.thisArg))},t}(),Gv=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.project=n,s.count=0,s.thisArg=i||s,s}return e.prototype._next=function(r){var n;try{n=this.project.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(C);function Ul(t,e,r){if(e)if(we(e))r=e;else return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Ul(t,r).apply(void 0,n).pipe(Oe(function(s){return pe(s)?e.apply(void 0,s):e(s)}))};return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=this,o,a={context:s,subject:o,callbackFunc:t,scheduler:r};return new O(function(u){if(r){var l={args:n,subscriber:u,params:a};return r.schedule(Qv,0,l)}else{if(!o){o=new wr;var c=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];o.next(f.length<=1?f[0]:f),o.complete()};try{t.apply(s,n.concat([c]))}catch(f){So(o)?o.error(f):console.warn(f)}}return o.subscribe(u)}})}}function Qv(t){var e=this,r=t.args,n=t.subscriber,i=t.params,s=i.callbackFunc,o=i.context,a=i.scheduler,u=i.subject;if(!u){u=i.subject=new wr;var c=function(){for(var l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];var h=l.length<=1?l[0]:l;e.add(a.schedule(Zv,0,{value:h,subject:u}))};try{s.apply(o,r.concat([c]))}catch(l){u.error(l)}}this.add(u.subscribe(n))}function Zv(t){var e=t.value,r=t.subject;r.next(e),r.complete()}function ql(t,e,r){if(e)if(we(e))r=e;else return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return ql(t,r).apply(void 0,n).pipe(Oe(function(s){return pe(s)?e.apply(void 0,s):e(s)}))};return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s={subject:void 0,args:n,callbackFunc:t,scheduler:r,context:this};return new O(function(o){var a=s.context,u=s.subject;if(r)return r.schedule(Yv,0,{params:s,subscriber:o,context:a});if(!u){u=s.subject=new wr;var c=function(){for(var l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];var h=l.shift();if(h){u.error(h);return}u.next(l.length<=1?l[0]:l),u.complete()};try{t.apply(a,n.concat([c]))}catch(l){So(u)?u.error(l):console.warn(l)}}return u.subscribe(o)})}}function Yv(t){var e=this,r=t.params,n=t.subscriber,i=t.context,s=r.callbackFunc,o=r.args,a=r.scheduler,u=r.subject;if(!u){u=r.subject=new wr;var c=function(){for(var l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];var h=l.shift();if(h)e.add(a.schedule(lc,0,{err:h,subject:u}));else{var d=l.length<=1?l[0]:l;e.add(a.schedule(Kv,0,{value:d,subject:u}))}};try{s.apply(i,o.concat([c]))}catch(l){this.add(a.schedule(lc,0,{err:l,subject:u}))}}this.add(u.subscribe(n))}function Kv(t){var e=t.value,r=t.subject;r.next(e),r.complete()}function lc(t){var e=t.err,r=t.subject;r.error(e)}var Ft=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(r,n,i,s,o){this.destination.next(n)},e.prototype.notifyError=function(r,n){this.destination.error(r)},e.prototype.notifyComplete=function(r){this.destination.complete()},e}(C),Xv=function(t){g(e,t);function e(r,n,i){var s=t.call(this)||this;return s.parent=r,s.outerValue=n,s.outerIndex=i,s.index=0,s}return e.prototype._next=function(r){this.parent.notifyNext(this.outerValue,r,this.outerIndex,this.index++,this)},e.prototype._error=function(r){this.parent.notifyError(r,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(C),e1=function(t){return function(e){return t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,Ut),e}};function t1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var mt=t1(),r1=function(t){return function(e){var r=t[mt]();do{var n=void 0;try{n=r.next()}catch(i){return e.error(i),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}while(!0);return typeof r.return=="function"&&e.add(function(){r.return&&r.return()}),e}},n1=function(t){return function(e){var r=t[vr]();if(typeof r.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(e)}},Jl=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Gl(t){return!!t&&typeof t.subscribe!="function"&&typeof t.then=="function"}var $r=function(t){if(t&&typeof t[vr]=="function")return n1(t);if(Jl(t))return Bl(t);if(Gl(t))return e1(t);if(t&&typeof t[mt]=="function")return r1(t);var e=wo(t)?"an invalid object":"'"+t+"'",r="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(r)};function rt(t,e,r,n,i){if(i===void 0&&(i=new Xv(t,r,n)),!i.closed)return e instanceof O?e.subscribe(i):$r(e)(i)}var fc={};function i1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=void 0,n=void 0;return we(t[t.length-1])&&(n=t.pop()),typeof t[t.length-1]=="function"&&(r=t.pop()),t.length===1&&pe(t[0])&&(t=t[0]),an(t,n).lift(new Mo(r))}var Mo=function(){function t(e){this.resultSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new s1(e,this.resultSelector))},t}(),s1=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return e.prototype._next=function(r){this.values.push(fc),this.observables.push(r)},e.prototype._complete=function(){var r=this.observables,n=r.length;if(n===0)this.destination.complete();else{this.active=n,this.toRespond=n;for(var i=0;i<n;i++){var s=r[i];this.add(rt(this,s,void 0,i))}}},e.prototype.notifyComplete=function(r){(this.active-=1)===0&&this.destination.complete()},e.prototype.notifyNext=function(r,n,i){var s=this.values,o=s[i],a=this.toRespond?o===fc?--this.toRespond:this.toRespond:0;s[i]=n,a===0&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))},e.prototype._tryResultSelector=function(r){var n;try{n=this.resultSelector.apply(this,r)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(Ft);function o1(t,e){return new O(function(r){var n=new J;return n.add(e.schedule(function(){var i=t[vr]();n.add(i.subscribe({next:function(s){n.add(e.schedule(function(){return r.next(s)}))},error:function(s){n.add(e.schedule(function(){return r.error(s)}))},complete:function(){n.add(e.schedule(function(){return r.complete()}))}}))})),n})}function a1(t,e){return new O(function(r){var n=new J;return n.add(e.schedule(function(){return t.then(function(i){n.add(e.schedule(function(){r.next(i),n.add(e.schedule(function(){return r.complete()}))}))},function(i){n.add(e.schedule(function(){return r.error(i)}))})})),n})}function c1(t,e){if(!t)throw new Error("Iterable cannot be null");return new O(function(r){var n=new J,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(e.schedule(function(){i=t[mt](),n.add(e.schedule(function(){if(!r.closed){var s,o;try{var a=i.next();s=a.value,o=a.done}catch(u){r.error(u);return}o?r.complete():(r.next(s),this.schedule())}}))})),n})}function u1(t){return t&&typeof t[vr]=="function"}function l1(t){return t&&typeof t[mt]=="function"}function Ql(t,e){if(t!=null){if(u1(t))return o1(t,e);if(Gl(t))return a1(t,e);if(Jl(t))return Co(t,e);if(l1(t)||typeof t=="string")return c1(t,e)}throw new TypeError((t!==null&&typeof t||t)+" is not observable")}function st(t,e){return e?Ql(t,e):t instanceof O?t:new O($r(t))}var G=function(t){g(e,t);function e(r){var n=t.call(this)||this;return n.parent=r,n}return e.prototype._next=function(r){this.parent.notifyNext(r)},e.prototype._error=function(r){this.parent.notifyError(r),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(C),Q=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyError=function(r){this.destination.error(r)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(C);function Z(t,e){if(!e.closed){if(t instanceof O)return t.subscribe(e);var r;try{r=$r(t)(e)}catch(n){e.error(n)}return r}}function Ot(t,e,r){return r===void 0&&(r=Number.POSITIVE_INFINITY),typeof e=="function"?function(n){return n.pipe(Ot(function(i,s){return st(t(i,s)).pipe(Oe(function(o,a){return e(i,o,s,a)}))},r))}:(typeof e=="number"&&(r=e),function(n){return n.lift(new f1(t,r))})}var f1=function(){function t(e,r){r===void 0&&(r=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=r}return t.prototype.call=function(e,r){return r.subscribe(new h1(e,this.project,this.concurrent))},t}(),h1=function(t){g(e,t);function e(r,n,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var s=t.call(this,r)||this;return s.project=n,s.concurrent=i,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return e.prototype._next=function(r){this.active<this.concurrent?this._tryNext(r):this.buffer.push(r)},e.prototype._tryNext=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this.active++,this._innerSub(n)},e.prototype._innerSub=function(r){var n=new G(this),i=this.destination;i.add(n);var s=Z(r,n);s!==n&&i.add(s)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r.length>0?this._next(r.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},e}(Q),d1=Ot;function xo(t){return t===void 0&&(t=Number.POSITIVE_INFINITY),Ot(yt,t)}function Zl(){return xo(1)}function Vr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Zl()(di.apply(void 0,t))}function Ro(t){return new O(function(e){var r;try{r=t()}catch(i){e.error(i);return}var n=r?st(r):_r();return n.subscribe(e)})}function p1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length===1){var r=t[0];if(pe(r))return wn(r,null);if(wo(r)&&Object.getPrototypeOf(r)===Object.prototype){var n=Object.keys(r);return wn(n.map(function(s){return r[s]}),n)}}if(typeof t[t.length-1]=="function"){var i=t.pop();return t=t.length===1&&pe(t[0])?t[0]:t,wn(t,null).pipe(Oe(function(s){return i.apply(void 0,s)}))}return wn(t,null)}function wn(t,e){return new O(function(r){var n=t.length;if(n===0){r.complete();return}for(var i=new Array(n),s=0,o=0,a=function(c){var l=st(t[c]),f=!1;r.add(l.subscribe({next:function(h){f||(f=!0,o++),i[c]=h},error:function(h){return r.error(h)},complete:function(){s++,(s===n||!f)&&(o===n&&r.next(e?e.reduce(function(h,d,p){return h[d]=i[p],h},{}):i),r.complete())}}))},u=0;u<n;u++)a(u)})}function Yl(t,e,r,n){return sr(r)&&(n=r,r=void 0),n?Yl(t,e,r).pipe(Oe(function(i){return pe(i)?n.apply(void 0,i):n(i)})):new O(function(i){function s(o){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(o)}Kl(t,e,s,i,r)})}function Kl(t,e,r,n,i){var s;if(y1(t)){var o=t;t.addEventListener(e,r,i),s=function(){return o.removeEventListener(e,r,i)}}else if(g1(t)){var a=t;t.on(e,r),s=function(){return a.off(e,r)}}else if(b1(t)){var u=t;t.addListener(e,r),s=function(){return u.removeListener(e,r)}}else if(t&&t.length)for(var c=0,l=t.length;c<l;c++)Kl(t[c],e,r,n,i);else throw new TypeError("Invalid event target");n.add(s)}function b1(t){return t&&typeof t.addListener=="function"&&typeof t.removeListener=="function"}function g1(t){return t&&typeof t.on=="function"&&typeof t.off=="function"}function y1(t){return t&&typeof t.addEventListener=="function"&&typeof t.removeEventListener=="function"}function Xl(t,e,r){return r?Xl(t,e).pipe(Oe(function(n){return pe(n)?r.apply(void 0,n):r(n)})):new O(function(n){var i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return n.next(o.length===1?o[0]:o)},s;try{s=t(i)}catch(o){n.error(o);return}if(sr(e))return function(){return e(i,s)}})}function m1(t,e,r,n,i){var s,o;if(arguments.length==1){var a=t;o=a.initialState,e=a.condition,r=a.iterate,s=a.resultSelector||yt,i=a.scheduler}else n===void 0||we(n)?(o=t,s=yt,i=n):(o=t,s=n);return new O(function(u){var c=o;if(i)return i.schedule(v1,0,{subscriber:u,iterate:r,condition:e,resultSelector:s,state:c});do{if(e){var l=void 0;try{l=e(c)}catch(h){u.error(h);return}if(!l){u.complete();break}}var f=void 0;try{f=s(c)}catch(h){u.error(h);return}if(u.next(f),u.closed)break;try{c=r(c)}catch(h){u.error(h);return}}while(!0)})}function v1(t){var e=t.subscriber,r=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(s){e.error(s);return}else t.needIterate=!0;if(r){var n=void 0;try{n=r(t.state)}catch(s){e.error(s);return}if(!n){e.complete();return}if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(s){e.error(s);return}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}function _1(t,e,r){return e===void 0&&(e=or),r===void 0&&(r=or),Ro(function(){return t()?e:r})}function cr(t){return!pe(t)&&t-parseFloat(t)+1>=0}function w1(t,e){return t===void 0&&(t=0),e===void 0&&(e=be),(!cr(t)||t<0)&&(t=0),(!e||typeof e.schedule!="function")&&(e=be),new O(function(r){return r.add(e.schedule(S1,t,{subscriber:r,counter:0,period:t})),r})}function S1(t){var e=t.subscriber,r=t.counter,n=t.period;e.next(r),this.schedule({subscriber:e,counter:r+1,period:n},n)}function ef(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return we(i)?(n=t.pop(),t.length>1&&typeof t[t.length-1]=="number"&&(r=t.pop())):typeof i=="number"&&(r=t.pop()),n===null&&t.length===1&&t[0]instanceof O?t[0]:xo(r)(an(t,n))}var tf=new O(ze);function E1(){return tf}function Os(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length===0)return or;var r=t[0],n=t.slice(1);return t.length===1&&pe(r)?Os.apply(void 0,r):new O(function(i){var s=function(){return i.add(Os.apply(void 0,n).subscribe(i))};return st(r).subscribe({next:function(o){i.next(o)},error:s,complete:s})})}function C1(t,e){return e?new O(function(r){var n=Object.keys(t),i=new J;return i.add(e.schedule(k1,0,{keys:n,index:0,subscriber:r,subscription:i,obj:t})),i}):new O(function(r){for(var n=Object.keys(t),i=0;i<n.length&&!r.closed;i++){var s=n[i];t.hasOwnProperty(s)&&r.next([s,t[s]])}r.complete()})}function k1(t){var e=t.keys,r=t.index,n=t.subscriber,i=t.subscription,s=t.obj;if(!n.closed)if(r<e.length){var o=e[r];n.next([o,s[o]]),i.add(this.schedule({keys:e,index:r+1,subscriber:n,subscription:i,obj:s}))}else n.complete()}function rf(t,e){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=t,r.thisArg=e,r}function vt(t,e){return function(n){return n.lift(new I1(t,e))}}var I1=function(){function t(e,r){this.predicate=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new M1(e,this.predicate,this.thisArg))},t}(),M1=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.thisArg=i,s.count=0,s}return e.prototype._next=function(r){var n;try{n=this.predicate.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}n&&this.destination.next(r)},e}(C);function x1(t,e,r){return[vt(e,r)(new O($r(t))),vt(rf(e,r))(new O($r(t)))]}function nf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length===1)if(pe(t[0]))t=t[0];else return t[0];return an(t,void 0).lift(new R1)}var R1=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new T1(e))},t}(),T1=function(t){g(e,t);function e(r){var n=t.call(this,r)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return e.prototype._next=function(r){this.observables.push(r)},e.prototype._complete=function(){var r=this.observables,n=r.length;if(n===0)this.destination.complete();else{for(var i=0;i<n&&!this.hasFirst;i++){var s=r[i],o=rt(this,s,void 0,i);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}},e.prototype.notifyNext=function(r,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var s=0;s<this.subscriptions.length;s++)if(s!==i){var o=this.subscriptions[s];o.unsubscribe(),this.remove(o)}this.subscriptions=null}this.destination.next(n)},e}(Ft);function A1(t,e,r){return t===void 0&&(t=0),new O(function(n){e===void 0&&(e=t,t=0);var i=0,s=t;if(r)return r.schedule(O1,0,{index:i,count:e,start:t,subscriber:n});do{if(i++>=e){n.complete();break}if(n.next(s++),n.closed)break}while(!0)})}function O1(t){var e=t.start,r=t.index,n=t.count,i=t.subscriber;if(r>=n){i.complete();return}i.next(e),!i.closed&&(t.index=r+1,t.start=e+1,this.schedule(t))}function sf(t,e,r){t===void 0&&(t=0);var n=-1;return cr(e)?n=Number(e)<1&&1||Number(e):we(e)&&(r=e),we(r)||(r=be),new O(function(i){var s=cr(t)?t:+t-r.now();return r.schedule(N1,s,{index:0,period:n,subscriber:i})})}function N1(t){var e=t.index,r=t.period,n=t.subscriber;if(n.next(e),!n.closed){if(r===-1)return n.complete();t.index=e+1,this.schedule(t,r)}}function L1(t,e){return new O(function(r){var n;try{n=t()}catch(a){r.error(a);return}var i;try{i=e(n)}catch(a){r.error(a);return}var s=i?st(i):or,o=s.subscribe(r);return function(){o.unsubscribe(),n&&n.unsubscribe()}})}function of(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return typeof r=="function"&&t.pop(),an(t,void 0).lift(new af(r))}var af=function(){function t(e){this.resultSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new P1(e,this.resultSelector))},t}(),P1=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.resultSelector=n,s.iterators=[],s.active=0,s.resultSelector=typeof n=="function"?n:void 0,s}return e.prototype._next=function(r){var n=this.iterators;pe(r)?n.push(new D1(r)):typeof r[mt]=="function"?n.push(new j1(r[mt]())):n.push(new B1(this.destination,this,r))},e.prototype._complete=function(){var r=this.iterators,n=r.length;if(this.unsubscribe(),n===0){this.destination.complete();return}this.active=n;for(var i=0;i<n;i++){var s=r[i];if(s.stillUnsubscribed){var o=this.destination;o.add(s.subscribe())}else this.active--}},e.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},e.prototype.checkIterators=function(){for(var r=this.iterators,n=r.length,i=this.destination,s=0;s<n;s++){var o=r[s];if(typeof o.hasValue=="function"&&!o.hasValue())return}for(var a=!1,u=[],s=0;s<n;s++){var o=r[s],c=o.next();if(o.hasCompleted()&&(a=!0),c.done){i.complete();return}u.push(c.value)}this.resultSelector?this._tryresultSelector(u):i.next(u),a&&i.complete()},e.prototype._tryresultSelector=function(r){var n;try{n=this.resultSelector.apply(this,r)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(C),j1=function(){function t(e){this.iterator=e,this.nextResult=e.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},t.prototype.hasCompleted=function(){var e=this.nextResult;return!!(e&&e.done)},t}(),D1=function(){function t(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return t.prototype[mt]=function(){return this},t.prototype.next=function(e){var r=this.index++,n=this.array;return r<this.length?{value:n[r],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),B1=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.parent=n,s.observable=i,s.stillUnsubscribed=!0,s.buffer=[],s.isComplete=!1,s}return e.prototype[mt]=function(){return this},e.prototype.next=function(){var r=this.buffer;return r.length===0&&this.isComplete?{value:null,done:!0}:{value:r.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(r){this.buffer.push(r),this.parent.checkIterators()},e.prototype.subscribe=function(){return Z(this.observable,new G(this))},e}(Q);const F1=Object.freeze(Object.defineProperty({__proto__:null,ArgumentOutOfRangeError:ar,AsyncSubject:wr,BehaviorSubject:Pl,ConnectableObservable:Ll,EMPTY:or,EmptyError:cn,GroupedObservable:xs,NEVER:tf,Notification:tt,get NotificationKind(){return Ts},ObjectUnsubscribedError:ht,Observable:O,ReplaySubject:Io,Scheduler:Rs,Subject:ie,Subscriber:C,Subscription:J,TimeoutError:zl,UnsubscriptionError:Pr,VirtualAction:Hl,VirtualTimeScheduler:Wv,animationFrame:Vv,animationFrameScheduler:Wl,asap:Mn,asapScheduler:$l,async:be,asyncScheduler:Vl,bindCallback:Ul,bindNodeCallback:ql,combineLatest:i1,concat:Vr,config:Ie,defer:Ro,empty:_r,forkJoin:p1,from:st,fromEvent:Yl,fromEventPattern:Xl,generate:m1,identity:yt,iif:_1,interval:w1,isObservable:Hv,merge:ef,never:E1,noop:ze,observable:vr,of:di,onErrorResumeNext:Os,pairs:C1,partition:x1,pipe:Ms,queue:Dl,queueScheduler:jl,race:nf,range:A1,scheduled:Ql,throwError:ko,timer:sf,using:L1,zip:of},Symbol.toStringTag,{value:"Module"})),pi=Lt(F1);var bi={};function cf(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=cf(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function hc(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=cf(t))&&(n&&(n+=" "),n+=e);return n}const $1=Object.freeze(Object.defineProperty({__proto__:null,clsx:hc,default:hc},Symbol.toStringTag,{value:"Module"})),gi=Lt($1);var nt,V,ns,dc,ur=0,uf=[],xn=[],pc=R.__b,bc=R.__r,gc=R.diffed,yc=R.__c,mc=R.unmount;function $t(t,e){R.__h&&R.__h(V,t,ur||e),ur=0;var r=V.__H||(V.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({__V:xn}),r.__[t]}function lf(t){return ur=1,ff(df,t)}function ff(t,e,r){var n=$t(nt++,2);if(n.t=t,!n.__c&&(n.__=[r?r(e):df(void 0,e),function(a){var u=n.__N?n.__N[0]:n.__[0],c=n.t(u,a);u!==c&&(n.__N=[c,n.__[1]],n.__c.setState({}))}],n.__c=V,!V.u)){var i=function(a,u,c){if(!n.__c.__H)return!0;var l=n.__c.__H.__.filter(function(h){return h.__c});if(l.every(function(h){return!h.__N}))return!s||s.call(this,a,u,c);var f=!1;return l.forEach(function(h){if(h.__N){var d=h.__[0];h.__=h.__N,h.__N=void 0,d!==h.__[0]&&(f=!0)}}),!(!f&&n.__c.props===a)&&(!s||s.call(this,a,u,c))};V.u=!0;var s=V.shouldComponentUpdate,o=V.componentWillUpdate;V.componentWillUpdate=function(a,u,c){if(this.__e){var l=s;s=void 0,i(a,u,c),s=l}o&&o.call(this,a,u,c)},V.shouldComponentUpdate=i}return n.__N||n.__}function V1(t,e){var r=$t(nt++,3);!R.__s&&Ao(r.__H,e)&&(r.__=t,r.i=e,V.__H.__h.push(r))}function hf(t,e){var r=$t(nt++,4);!R.__s&&Ao(r.__H,e)&&(r.__=t,r.i=e,V.__h.push(r))}function W1(t){return ur=5,To(function(){return{current:t}},[])}function H1(t,e,r){ur=6,hf(function(){return typeof t=="function"?(t(e()),function(){return t(null)}):t?(t.current=e(),function(){return t.current=null}):void 0},r==null?r:r.concat(t))}function To(t,e){var r=$t(nt++,7);return Ao(r.__H,e)?(r.__V=t(),r.i=e,r.__h=t,r.__V):r.__}function z1(t,e){return ur=8,To(function(){return t},e)}function U1(t){var e=V.context[t.__c],r=$t(nt++,9);return r.c=t,e?(r.__==null&&(r.__=!0,e.sub(V)),e.props.value):t.__}function q1(t,e){R.useDebugValue&&R.useDebugValue(e?e(t):t)}function J1(t){var e=$t(nt++,10),r=lf();return e.__=t,V.componentDidCatch||(V.componentDidCatch=function(n,i){e.__&&e.__(n,i),r[1](n)}),[r[0],function(){r[1](void 0)}]}function G1(){var t=$t(nt++,11);if(!t.__){for(var e=V.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var r=e.__m||(e.__m=[0,0]);t.__="P"+r[0]+"-"+r[1]++}return t.__}function Q1(){for(var t;t=uf.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Rn),t.__H.__h.forEach(Ns),t.__H.__h=[]}catch(e){t.__H.__h=[],R.__e(e,t.__v)}}R.__b=function(t){V=null,pc&&pc(t)},R.__r=function(t){bc&&bc(t),nt=0;var e=(V=t.__c).__H;e&&(ns===V?(e.__h=[],V.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.__V=xn,r.__N=r.i=void 0})):(e.__h.forEach(Rn),e.__h.forEach(Ns),e.__h=[],nt=0)),ns=V},R.diffed=function(t){gc&&gc(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(uf.push(e)!==1&&dc===R.requestAnimationFrame||((dc=R.requestAnimationFrame)||Z1)(Q1)),e.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.__V!==xn&&(r.__=r.__V),r.i=void 0,r.__V=xn})),ns=V=null},R.__c=function(t,e){e.some(function(r){try{r.__h.forEach(Rn),r.__h=r.__h.filter(function(n){return!n.__||Ns(n)})}catch(n){e.some(function(i){i.__h&&(i.__h=[])}),e=[],R.__e(n,r.__v)}}),yc&&yc(t,e)},R.unmount=function(t){mc&&mc(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{Rn(n)}catch(i){e=i}}),r.__H=void 0,e&&R.__e(e,r.__v))};var vc=typeof requestAnimationFrame=="function";function Z1(t){var e,r=function(){clearTimeout(n),vc&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,100);vc&&(e=requestAnimationFrame(r))}function Rn(t){var e=V,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),V=e}function Ns(t){var e=V;t.__c=t.__(),V=e}function Ao(t,e){return!t||t.length!==e.length||e.some(function(r,n){return r!==t[n]})}function df(t,e){return typeof e=="function"?e(t):e}const Y1=Object.freeze(Object.defineProperty({__proto__:null,useCallback:z1,useContext:U1,useDebugValue:q1,useEffect:V1,useErrorBoundary:J1,useId:G1,useImperativeHandle:H1,useLayoutEffect:hf,useMemo:To,useReducer:ff,useRef:W1,useState:lf},Symbol.toStringTag,{value:"Module"})),un=Lt(Y1);var Qe={},yi={};Object.defineProperty(yi,"__esModule",{value:!0});yi.CloseIcon=void 0;const _c=Se;function K1(t){return(0,_c.h)("svg",Object.assign({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),(0,_c.h)("path",{d:"M13.7677 13L12.3535 14.4142L18.3535 20.4142L12.3535 26.4142L13.7677 27.8284L19.7677 21.8284L25.7677 27.8284L27.1819 26.4142L21.1819 20.4142L27.1819 14.4142L25.7677 13L19.7677 19L13.7677 13Z"}))}yi.CloseIcon=K1;var Oo={};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMTQiIGZpbGw9IiMwMDUyRkYiLz48cGF0aCBkPSJNMTQuMDM3IDE4LjkyNmMtMi43NSAwLTQuOTA3LTIuMjA1LTQuOTA3LTQuOTI2IDAtMi43MiAyLjIzLTQuOTI2IDQuOTA3LTQuOTI2YTQuODY2IDQuODY2IDAgMCAxIDQuODMzIDQuMTE4aDQuOTgyYy0uNDQ2LTUuMDczLTQuNjg0LTkuMDQ0LTkuODE1LTkuMDQ0QzguNjEgNC4xNDggNC4xNDkgOC41NiA0LjE0OSAxNHM0LjM4NyA5Ljg1MiA5Ljg5IDkuODUyYzUuMjA0IDAgOS4zNjgtMy45NyA5LjgxNC05LjA0M0gxOC44N2E0Ljg2NiA0Ljg2NiAwIDAgMS00LjgzMyA0LjExN1oiIGZpbGw9IiNmZmYiLz48L3N2Zz4=";var No={};Object.defineProperty(No,"__esModule",{value:!0});No.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMTQiIGZpbGw9IiMwMDUyRkYiLz48cGF0aCBkPSJNMjMuODUyIDE0QTkuODM0IDkuODM0IDAgMCAxIDE0IDIzLjg1MiA5LjgzNCA5LjgzNCAwIDAgMSA0LjE0OCAxNCA5LjgzNCA5LjgzNCAwIDAgMSAxNCA0LjE0OCA5LjgzNCA5LjgzNCAwIDAgMSAyMy44NTIgMTRaIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTExLjE4NSAxMi41MDRjMC0uNDU2IDAtLjcxLjA5OC0uODYyLjA5OC0uMTUyLjE5Ni0uMzA0LjM0My0uMzU1LjE5Ni0uMTAyLjM5Mi0uMTAyLjg4MS0uMTAyaDIuOTg2Yy40OSAwIC42ODYgMCAuODgyLjEwMi4xNDYuMTAxLjI5My4yMDMuMzQyLjM1NS4wOTguMjAzLjA5OC40MDYuMDk4Ljg2MnYyLjk5MmMwIC40NTcgMCAuNzEtLjA5OC44NjMtLjA5OC4xNTItLjE5NS4zMDQtLjM0Mi4zNTUtLjE5Ni4xMDEtLjM5Mi4xMDEtLjg4Mi4xMDFoLTIuOTg2Yy0uNDkgMC0uNjg1IDAtLjg4LS4xMDEtLjE0OC0uMTAyLS4yOTUtLjIwMy0uMzQ0LS4zNTUtLjA5OC0uMjAzLS4wOTgtLjQwNi0uMDk4LS44NjN2LTIuOTkyWiIgZmlsbD0iIzAwNTJGRiIvPjwvc3ZnPg==";var mi={};Object.defineProperty(mi,"__esModule",{value:!0});mi.QRCodeIcon=void 0;const We=Se;function X1(t){return(0,We.h)("svg",Object.assign({width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},t),(0,We.h)("path",{d:"M8.2271 1.77124L7.0271 1.77124V2.97124H8.2271V1.77124Z"}),(0,We.h)("path",{d:"M5.44922 0.199219L5.44922 4.54922L9.79922 4.54922V0.199219L5.44922 0.199219ZM8.89922 3.64922L6.34922 3.64922L6.34922 1.09922L8.89922 1.09922V3.64922Z"}),(0,We.h)("path",{d:"M2.97124 1.77124L1.77124 1.77124L1.77124 2.97124H2.97124V1.77124Z"}),(0,We.h)("path",{d:"M0.199219 4.54922L4.54922 4.54922L4.54922 0.199219L0.199219 0.199219L0.199219 4.54922ZM1.09922 1.09922L3.64922 1.09922L3.64922 3.64922L1.09922 3.64922L1.09922 1.09922Z"}),(0,We.h)("path",{d:"M2.97124 7.0271H1.77124L1.77124 8.2271H2.97124V7.0271Z"}),(0,We.h)("path",{d:"M0.199219 9.79922H4.54922L4.54922 5.44922L0.199219 5.44922L0.199219 9.79922ZM1.09922 6.34922L3.64922 6.34922L3.64922 8.89922H1.09922L1.09922 6.34922Z"}),(0,We.h)("path",{d:"M8.89922 7.39912H7.99922V5.40112H5.44922L5.44922 9.79912H6.34922L6.34922 6.30112H7.09922V8.29912H9.79922V5.40112H8.89922V7.39912Z"}),(0,We.h)("path",{d:"M7.99912 8.89917H7.09912V9.79917H7.99912V8.89917Z"}),(0,We.h)("path",{d:"M9.79917 8.89917H8.89917V9.79917H9.79917V8.89917Z"}))}mi.QRCodeIcon=X1;var Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});const e_=`
    <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M50 100C77.6142 100 100 77.6142 100 50C100 22.3858 77.6142 0 50 0C22.3858 0 0 22.3858 0 50C0 77.6142 22.3858 100 50 100Z" fill="white"/>
        <path d="M50.512 94C74.2907 94 93.5673 74.5244 93.5673 50.5C93.5673 26.4756 74.2907 7 50.512 7C26.7332 7 7.45667 26.4756 7.45667 50.5C7.45667 74.5244 26.7332 94 50.512 94Z" fill="#0052FF"/>
        <path d="M50.6248 65.4335C42.3697 65.4335 35.8996 58.7469 35.8996 50.5C35.8996 42.2531 42.5928 35.5664 50.6248 35.5664C57.9873 35.5664 64.0111 40.9157 65.1267 48.0481H80.0749C78.7363 32.6688 66.0191 20.6328 50.6248 20.6328C34.3379 20.6328 20.9514 34.0062 20.9514 50.5C20.9514 66.9936 34.1148 80.3671 50.6248 80.3671C66.2422 80.3671 78.7363 68.331 80.0749 52.9516H65.1267C64.0111 60.0841 57.9873 65.4335 50.6248 65.4335Z" fill="white"/>
    </svg>
`;Lo.default=e_;var Po={};Object.defineProperty(Po,"__esModule",{value:!0});Po.default=`
    <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="50" fill="white"/>
        <circle cx="49.9996" cy="49.9996" r="43.6363" fill="#1B53E4"/>
        <circle cx="49.9996" cy="49.9996" r="43.6363" stroke="white"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M19.3379 49.9484C19.3379 66.8508 33.04 80.553 49.9425 80.553C66.8449 80.553 80.5471 66.8508 80.5471 49.9484C80.5471 33.0459 66.8449 19.3438 49.9425 19.3438C33.04 19.3438 19.3379 33.0459 19.3379 49.9484ZM44.0817 40.0799C41.8725 40.0799 40.0817 41.8708 40.0817 44.0799V55.8029C40.0817 58.012 41.8725 59.8029 44.0817 59.8029H55.8046C58.0138 59.8029 59.8046 58.012 59.8046 55.8029V44.0799C59.8046 41.8708 58.0138 40.0799 55.8046 40.0799H44.0817Z" fill="white"/>
    </svg>
`;var vi={};Object.defineProperty(vi,"__esModule",{value:!0});vi.StatusDotIcon=void 0;const wc=Se;function t_(t){return(0,wc.h)("svg",Object.assign({width:"10",height:"10",viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},t),(0,wc.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.29995 4.99995C2.29995 5.57985 1.82985 6.04995 1.24995 6.04995C0.670052 6.04995 0.199951 5.57985 0.199951 4.99995C0.199951 4.42005 0.670052 3.94995 1.24995 3.94995C1.82985 3.94995 2.29995 4.42005 2.29995 4.99995ZM4.99995 6.04995C5.57985 6.04995 6.04995 5.57985 6.04995 4.99995C6.04995 4.42005 5.57985 3.94995 4.99995 3.94995C4.42005 3.94995 3.94995 4.42005 3.94995 4.99995C3.94995 5.57985 4.42005 6.04995 4.99995 6.04995ZM8.74995 6.04995C9.32985 6.04995 9.79995 5.57985 9.79995 4.99995C9.79995 4.42005 9.32985 3.94995 8.74995 3.94995C8.17005 3.94995 7.69995 4.42005 7.69995 4.99995C7.69995 5.57985 8.17005 6.04995 8.74995 6.04995Z"}))}vi.StatusDotIcon=t_;var _i={};function pf(t){this.mode=ve.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,r=this.data.length;e<r;e++){var n=[],i=this.data.charCodeAt(e);i>65536?(n[0]=240|(i&1835008)>>>18,n[1]=128|(i&258048)>>>12,n[2]=128|(i&4032)>>>6,n[3]=128|i&63):i>2048?(n[0]=224|(i&61440)>>>12,n[1]=128|(i&4032)>>>6,n[2]=128|i&63):i>128?(n[0]=192|(i&1984)>>>6,n[1]=128|i&63):n[0]=i,this.parsedData.push(n)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}pf.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,r=this.parsedData.length;e<r;e++)t.put(this.parsedData[e],8)}};function Ze(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}Ze.prototype={addData:function(t){var e=new pf(t);this.dataList.push(e),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=Ze.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(var n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[t+r][e+n]=!0:this.modules[t+r][e+n]=!1)},getBestMaskPattern:function(){for(var t=0,e=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=U.getLostPoint(this);(r==0||t>n)&&(t=n,e=r)}return e},createMovieClip:function(t,e,r){var n=t.createEmptyMovieClip(e,r),i=1;this.make();for(var s=0;s<this.modules.length;s++)for(var o=s*i,a=0;a<this.modules[s].length;a++){var u=a*i,c=this.modules[s][a];c&&(n.beginFill(0,100),n.moveTo(u,o),n.lineTo(u+i,o),n.lineTo(u+i,o+i),n.lineTo(u,o+i),n.endFill())}return n},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=U.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var n=t[e],i=t[r];if(this.modules[n][i]==null)for(var s=-2;s<=2;s++)for(var o=-2;o<=2;o++)s==-2||s==2||o==-2||o==2||s==0&&o==0?this.modules[n+s][i+o]=!0:this.modules[n+s][i+o]=!1}},setupTypeNumber:function(t){for(var e=U.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,n=U.getBCHTypeInfo(r),i=0;i<15;i++){var s=!t&&(n>>i&1)==1;i<6?this.modules[i][8]=s:i<8?this.modules[i+1][8]=s:this.modules[this.moduleCount-15+i][8]=s}for(var i=0;i<15;i++){var s=!t&&(n>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=s:i<9?this.modules[8][15-i-1+1]=s:this.modules[8][15-i-1]=s}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,n=this.moduleCount-1,i=7,s=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var a=0;a<2;a++)if(this.modules[n][o-a]==null){var u=!1;s<t.length&&(u=(t[s]>>>i&1)==1);var c=U.getMask(e,n,o-a);c&&(u=!u),this.modules[n][o-a]=u,i--,i==-1&&(s++,i=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}}};Ze.PAD0=236;Ze.PAD1=17;Ze.createData=function(t,e,r){for(var n=qe.getRSBlocks(t,e),i=new bf,s=0;s<r.length;s++){var o=r[s];i.put(o.mode,4),i.put(o.getLength(),U.getLengthInBits(o.mode,t)),o.write(i)}for(var a=0,s=0;s<n.length;s++)a+=n[s].dataCount;if(i.getLengthInBits()>a*8)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+a*8+")");for(i.getLengthInBits()+4<=a*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=a*8||(i.put(Ze.PAD0,8),i.getLengthInBits()>=a*8));)i.put(Ze.PAD1,8);return Ze.createBytes(i,n)};Ze.createBytes=function(t,e){for(var r=0,n=0,i=0,s=new Array(e.length),o=new Array(e.length),a=0;a<e.length;a++){var u=e[a].dataCount,c=e[a].totalCount-u;n=Math.max(n,u),i=Math.max(i,c),s[a]=new Array(u);for(var l=0;l<s[a].length;l++)s[a][l]=255&t.buffer[l+r];r+=u;var f=U.getErrorCorrectPolynomial(c),h=new Zt(s[a],f.getLength()-1),d=h.mod(f);o[a]=new Array(f.getLength()-1);for(var l=0;l<o[a].length;l++){var p=l+d.getLength()-o[a].length;o[a][l]=p>=0?d.get(p):0}}for(var v=0,l=0;l<e.length;l++)v+=e[l].totalCount;for(var y=new Array(v),b=0,l=0;l<n;l++)for(var a=0;a<e.length;a++)l<s[a].length&&(y[b++]=s[a][l]);for(var l=0;l<i;l++)for(var a=0;a<e.length;a++)l<o[a].length&&(y[b++]=o[a][l]);return y};var ve={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},pt={L:1,M:0,Q:3,H:2},at={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},U={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;U.getBCHDigit(e)-U.getBCHDigit(U.G15)>=0;)e^=U.G15<<U.getBCHDigit(e)-U.getBCHDigit(U.G15);return(t<<10|e)^U.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;U.getBCHDigit(e)-U.getBCHDigit(U.G18)>=0;)e^=U.G18<<U.getBCHDigit(e)-U.getBCHDigit(U.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;t!=0;)e++,t>>>=1;return e},getPatternPosition:function(t){return U.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case at.PATTERN000:return(e+r)%2==0;case at.PATTERN001:return e%2==0;case at.PATTERN010:return r%3==0;case at.PATTERN011:return(e+r)%3==0;case at.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case at.PATTERN101:return e*r%2+e*r%3==0;case at.PATTERN110:return(e*r%2+e*r%3)%2==0;case at.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new Zt([1],0),r=0;r<t;r++)e=e.multiply(new Zt([1,ne.gexp(r)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case ve.MODE_NUMBER:return 10;case ve.MODE_ALPHA_NUM:return 9;case ve.MODE_8BIT_BYTE:return 8;case ve.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case ve.MODE_NUMBER:return 12;case ve.MODE_ALPHA_NUM:return 11;case ve.MODE_8BIT_BYTE:return 16;case ve.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else if(e<41)switch(t){case ve.MODE_NUMBER:return 14;case ve.MODE_ALPHA_NUM:return 13;case ve.MODE_8BIT_BYTE:return 16;case ve.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}else throw new Error("type:"+e)},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n++)for(var i=0;i<e;i++){for(var s=0,o=t.isDark(n,i),a=-1;a<=1;a++)if(!(n+a<0||e<=n+a))for(var u=-1;u<=1;u++)i+u<0||e<=i+u||a==0&&u==0||o==t.isDark(n+a,i+u)&&s++;s>5&&(r+=3+s-5)}for(var n=0;n<e-1;n++)for(var i=0;i<e-1;i++){var c=0;t.isDark(n,i)&&c++,t.isDark(n+1,i)&&c++,t.isDark(n,i+1)&&c++,t.isDark(n+1,i+1)&&c++,(c==0||c==4)&&(r+=3)}for(var n=0;n<e;n++)for(var i=0;i<e-6;i++)t.isDark(n,i)&&!t.isDark(n,i+1)&&t.isDark(n,i+2)&&t.isDark(n,i+3)&&t.isDark(n,i+4)&&!t.isDark(n,i+5)&&t.isDark(n,i+6)&&(r+=40);for(var i=0;i<e;i++)for(var n=0;n<e-6;n++)t.isDark(n,i)&&!t.isDark(n+1,i)&&t.isDark(n+2,i)&&t.isDark(n+3,i)&&t.isDark(n+4,i)&&!t.isDark(n+5,i)&&t.isDark(n+6,i)&&(r+=40);for(var l=0,i=0;i<e;i++)for(var n=0;n<e;n++)t.isDark(n,i)&&l++;var f=Math.abs(100*l/e/e-50)/5;return r+=f*10,r}},ne={glog:function(t){if(t<1)throw new Error("glog("+t+")");return ne.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return ne.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var oe=0;oe<8;oe++)ne.EXP_TABLE[oe]=1<<oe;for(var oe=8;oe<256;oe++)ne.EXP_TABLE[oe]=ne.EXP_TABLE[oe-4]^ne.EXP_TABLE[oe-5]^ne.EXP_TABLE[oe-6]^ne.EXP_TABLE[oe-8];for(var oe=0;oe<255;oe++)ne.LOG_TABLE[ne.EXP_TABLE[oe]]=oe;function Zt(t,e){if(t.length==null)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&t[r]==0;)r++;this.num=new Array(t.length-r+e);for(var n=0;n<t.length-r;n++)this.num[n]=t[n+r]}Zt.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<t.getLength();n++)e[r+n]^=ne.gexp(ne.glog(this.get(r))+ne.glog(t.get(n)));return new Zt(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=ne.glog(this.get(0))-ne.glog(t.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<t.getLength();n++)r[n]^=ne.gexp(ne.glog(t.get(n))+e);return new Zt(r,0).mod(t)}};function qe(t,e){this.totalCount=t,this.dataCount=e}qe.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];qe.getRSBlocks=function(t,e){var r=qe.getRsBlockTable(t,e);if(r==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var n=r.length/3,i=[],s=0;s<n;s++)for(var o=r[s*3+0],a=r[s*3+1],u=r[s*3+2],c=0;c<o;c++)i.push(new qe(a,u));return i};qe.getRsBlockTable=function(t,e){switch(e){case pt.L:return qe.RS_BLOCK_TABLE[(t-1)*4+0];case pt.M:return qe.RS_BLOCK_TABLE[(t-1)*4+1];case pt.Q:return qe.RS_BLOCK_TABLE[(t-1)*4+2];case pt.H:return qe.RS_BLOCK_TABLE[(t-1)*4+3];default:return}};function bf(){this.buffer=[],this.length=0}bf.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1},put:function(t,e){for(var r=0;r<e;r++)this.putBit((t>>>e-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var is=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function gf(t){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M",image:{svg:"",width:0,height:0}},typeof t=="string"&&(t={content:t}),t)for(var e in t)this.options[e]=t[e];if(typeof this.options.content!="string")throw new Error("Expected 'content' as string!");if(this.options.content.length===0)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0)||!(this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");function r(u){switch(u){case"L":return pt.L;case"M":return pt.M;case"Q":return pt.Q;case"H":return pt.H;default:throw new Error("Unknwon error correction level: "+u)}}function n(u,c){for(var l=i(u),f=1,h=0,d=0,p=is.length;d<=p;d++){var v=is[d];if(!v)throw new Error("Content too long: expected "+h+" but got "+l);switch(c){case"L":h=v[0];break;case"M":h=v[1];break;case"Q":h=v[2];break;case"H":h=v[3];break;default:throw new Error("Unknwon error correction level: "+c)}if(l<=h)break;f++}if(f>is.length)throw new Error("Content too long");return f}function i(u){var c=encodeURI(u).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return c.length+(c.length!=u?3:0)}var s=this.options.content,o=n(s,this.options.ecl),a=r(this.options.ecl);this.qrcode=new Ze(o,a),this.qrcode.addData(s),this.qrcode.make()}gf.prototype.svg=function(t){var e=this.options||{},r=this.qrcode.modules;typeof t>"u"&&(t={container:e.container||"svg"});for(var n=typeof e.pretty<"u"?!!e.pretty:!0,i=n?"  ":"",s=n?`\r
`:"",o=e.width,a=e.height,u=r.length,c=o/(u+2*e.padding),l=a/(u+2*e.padding),f=typeof e.join<"u"?!!e.join:!1,h=typeof e.swap<"u"?!!e.swap:!1,d=typeof e.xmlDeclaration<"u"?!!e.xmlDeclaration:!0,p=typeof e.predefined<"u"?!!e.predefined:!1,v=p?i+'<defs><path id="qrmodule" d="M0 0 h'+l+" v"+c+' H0 z" style="fill:'+e.color+';shape-rendering:crispEdges;" /></defs>'+s:"",y=i+'<rect x="0" y="0" width="'+o+'" height="'+a+'" style="fill:'+e.background+';shape-rendering:crispEdges;"/>'+s,b="",m="",_=0;_<u;_++)for(var k=0;k<u;k++){var w=r[k][_];if(w){var x=k*c+e.padding*c,j=_*l+e.padding*l;if(h){var z=x;x=j,j=z}if(f){var M=c+x,L=l+j;x=Number.isInteger(x)?Number(x):x.toFixed(2),j=Number.isInteger(j)?Number(j):j.toFixed(2),M=Number.isInteger(M)?Number(M):M.toFixed(2),L=Number.isInteger(L)?Number(L):L.toFixed(2),m+="M"+x+","+j+" V"+L+" H"+M+" V"+j+" H"+x+" Z "}else p?b+=i+'<use x="'+x.toString()+'" y="'+j.toString()+'" href="#qrmodule" />'+s:b+=i+'<rect x="'+x.toString()+'" y="'+j.toString()+'" width="'+c+'" height="'+l+'" style="fill:'+e.color+';shape-rendering:crispEdges;"/>'+s}}f&&(b=i+'<path x="0" y="0" style="fill:'+e.color+';shape-rendering:crispEdges;" d="'+m+'" />');let te="";if(this.options.image!==void 0&&this.options.image.svg){const ge=o*this.options.image.width/100,Ne=a*this.options.image.height/100,ot=o/2-ge/2,Fe=a/2-Ne/2;te+=`<svg x="${ot}" y="${Fe}" width="${ge}" height="${Ne}" viewBox="0 0 100 100" preserveAspectRatio="xMinYMin meet">`,te+=this.options.image.svg+s,te+="</svg>"}var B="";switch(t.container){case"svg":d&&(B+='<?xml version="1.0" standalone="yes"?>'+s),B+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+o+'" height="'+a+'">'+s,B+=v+y+b,B+=te,B+="</svg>";break;case"svg-viewbox":d&&(B+='<?xml version="1.0" standalone="yes"?>'+s),B+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+o+" "+a+'">'+s,B+=v+y+b,B+=te,B+="</svg>";break;case"g":B+='<g width="'+o+'" height="'+a+'">'+s,B+=v+y+b,B+=te,B+="</g>";break;default:B+=(v+y+b+te).replace(/^\s+/,"");break}return B};var r_=gf,n_=E&&E.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_i,"__esModule",{value:!0});_i.QRCode=void 0;const i_=Se,Sc=un,s_=n_(r_),o_=t=>{const[e,r]=(0,Sc.useState)("");return(0,Sc.useEffect)(()=>{var n,i;const s=new s_.default({content:t.content,background:t.bgColor||"#ffffff",color:t.fgColor||"#000000",container:"svg",ecl:"M",width:(n=t.width)!==null&&n!==void 0?n:256,height:(i=t.height)!==null&&i!==void 0?i:256,padding:0,image:t.image}),o=Buffer.from(s.svg(),"utf8").toString("base64");r(`data:image/svg+xml;base64,${o}`)}),e?(0,i_.h)("img",{src:e,alt:"QR Code"}):null};_i.QRCode=o_;var wi={},jo={};Object.defineProperty(jo,"__esModule",{value:!0});jo.default=".-cbwsdk-css-reset .-cbwsdk-spinner{display:inline-block}.-cbwsdk-css-reset .-cbwsdk-spinner svg{display:inline-block;animation:2s linear infinite -cbwsdk-spinner-svg}.-cbwsdk-css-reset .-cbwsdk-spinner svg circle{animation:1.9s ease-in-out infinite both -cbwsdk-spinner-circle;display:block;fill:rgba(0,0,0,0);stroke-dasharray:283;stroke-dashoffset:280;stroke-linecap:round;stroke-width:10px;transform-origin:50% 50%}@keyframes -cbwsdk-spinner-svg{0%{transform:rotateZ(0deg)}100%{transform:rotateZ(360deg)}}@keyframes -cbwsdk-spinner-circle{0%,25%{stroke-dashoffset:280;transform:rotate(0)}50%,75%{stroke-dashoffset:75;transform:rotate(45deg)}100%{stroke-dashoffset:280;transform:rotate(360deg)}}";var a_=E&&E.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wi,"__esModule",{value:!0});wi.Spinner=void 0;const Sn=Se,c_=a_(jo),u_=t=>{var e;const r=(e=t.size)!==null&&e!==void 0?e:64,n=t.color||"#000";return(0,Sn.h)("div",{class:"-cbwsdk-spinner"},(0,Sn.h)("style",null,c_.default),(0,Sn.h)("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{width:r,height:r}},(0,Sn.h)("circle",{style:{cx:50,cy:50,r:45,stroke:n}})))};wi.Spinner=u_;var Do={};Object.defineProperty(Do,"__esModule",{value:!0});Do.default=".-cbwsdk-css-reset .-cbwsdk-connect-content{height:430px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-connect-content.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-header{display:flex;align-items:center;justify-content:space-between;margin:0 0 30px}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading{font-style:normal;font-weight:500;font-size:28px;line-height:36px;margin:0}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-layout{display:flex;flex-direction:row}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-left{margin-right:30px;display:flex;flex-direction:column;justify-content:space-between}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-right{flex:25%;margin-right:34px}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-wrapper{width:220px;height:220px;border-radius:12px;display:flex;justify-content:center;align-items:center;background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light{background-color:rgba(255,255,255,.95)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light>p{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark{background-color:rgba(10,11,13,.9)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark>p{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting>p{font-size:12px;font-weight:bold;margin-top:16px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app{border-radius:8px;font-size:14px;line-height:20px;padding:12px;width:339px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.light{background:#eef0f3;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.dark{background:#1e2025;color:#8a919e}.-cbwsdk-css-reset .-cbwsdk-cancel-button{-webkit-appearance:none;border:none;background:none;cursor:pointer;padding:0;margin:0}.-cbwsdk-css-reset .-cbwsdk-cancel-button-x{position:relative;display:block;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-wallet-steps{padding:0 0 0 16px;margin:0;width:100%;list-style:decimal}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item{list-style-type:decimal;display:list-item;font-style:normal;font-weight:400;font-size:16px;line-height:24px;margin-top:20px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item-wrapper{display:flex;align-items:center}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-pad-left{margin-left:6px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon{display:flex;border-radius:50%;height:24px;width:24px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.light{background:#0052ff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.dark{background:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item{align-items:center;display:flex;flex-direction:row;padding:16px 24px;gap:12px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-connect-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-item.light.selected{background:#f5f8ff;color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark.selected{background:#001033;color:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item.selected{border-radius:100px;font-weight:600}.-cbwsdk-css-reset .-cbwsdk-connect-item-copy-wrapper{margin:0 4px 0 8px}.-cbwsdk-css-reset .-cbwsdk-connect-item-title{margin:0 0 0;font-size:16px;line-height:24px;font-weight:500}.-cbwsdk-css-reset .-cbwsdk-connect-item-description{font-weight:400;font-size:14px;line-height:20px;margin:0}";var Sr=E&&E.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.CoinbaseAppSteps=Qe.CoinbaseWalletSteps=Qe.ConnectItem=Qe.ConnectContent=void 0;const xe=Sr(gi),I=Se,Ec=un,l_=S,f_=dr,h_=yi,d_=Sr(Oo),p_=Sr(No),yf=mi,b_=Sr(Lo),g_=Sr(Po),y_=vi,m_=_i,v_=wi,__=Sr(Do),Cc={"coinbase-wallet-app":{title:"Coinbase Wallet app",description:"Connect with your self-custody wallet",icon:p_.default,steps:vf},"coinbase-app":{title:"Coinbase app",description:"Connect with your Coinbase account",icon:d_.default,steps:_f}},w_=t=>{switch(t){case"coinbase-app":return b_.default;case"coinbase-wallet-app":default:return g_.default}},Ls=t=>t==="light"?"#FFFFFF":"#0A0B0D";function S_(t){const{theme:e}=t,[r,n]=(0,Ec.useState)("coinbase-wallet-app"),i=(0,Ec.useCallback)(c=>{n(c)},[]),s=(0,l_.createQrUrl)(t.sessionId,t.sessionSecret,t.linkAPIUrl,t.isParentConnection,t.version,t.chainId),o=Cc[r];if(!r)return null;const a=o.steps,u=r==="coinbase-app";return(0,I.h)("div",{"data-testid":"connect-content",class:(0,xe.default)("-cbwsdk-connect-content",e)},(0,I.h)("style",null,__.default),(0,I.h)("div",{class:"-cbwsdk-connect-content-header"},(0,I.h)("h2",{class:(0,xe.default)("-cbwsdk-connect-content-heading",e)},"Scan to connect with one of our mobile apps"),t.onCancel&&(0,I.h)("button",{type:"button",class:"-cbwsdk-cancel-button",onClick:t.onCancel},(0,I.h)(h_.CloseIcon,{fill:e==="light"?"#0A0B0D":"#FFFFFF"}))),(0,I.h)("div",{class:"-cbwsdk-connect-content-layout"},(0,I.h)("div",{class:"-cbwsdk-connect-content-column-left"},(0,I.h)("div",null,Object.entries(Cc).map(([c,l])=>(0,I.h)(mf,{key:c,title:l.title,description:l.description,icon:l.icon,selected:r===c,onClick:()=>i(c),theme:e}))),u&&(0,I.h)("div",{class:(0,xe.default)("-cbwsdk-connect-content-update-app",e)},"Don’t see a ",(0,I.h)("strong",null,"Scan")," option? Update your Coinbase app to the latest version and try again.")),(0,I.h)("div",{class:"-cbwsdk-connect-content-column-right"},(0,I.h)("div",{class:"-cbwsdk-connect-content-qr-wrapper"},(0,I.h)(m_.QRCode,{content:s,width:200,height:200,fgColor:"#000",bgColor:"transparent",image:{svg:w_(r),width:25,height:25}}),(0,I.h)("input",{type:"hidden",name:"cbw-cbwsdk-version",value:f_.LIB_VERSION}),(0,I.h)("input",{type:"hidden",value:s})),(0,I.h)(a,{theme:e}),!t.isConnected&&(0,I.h)("div",{"data-testid":"connecting-spinner",class:(0,xe.default)("-cbwsdk-connect-content-qr-connecting",e)},(0,I.h)(v_.Spinner,{size:36,color:e==="dark"?"#FFF":"#000"}),(0,I.h)("p",null,"Connecting...")))))}Qe.ConnectContent=S_;function mf({title:t,description:e,icon:r,selected:n,theme:i,onClick:s}){return(0,I.h)("div",{onClick:s,class:(0,xe.default)("-cbwsdk-connect-item",i,{selected:n})},(0,I.h)("div",null,(0,I.h)("img",{src:r,alt:t})),(0,I.h)("div",{class:"-cbwsdk-connect-item-copy-wrapper"},(0,I.h)("h3",{class:"-cbwsdk-connect-item-title"},t),(0,I.h)("p",{class:"-cbwsdk-connect-item-description"},e)))}Qe.ConnectItem=mf;function vf({theme:t}){return(0,I.h)("ol",{class:"-cbwsdk-wallet-steps"},(0,I.h)("li",{class:(0,xe.default)("-cbwsdk-wallet-steps-item",t)},(0,I.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase Wallet app")),(0,I.h)("li",{class:(0,xe.default)("-cbwsdk-wallet-steps-item",t)},(0,I.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},(0,I.h)("span",null,"Tap ",(0,I.h)("strong",null,"Scan")," "),(0,I.h)("span",{class:(0,xe.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",t)},(0,I.h)(yf.QRCodeIcon,{fill:Ls(t)})))))}Qe.CoinbaseWalletSteps=vf;function _f({theme:t}){return(0,I.h)("ol",{class:"-cbwsdk-wallet-steps"},(0,I.h)("li",{class:(0,xe.default)("-cbwsdk-wallet-steps-item",t)},(0,I.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase app")),(0,I.h)("li",{class:(0,xe.default)("-cbwsdk-wallet-steps-item",t)},(0,I.h)("div",{class:"-cbwsdk-wallet-steps-item-wrapper"},(0,I.h)("span",null,"Tap ",(0,I.h)("strong",null,"More")),(0,I.h)("span",{class:(0,xe.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",t)},(0,I.h)(y_.StatusDotIcon,{fill:Ls(t)})),(0,I.h)("span",{class:"-cbwsdk-wallet-steps-pad-left"},"then ",(0,I.h)("strong",null,"Scan")),(0,I.h)("span",{class:(0,xe.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",t)},(0,I.h)(yf.QRCodeIcon,{fill:Ls(t)})))))}Qe.CoinbaseAppSteps=_f;var Si={},Ei={};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.ArrowLeftIcon=void 0;const kc=Se;function E_(t){return(0,kc.h)("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},t),(0,kc.h)("path",{d:"M8.60675 0.155884L7.37816 1.28209L12.7723 7.16662H0V8.83328H12.6548L6.82149 14.6666L8 15.8451L15.8201 8.02501L8.60675 0.155884Z"}))}Ei.ArrowLeftIcon=E_;var Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.LaptopIcon=void 0;const ss=Se;function C_(t){return(0,ss.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},t),(0,ss.h)("path",{d:"M1.8001 2.2002H12.2001V9.40019H1.8001V2.2002ZM3.4001 3.8002V7.80019H10.6001V3.8002H3.4001Z"}),(0,ss.h)("path",{d:"M13.4001 10.2002H0.600098C0.600098 11.0838 1.31644 11.8002 2.2001 11.8002H11.8001C12.6838 11.8002 13.4001 11.0838 13.4001 10.2002Z"}))}Ci.LaptopIcon=C_;var ki={};Object.defineProperty(ki,"__esModule",{value:!0});ki.SafeIcon=void 0;const Ic=Se;function k_(t){return(0,Ic.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},t),(0,Ic.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.600098 0.600098V11.8001H13.4001V0.600098H0.600098ZM7.0001 9.2001C5.3441 9.2001 4.0001 7.8561 4.0001 6.2001C4.0001 4.5441 5.3441 3.2001 7.0001 3.2001C8.6561 3.2001 10.0001 4.5441 10.0001 6.2001C10.0001 7.8561 8.6561 9.2001 7.0001 9.2001ZM0.600098 12.6001H3.8001V13.4001H0.600098V12.6001ZM10.2001 12.6001H13.4001V13.4001H10.2001V12.6001ZM8.8001 6.2001C8.8001 7.19421 7.99421 8.0001 7.0001 8.0001C6.00598 8.0001 5.2001 7.19421 5.2001 6.2001C5.2001 5.20598 6.00598 4.4001 7.0001 4.4001C7.99421 4.4001 8.8001 5.20598 8.8001 6.2001Z"}))}ki.SafeIcon=k_;var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.default=".-cbwsdk-css-reset .-cbwsdk-try-extension{display:flex;margin-top:12px;height:202px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-try-extension.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-column-half{flex:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading{font-style:normal;font-weight:500;font-size:25px;line-height:32px;margin:0;max-width:204px}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta{appearance:none;border:none;background:none;color:#0052ff;cursor:pointer;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.light{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.dark{color:#588af5}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-wrapper{display:flex;align-items:center;margin-top:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-icon{display:block;margin-left:4px;height:14px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;padding:0;list-style:none;height:100%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item{display:flex;align-items:center;flex-flow:nowrap;margin-top:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item:first-of-type{margin-top:0}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon-wrapper{display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon{display:flex;height:32px;width:32px;border-radius:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.light{background:#eef0f3}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.dark{background:#1e2025}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy{display:block;font-weight:400;font-size:14px;line-height:20px;padding-left:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.light{color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.dark{color:#8a919e}";var wf=E&&E.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Si,"__esModule",{value:!0});Si.TryExtensionContent=void 0;const wt=wf(gi),K=Se,os=un,I_=Ei,M_=Ci,x_=ki,R_=wf(Bo);function T_({theme:t}){const[e,r]=(0,os.useState)(!1),n=(0,os.useCallback)(()=>{window.open("https://api.wallet.coinbase.com/rpc/v2/desktop/chrome","_blank")},[]),i=(0,os.useCallback)(()=>{e?window.location.reload():(n(),r(!0))},[n,e]);return(0,K.h)("div",{class:(0,wt.default)("-cbwsdk-try-extension",t)},(0,K.h)("style",null,R_.default),(0,K.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,K.h)("h3",{class:(0,wt.default)("-cbwsdk-try-extension-heading",t)},"Or try the Coinbase Wallet browser extension"),(0,K.h)("div",{class:"-cbwsdk-try-extension-cta-wrapper"},(0,K.h)("button",{class:(0,wt.default)("-cbwsdk-try-extension-cta",t),onClick:i},e?"Refresh":"Install"),(0,K.h)("div",null,!e&&(0,K.h)(I_.ArrowLeftIcon,{class:"-cbwsdk-try-extension-cta-icon",fill:t==="light"?"#0052FF":"#588AF5"})))),(0,K.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,K.h)("ul",{class:"-cbwsdk-try-extension-list"},(0,K.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,K.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,K.h)("span",{class:(0,wt.default)("-cbwsdk-try-extension-list-item-icon",t)},(0,K.h)(M_.LaptopIcon,{fill:t==="light"?"#0A0B0D":"#FFFFFF"}))),(0,K.h)("div",{class:(0,wt.default)("-cbwsdk-try-extension-list-item-copy",t)},"Connect with dapps with just one click on your desktop browser")),(0,K.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,K.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,K.h)("span",{class:(0,wt.default)("-cbwsdk-try-extension-list-item-icon",t)},(0,K.h)(x_.SafeIcon,{fill:t==="light"?"#0A0B0D":"#FFFFFF"}))),(0,K.h)("div",{class:(0,wt.default)("-cbwsdk-try-extension-list-item-copy",t)},"Add an additional layer of security by using a supported Ledger hardware wallet")))))}Si.TryExtensionContent=T_;var Fo={};Object.defineProperty(Fo,"__esModule",{value:!0});Fo.default=".-cbwsdk-css-reset .-cbwsdk-connect-dialog{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.light{background-color:rgba(0,0,0,.5)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.dark{background-color:rgba(50,53,61,.4)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box{display:flex;position:relative;flex-direction:column;transform:scale(1);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box-hidden{opacity:0;transform:scale(0.85)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container{display:block}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container-hidden{display:none}";var Sf=E&&E.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bi,"__esModule",{value:!0});bi.ConnectDialog=void 0;const as=Sf(gi),St=Se,cs=un,A_=Qe,O_=Si,N_=Sf(Fo),L_=t=>{const{isOpen:e,darkMode:r}=t,[n,i]=(0,cs.useState)(!e),[s,o]=(0,cs.useState)(!e);(0,cs.useEffect)(()=>{const u=[window.setTimeout(()=>{o(!e)},10)];return e?i(!1):u.push(window.setTimeout(()=>{i(!0)},360)),()=>{u.forEach(window.clearTimeout)}},[t.isOpen]);const a=r?"dark":"light";return(0,St.h)("div",{class:(0,as.default)("-cbwsdk-connect-dialog-container",n&&"-cbwsdk-connect-dialog-container-hidden")},(0,St.h)("style",null,N_.default),(0,St.h)("div",{class:(0,as.default)("-cbwsdk-connect-dialog-backdrop",a,s&&"-cbwsdk-connect-dialog-backdrop-hidden")}),(0,St.h)("div",{class:"-cbwsdk-connect-dialog"},(0,St.h)("div",{class:(0,as.default)("-cbwsdk-connect-dialog-box",s&&"-cbwsdk-connect-dialog-box-hidden")},t.connectDisabled?null:(0,St.h)(A_.ConnectContent,{theme:a,version:t.version,sessionId:t.sessionId,sessionSecret:t.sessionSecret,linkAPIUrl:t.linkAPIUrl,isConnected:t.isConnected,isParentConnection:t.isParentConnection,chainId:t.chainId,onCancel:t.onCancel}),(0,St.h)(O_.TryExtensionContent,{theme:a}))))};bi.ConnectDialog=L_;Object.defineProperty(fi,"__esModule",{value:!0});fi.LinkFlow=void 0;const us=Se,Mc=pi,P_=bi;class j_{constructor(e){this.extensionUI$=new Mc.BehaviorSubject({}),this.subscriptions=new Mc.Subscription,this.isConnected=!1,this.chainId=1,this.isOpen=!1,this.onCancel=null,this.root=null,this.connectDisabled=!1,this.darkMode=e.darkMode,this.version=e.version,this.sessionId=e.sessionId,this.sessionSecret=e.sessionSecret,this.linkAPIUrl=e.linkAPIUrl,this.isParentConnection=e.isParentConnection,this.connected$=e.connected$,this.chainId$=e.chainId$}attach(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-link-flow-root",e.appendChild(this.root),this.render(),this.subscriptions.add(this.connected$.subscribe(r=>{this.isConnected!==r&&(this.isConnected=r,this.render())})),this.subscriptions.add(this.chainId$.subscribe(r=>{this.chainId!==r&&(this.chainId=r,this.render())}))}detach(){var e;this.root&&(this.subscriptions.unsubscribe(),(0,us.render)(null,this.root),(e=this.root.parentElement)===null||e===void 0||e.removeChild(this.root))}setConnectDisabled(e){this.connectDisabled=e}open(e){this.isOpen=!0,this.onCancel=e.onCancel,this.render()}close(){this.isOpen=!1,this.onCancel=null,this.render()}render(){if(!this.root)return;const e=this.extensionUI$.subscribe(()=>{this.root&&(0,us.render)((0,us.h)(P_.ConnectDialog,{darkMode:this.darkMode,version:this.version,sessionId:this.sessionId,sessionSecret:this.sessionSecret,linkAPIUrl:this.linkAPIUrl,isOpen:this.isOpen,isConnected:this.isConnected,isParentConnection:this.isParentConnection,chainId:this.chainId,onCancel:this.onCancel,connectDisabled:this.connectDisabled}),this.root)});this.subscriptions.add(e)}}fi.LinkFlow=j_;var Ef={},$o={};Object.defineProperty($o,"__esModule",{value:!0});$o.default=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}";(function(t){var e=E&&E.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(t,"__esModule",{value:!0}),t.SnackbarInstance=t.SnackbarContainer=t.Snackbar=void 0;const r=e(gi),n=Se,i=un,s=e($o),o="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";function a(f){switch(f){case"coinbase-app":return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE0LjY3NCAxOC44NThjLTIuMDQ1IDAtMy42NDgtMS43MjItMy42NDgtMy44NDVzMS42NTktMy44NDUgMy42NDgtMy44NDVjMS44MjQgMCAzLjMxNyAxLjM3NyAzLjU5MyAzLjIxNGgzLjcwM2MtLjMzMS0zLjk2LTMuNDgyLTcuMDU5LTcuMjk2LTcuMDU5LTQuMDM0IDAtNy4zNSAzLjQ0My03LjM1IDcuNjkgMCA0LjI0NiAzLjI2IDcuNjkgNy4zNSA3LjY5IDMuODcgMCA2Ljk2NS0zLjEgNy4yOTYtNy4wNTloLTMuNzAzYy0uMjc2IDEuODM2LTEuNzY5IDMuMjE0LTMuNTkzIDMuMjE0WiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0wIDEwLjY3OGMwLTMuNzExIDAtNS41OTYuNzQyLTcuMDIzQTYuNTMyIDYuNTMyIDAgMCAxIDMuNjU1Ljc0MkM1LjA4MiAwIDYuOTY3IDAgMTAuNjc4IDBoNy45MzhjMy43MTEgMCA1LjU5NiAwIDcuMDIzLjc0MmE2LjUzMSA2LjUzMSAwIDAgMSAyLjkxMyAyLjkxM2MuNzQyIDEuNDI3Ljc0MiAzLjMxMi43NDIgNy4wMjN2Ny45MzhjMCAzLjcxMSAwIDUuNTk2LS43NDIgNy4wMjNhNi41MzEgNi41MzEgMCAwIDEtMi45MTMgMi45MTNjLTEuNDI3Ljc0Mi0zLjMxMi43NDItNy4wMjMuNzQyaC03LjkzOGMtMy43MTEgMC01LjU5NiAwLTcuMDIzLS43NDJhNi41MzEgNi41MzEgMCAwIDEtMi45MTMtMi45MTNDMCAyNC4yMTIgMCAyMi4zODQgMCAxOC42MTZ2LTcuOTM4WiIgZmlsbD0iIzAwNTJGRiIvPjxwYXRoIGQ9Ik0xNC42ODQgMTkuNzczYy0yLjcyNyAwLTQuODY0LTIuMjk1LTQuODY0LTUuMTI2IDAtMi44MzEgMi4yMS01LjEyNyA0Ljg2NC01LjEyNyAyLjQzMiAwIDQuNDIyIDEuODM3IDQuNzkgNC4yODVoNC45MzhjLS40NDItNS4yOC00LjY0My05LjQxMS05LjcyOC05LjQxMS01LjM4IDAtOS44MDIgNC41OS05LjgwMiAxMC4yNTMgMCA1LjY2MiA0LjM0OCAxMC4yNTMgOS44MDIgMTAuMjUzIDUuMTU5IDAgOS4yODYtNC4xMzIgOS43MjgtOS40MTFoLTQuOTM4Yy0uMzY4IDIuNDQ4LTIuMzU4IDQuMjg0LTQuNzkgNC4yODRaIiBmaWxsPSIjZmZmIi8+PC9zdmc+";case"coinbase-wallet-app":default:return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+"}}class u{constructor(h){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=h.darkMode}attach(h){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",h.appendChild(this.root),this.render()}presentItem(h){const d=this.nextItemKey++;return this.items.set(d,h),this.render(),()=>{this.items.delete(d),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&(0,n.render)((0,n.h)("div",null,(0,n.h)(t.SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([h,d])=>(0,n.h)(t.SnackbarInstance,Object.assign({},d,{key:h}))))),this.root)}}t.Snackbar=u;const c=f=>(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-container")},(0,n.h)("style",null,s.default),(0,n.h)("div",{class:"-cbwsdk-snackbar"},f.children));t.SnackbarContainer=c;const l=({autoExpand:f,message:h,menuItems:d,appSrc:p})=>{const[v,y]=(0,i.useState)(!0),[b,m]=(0,i.useState)(f??!1);(0,i.useEffect)(()=>{const k=[window.setTimeout(()=>{y(!1)},1),window.setTimeout(()=>{m(!0)},1e4)];return()=>{k.forEach(window.clearTimeout)}});const _=()=>{m(!b)};return(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-instance",v&&"-cbwsdk-snackbar-instance-hidden",b&&"-cbwsdk-snackbar-instance-expanded")},(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:_},(0,n.h)("img",{src:a(p),class:"-cbwsdk-snackbar-instance-header-cblogo"}),(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},h),(0,n.h)("div",{class:"-gear-container"},!b&&(0,n.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,n.h)("img",{src:o,class:"-gear-icon",title:"Expand"}))),d&&d.length>0&&(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},d.map((k,w)=>(0,n.h)("div",{class:(0,r.default)("-cbwsdk-snackbar-instance-menu-item",k.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:k.onClick,key:w},(0,n.h)("svg",{width:k.svgWidth,height:k.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("path",{"fill-rule":k.defaultFillRule,"clip-rule":k.defaultClipRule,d:k.path,fill:"#AAAAAA"})),(0,n.h)("span",{class:(0,r.default)("-cbwsdk-snackbar-instance-menu-item-info",k.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},k.info)))))};t.SnackbarInstance=l})(Ef);var Ii={},Vo={};Object.defineProperty(Vo,"__esModule",{value:!0});Vo.default='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}';var D_=E&&E.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.injectCssReset=void 0;const B_=D_(Vo);function F_(){const t=document.createElement("style");t.type="text/css",t.appendChild(document.createTextNode(B_.default)),document.documentElement.appendChild(t)}Ii.injectCssReset=F_;Object.defineProperty(li,"__esModule",{value:!0});li.WalletSDKUI=void 0;const $_=fi,V_=Ef,W_=Ii;class H_{constructor(e){this.standalone=null,this.attached=!1,this.appSrc=null,this.snackbar=new V_.Snackbar({darkMode:e.darkMode}),this.linkFlow=new $_.LinkFlow({darkMode:e.darkMode,version:e.version,sessionId:e.session.id,sessionSecret:e.session.secret,linkAPIUrl:e.linkAPIUrl,connected$:e.connected$,chainId$:e.chainId$,isParentConnection:!1})}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const e=document.documentElement,r=document.createElement("div");r.className="-cbwsdk-css-reset",e.appendChild(r),this.linkFlow.attach(r),this.snackbar.attach(r),this.attached=!0,(0,W_.injectCssReset)()}setConnectDisabled(e){this.linkFlow.setConnectDisabled(e)}addEthereumChain(e){}watchAsset(e){}switchEthereumChain(e){}requestEthereumAccounts(e){this.linkFlow.open({onCancel:e.onCancel})}hideRequestEthereumAccounts(){this.linkFlow.close()}signEthereumMessage(e){}signEthereumTransaction(e){}submitEthereumTransaction(e){}ethereumAddressFromSignedMessage(e){}showConnecting(e){let r;return e.isUnlinkedErrorState?r={autoExpand:!0,message:"Connection lost",appSrc:this.appSrc,menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:r={message:"Confirm on phone",appSrc:this.appSrc,menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(r)}setAppSrc(e){this.appSrc=e}reloadUI(){document.location.reload()}inlineAccountsResponse(){return!1}inlineAddEthereumChain(e){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}setStandalone(e){this.standalone=e}isStandalone(){var e;return(e=this.standalone)!==null&&e!==void 0?e:!1}}li.WalletSDKUI=H_;var Mi={},xi={};Object.defineProperty(xi,"__esModule",{value:!0});var qt;(function(t){t.typeOfFunction="function",t.boolTrue=!0})(qt||(qt={}));function Cf(t,e,r){if(!r||typeof r.value!==qt.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+e+"> is not a method!");return{configurable:qt.boolTrue,get:function(){var n=r.value.bind(this);return Object.defineProperty(this,e,{value:n,configurable:qt.boolTrue,writable:qt.boolTrue}),n}}}xi.bind=Cf;xi.default=Cf;function kf(t){return function(r){return r.lift(new z_(t))}}var z_=function(){function t(e){this.durationSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new U_(e,this.durationSelector))},t}(),U_=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.durationSelector=n,i.hasValue=!1,i}return e.prototype._next=function(r){if(this.value=r,this.hasValue=!0,!this.throttled){var n=void 0;try{var i=this.durationSelector;n=i(r)}catch(o){return this.destination.error(o)}var s=Z(n,new G(this));!s||s.closed?this.clearThrottle():this.add(this.throttled=s)}},e.prototype.clearThrottle=function(){var r=this,n=r.value,i=r.hasValue,s=r.throttled;s&&(this.remove(s),this.throttled=void 0,s.unsubscribe()),i&&(this.value=void 0,this.hasValue=!1,this.destination.next(n))},e.prototype.notifyNext=function(){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(Q);function q_(t,e){return e===void 0&&(e=be),kf(function(){return sf(t,e)})}function J_(t){return function(r){return r.lift(new G_(t))}}var G_=function(){function t(e){this.closingNotifier=e}return t.prototype.call=function(e,r){return r.subscribe(new Q_(e,this.closingNotifier))},t}(),Q_=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.buffer=[],i.add(Z(n,new G(i))),i}return e.prototype._next=function(r){this.buffer.push(r)},e.prototype.notifyNext=function(){var r=this.buffer;this.buffer=[],this.destination.next(r)},e}(Q);function Z_(t,e){return e===void 0&&(e=null),function(n){return n.lift(new Y_(t,e))}}var Y_=function(){function t(e,r){this.bufferSize=e,this.startBufferEvery=r,!r||e===r?this.subscriberClass=K_:this.subscriberClass=X_}return t.prototype.call=function(e,r){return r.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},t}(),K_=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.bufferSize=n,i.buffer=[],i}return e.prototype._next=function(r){var n=this.buffer;n.push(r),n.length==this.bufferSize&&(this.destination.next(n),this.buffer=[])},e.prototype._complete=function(){var r=this.buffer;r.length>0&&this.destination.next(r),t.prototype._complete.call(this)},e}(C),X_=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.bufferSize=n,s.startBufferEvery=i,s.buffers=[],s.count=0,s}return e.prototype._next=function(r){var n=this,i=n.bufferSize,s=n.startBufferEvery,o=n.buffers,a=n.count;this.count++,a%s===0&&o.push([]);for(var u=o.length;u--;){var c=o[u];c.push(r),c.length===i&&(o.splice(u,1),this.destination.next(c))}},e.prototype._complete=function(){for(var r=this,n=r.buffers,i=r.destination;n.length>0;){var s=n.shift();s.length>0&&i.next(s)}t.prototype._complete.call(this)},e}(C);function ew(t){var e=arguments.length,r=be;we(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],e--);var n=null;e>=2&&(n=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(o){return o.lift(new tw(t,n,i,r))}}var tw=function(){function t(e,r,n,i){this.bufferTimeSpan=e,this.bufferCreationInterval=r,this.maxBufferSize=n,this.scheduler=i}return t.prototype.call=function(e,r){return r.subscribe(new nw(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),rw=function(){function t(){this.buffer=[]}return t}(),nw=function(t){g(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;a.bufferTimeSpan=n,a.bufferCreationInterval=i,a.maxBufferSize=s,a.scheduler=o,a.contexts=[];var u=a.openContext();if(a.timespanOnly=i==null||i<0,a.timespanOnly){var c={subscriber:a,context:u,bufferTimeSpan:n};a.add(u.closeAction=o.schedule(xc,n,c))}else{var l={subscriber:a,context:u},f={bufferTimeSpan:n,bufferCreationInterval:i,subscriber:a,scheduler:o};a.add(u.closeAction=o.schedule(If,n,l)),a.add(o.schedule(iw,i,f))}return a}return e.prototype._next=function(r){for(var n=this.contexts,i=n.length,s,o=0;o<i;o++){var a=n[o],u=a.buffer;u.push(r),u.length==this.maxBufferSize&&(s=a)}s&&this.onBufferFull(s)},e.prototype._error=function(r){this.contexts.length=0,t.prototype._error.call(this,r)},e.prototype._complete=function(){for(var r=this,n=r.contexts,i=r.destination;n.length>0;){var s=n.shift();i.next(s.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(r){this.closeContext(r);var n=r.closeAction;if(n.unsubscribe(),this.remove(n),!this.closed&&this.timespanOnly){r=this.openContext();var i=this.bufferTimeSpan,s={subscriber:this,context:r,bufferTimeSpan:i};this.add(r.closeAction=this.scheduler.schedule(xc,i,s))}},e.prototype.openContext=function(){var r=new rw;return this.contexts.push(r),r},e.prototype.closeContext=function(r){this.destination.next(r.buffer);var n=this.contexts,i=n?n.indexOf(r):-1;i>=0&&n.splice(n.indexOf(r),1)},e}(C);function xc(t){var e=t.subscriber,r=t.context;r&&e.closeContext(r),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function iw(t){var e=t.bufferCreationInterval,r=t.bufferTimeSpan,n=t.subscriber,i=t.scheduler,s=n.openContext(),o=this;n.closed||(n.add(s.closeAction=i.schedule(If,r,{subscriber:n,context:s})),o.schedule(t,e))}function If(t){var e=t.subscriber,r=t.context;e.closeContext(r)}function sw(t,e){return function(n){return n.lift(new ow(t,e))}}var ow=function(){function t(e,r){this.openings=e,this.closingSelector=r}return t.prototype.call=function(e,r){return r.subscribe(new aw(e,this.openings,this.closingSelector))},t}(),aw=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.closingSelector=i,s.contexts=[],s.add(rt(s,n)),s}return e.prototype._next=function(r){for(var n=this.contexts,i=n.length,s=0;s<i;s++)n[s].buffer.push(r)},e.prototype._error=function(r){for(var n=this.contexts;n.length>0;){var i=n.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,t.prototype._error.call(this,r)},e.prototype._complete=function(){for(var r=this.contexts;r.length>0;){var n=r.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(r,n){r?this.closeBuffer(r):this.openBuffer(n)},e.prototype.notifyComplete=function(r){this.closeBuffer(r.context)},e.prototype.openBuffer=function(r){try{var n=this.closingSelector,i=n.call(this,r);i&&this.trySubscribe(i)}catch(s){this._error(s)}},e.prototype.closeBuffer=function(r){var n=this.contexts;if(n&&r){var i=r.buffer,s=r.subscription;this.destination.next(i),n.splice(n.indexOf(r),1),this.remove(s),s.unsubscribe()}},e.prototype.trySubscribe=function(r){var n=this.contexts,i=[],s=new J,o={buffer:i,subscription:s};n.push(o);var a=rt(this,r,o);!a||a.closed?this.closeBuffer(o):(a.context=o,this.add(a),s.add(a))},e}(Ft);function cw(t){return function(e){return e.lift(new uw(t))}}var uw=function(){function t(e){this.closingSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new lw(e,this.closingSelector))},t}(),lw=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.closingSelector=n,i.subscribing=!1,i.openBuffer(),i}return e.prototype._next=function(r){this.buffer.push(r)},e.prototype._complete=function(){var r=this.buffer;r&&this.destination.next(r),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},e.prototype.notifyNext=function(){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var r=this.closingSubscription;r&&(this.remove(r),r.unsubscribe());var n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];var i;try{var s=this.closingSelector;i=s()}catch(o){return this.error(o)}r=new J,this.closingSubscription=r,this.add(r),this.subscribing=!0,r.add(Z(i,new G(this))),this.subscribing=!1},e}(Q);function fw(t){return function(r){var n=new hw(t),i=r.lift(n);return n.caught=i}}var hw=function(){function t(e){this.selector=e}return t.prototype.call=function(e,r){return r.subscribe(new dw(e,this.selector,this.caught))},t}(),dw=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.selector=n,s.caught=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=void 0;try{n=this.selector(r,this.caught)}catch(o){t.prototype.error.call(this,o);return}this._unsubscribeAndRecycle();var i=new G(this);this.add(i);var s=Z(n,i);s!==i&&this.add(s)}},e}(Q);function pw(t){return function(e){return e.lift(new Mo(t))}}function bw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=null;return typeof t[t.length-1]=="function"&&(r=t.pop()),t.length===1&&pe(t[0])&&(t=t[0].slice()),function(n){return n.lift.call(st([n].concat(t)),new Mo(r))}}function gw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return r.lift.call(Vr.apply(void 0,[r].concat(t)))}}function Mf(t,e){return Ot(t,e,1)}function yw(t,e){return Mf(function(){return t},e)}function mw(t){return function(e){return e.lift(new vw(t,e))}}var vw=function(){function t(e,r){this.predicate=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new _w(e,this.predicate,this.source))},t}(),_w=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.source=i,s.count=0,s.index=0,s}return e.prototype._next=function(r){this.predicate?this._tryPredicate(r):this.count++},e.prototype._tryPredicate=function(r){var n;try{n=this.predicate(r,this.index++,this.source)}catch(i){this.destination.error(i);return}n&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(C);function ww(t){return function(e){return e.lift(new Sw(t))}}var Sw=function(){function t(e){this.durationSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new Ew(e,this.durationSelector))},t}(),Ew=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.durationSelector=n,i.hasValue=!1,i}return e.prototype._next=function(r){try{var n=this.durationSelector.call(this,r);n&&this._tryNext(r,n)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(r,n){var i=this.durationSubscription;this.value=r,this.hasValue=!0,i&&(i.unsubscribe(),this.remove(i)),i=Z(n,new G(this)),i&&!i.closed&&this.add(this.durationSubscription=i)},e.prototype.notifyNext=function(){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var r=this.value,n=this.durationSubscription;n&&(this.durationSubscription=void 0,n.unsubscribe(),this.remove(n)),this.value=void 0,this.hasValue=!1,t.prototype._next.call(this,r)}},e}(Q);function Cw(t,e){return e===void 0&&(e=be),function(r){return r.lift(new kw(t,e))}}var kw=function(){function t(e,r){this.dueTime=e,this.scheduler=r}return t.prototype.call=function(e,r){return r.subscribe(new Iw(e,this.dueTime,this.scheduler))},t}(),Iw=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.dueTime=n,s.scheduler=i,s.debouncedSubscription=null,s.lastValue=null,s.hasValue=!1,s}return e.prototype._next=function(r){this.clearDebounce(),this.lastValue=r,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Mw,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var r=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(r)}},e.prototype.clearDebounce=function(){var r=this.debouncedSubscription;r!==null&&(this.remove(r),r.unsubscribe(),this.debouncedSubscription=null)},e}(C);function Mw(t){t.debouncedNext()}function ln(t){return t===void 0&&(t=null),function(e){return e.lift(new xw(t))}}var xw=function(){function t(e){this.defaultValue=e}return t.prototype.call=function(e,r){return r.subscribe(new Rw(e,this.defaultValue))},t}(),Rw=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.defaultValue=n,i.isEmpty=!0,i}return e.prototype._next=function(r){this.isEmpty=!1,this.destination.next(r)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(C);function xf(t){return t instanceof Date&&!isNaN(+t)}function Tw(t,e){e===void 0&&(e=be);var r=xf(t),n=r?+t-e.now():Math.abs(t);return function(i){return i.lift(new Aw(n,e))}}var Aw=function(){function t(e,r){this.delay=e,this.scheduler=r}return t.prototype.call=function(e,r){return r.subscribe(new Ow(e,this.delay,this.scheduler))},t}(),Ow=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.delay=n,s.scheduler=i,s.queue=[],s.active=!1,s.errored=!1,s}return e.dispatch=function(r){for(var n=r.source,i=n.queue,s=r.scheduler,o=r.destination;i.length>0&&i[0].time-s.now()<=0;)i.shift().notification.observe(o);if(i.length>0){var a=Math.max(0,i[0].time-s.now());this.schedule(r,a)}else this.unsubscribe(),n.active=!1},e.prototype._schedule=function(r){this.active=!0;var n=this.destination;n.add(r.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:r}))},e.prototype.scheduleNotification=function(r){if(this.errored!==!0){var n=this.scheduler,i=new Nw(n.now()+this.delay,r);this.queue.push(i),this.active===!1&&this._schedule(n)}},e.prototype._next=function(r){this.scheduleNotification(tt.createNext(r))},e.prototype._error=function(r){this.errored=!0,this.queue=[],this.destination.error(r),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(tt.createComplete()),this.unsubscribe()},e}(C),Nw=function(){function t(e,r){this.time=e,this.notification=r}return t}();function Lw(t,e){return e?function(r){return new jw(r,e).lift(new Rc(t))}:function(r){return r.lift(new Rc(t))}}var Rc=function(){function t(e){this.delayDurationSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new Pw(e,this.delayDurationSelector))},t}(),Pw=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.delayDurationSelector=n,i.completed=!1,i.delayNotifierSubscriptions=[],i.index=0,i}return e.prototype.notifyNext=function(r,n,i,s,o){this.destination.next(r),this.removeSubscription(o),this.tryComplete()},e.prototype.notifyError=function(r,n){this._error(r)},e.prototype.notifyComplete=function(r){var n=this.removeSubscription(r);n&&this.destination.next(n),this.tryComplete()},e.prototype._next=function(r){var n=this.index++;try{var i=this.delayDurationSelector(r,n);i&&this.tryDelay(i,r)}catch(s){this.destination.error(s)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},e.prototype.removeSubscription=function(r){r.unsubscribe();var n=this.delayNotifierSubscriptions.indexOf(r);return n!==-1&&this.delayNotifierSubscriptions.splice(n,1),r.outerValue},e.prototype.tryDelay=function(r,n){var i=rt(this,r,n);if(i&&!i.closed){var s=this.destination;s.add(i),this.delayNotifierSubscriptions.push(i)}},e.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},e}(Ft),jw=function(t){g(e,t);function e(r,n){var i=t.call(this)||this;return i.source=r,i.subscriptionDelay=n,i}return e.prototype._subscribe=function(r){this.subscriptionDelay.subscribe(new Dw(r,this.source))},e}(O),Dw=function(t){g(e,t);function e(r,n){var i=t.call(this)||this;return i.parent=r,i.source=n,i.sourceSubscribed=!1,i}return e.prototype._next=function(r){this.subscribeToSource()},e.prototype._error=function(r){this.unsubscribe(),this.parent.error(r)},e.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(C);function Bw(){return function(e){return e.lift(new Fw)}}var Fw=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new $w(e))},t}(),$w=function(t){g(e,t);function e(r){return t.call(this,r)||this}return e.prototype._next=function(r){r.observe(this.destination)},e}(C);function Vw(t,e){return function(r){return r.lift(new Ww(t,e))}}var Ww=function(){function t(e,r){this.keySelector=e,this.flushes=r}return t.prototype.call=function(e,r){return r.subscribe(new Hw(e,this.keySelector,this.flushes))},t}(),Hw=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.keySelector=n,s.values=new Set,i&&s.add(Z(i,new G(s))),s}return e.prototype.notifyNext=function(){this.values.clear()},e.prototype.notifyError=function(r){this._error(r)},e.prototype._next=function(r){this.keySelector?this._useKeySelector(r):this._finalizeNext(r,r)},e.prototype._useKeySelector=function(r){var n,i=this.destination;try{n=this.keySelector(r)}catch(s){i.error(s);return}this._finalizeNext(n,r)},e.prototype._finalizeNext=function(r,n){var i=this.values;i.has(r)||(i.add(r),this.destination.next(n))},e}(Q);function Rf(t,e){return function(r){return r.lift(new zw(t,e))}}var zw=function(){function t(e,r){this.compare=e,this.keySelector=r}return t.prototype.call=function(e,r){return r.subscribe(new Uw(e,this.compare,this.keySelector))},t}(),Uw=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.keySelector=i,s.hasKey=!1,typeof n=="function"&&(s.compare=n),s}return e.prototype.compare=function(r,n){return r===n},e.prototype._next=function(r){var n;try{var i=this.keySelector;n=i?i(r):r}catch(a){return this.destination.error(a)}var s=!1;if(this.hasKey)try{var o=this.compare;s=o(this.key,n)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=n,this.destination.next(r))},e}(C);function qw(t,e){return Rf(function(r,n){return e?e(r[t],n[t]):r[t]===n[t]})}function Ri(t){return t===void 0&&(t=Qw),function(e){return e.lift(new Jw(t))}}var Jw=function(){function t(e){this.errorFactory=e}return t.prototype.call=function(e,r){return r.subscribe(new Gw(e,this.errorFactory))},t}(),Gw=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.errorFactory=n,i.hasValue=!1,i}return e.prototype._next=function(r){this.hasValue=!0,this.destination.next(r)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var r=void 0;try{r=this.errorFactory()}catch(n){r=n}this.destination.error(r)},e}(C);function Qw(){return new cn}function Wo(t){return function(e){return t===0?_r():e.lift(new Zw(t))}}var Zw=function(){function t(e){if(this.total=e,this.total<0)throw new ar}return t.prototype.call=function(e,r){return r.subscribe(new Yw(e,this.total))},t}(),Yw=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.total=n,i.count=0,i}return e.prototype._next=function(r){var n=this.total,i=++this.count;i<=n&&(this.destination.next(r),i===n&&(this.destination.complete(),this.unsubscribe()))},e}(C);function Kw(t,e){if(t<0)throw new ar;var r=arguments.length>=2;return function(n){return n.pipe(vt(function(i,s){return s===t}),Wo(1),r?ln(e):Ri(function(){return new ar}))}}function Xw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return Vr(r,di.apply(void 0,t))}}function eS(t,e){return function(r){return r.lift(new tS(t,e,r))}}var tS=function(){function t(e,r,n){this.predicate=e,this.thisArg=r,this.source=n}return t.prototype.call=function(e,r){return r.subscribe(new rS(e,this.predicate,this.thisArg,this.source))},t}(),rS=function(t){g(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o.predicate=n,o.thisArg=i,o.source=s,o.index=0,o.thisArg=i||o,o}return e.prototype.notifyComplete=function(r){this.destination.next(r),this.destination.complete()},e.prototype._next=function(r){var n=!1;try{n=this.predicate.call(this.thisArg,r,this.index++,this.source)}catch(i){this.destination.error(i);return}n||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(C);function nS(){return function(t){return t.lift(new iS)}}var iS=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new sS(e))},t}(),sS=function(t){g(e,t);function e(r){var n=t.call(this,r)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return e.prototype._next=function(r){this.hasSubscription||(this.hasSubscription=!0,this.add(Z(r,new G(this))))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(Q);function Tf(t,e){return e?function(r){return r.pipe(Tf(function(n,i){return st(t(n,i)).pipe(Oe(function(s,o){return e(n,s,i,o)}))}))}:function(r){return r.lift(new oS(t))}}var oS=function(){function t(e){this.project=e}return t.prototype.call=function(e,r){return r.subscribe(new aS(e,this.project))},t}(),aS=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.project=n,i.hasSubscription=!1,i.hasCompleted=!1,i.index=0,i}return e.prototype._next=function(r){this.hasSubscription||this.tryNext(r)},e.prototype.tryNext=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this.hasSubscription=!0,this._innerSub(n)},e.prototype._innerSub=function(r){var n=new G(this),i=this.destination;i.add(n);var s=Z(r,n);s!==n&&i.add(s)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyError=function(r){this.destination.error(r)},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(Q);function cS(t,e,r){return e===void 0&&(e=Number.POSITIVE_INFINITY),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(n){return n.lift(new uS(t,e,r))}}var uS=function(){function t(e,r,n){this.project=e,this.concurrent=r,this.scheduler=n}return t.prototype.call=function(e,r){return r.subscribe(new lS(e,this.project,this.concurrent,this.scheduler))},t}(),lS=function(t){g(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o.project=n,o.concurrent=i,o.scheduler=s,o.index=0,o.active=0,o.hasCompleted=!1,i<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return e.dispatch=function(r){var n=r.subscriber,i=r.result,s=r.value,o=r.index;n.subscribeToProjection(i,s,o)},e.prototype._next=function(r){var n=this.destination;if(n.closed){this._complete();return}var i=this.index++;if(this.active<this.concurrent){n.next(r);try{var s=this.project,o=s(r,i);if(!this.scheduler)this.subscribeToProjection(o,r,i);else{var a={subscriber:this,result:o,value:r,index:i},u=this.destination;u.add(this.scheduler.schedule(e.dispatch,0,a))}}catch(c){n.error(c)}}else this.buffer.push(r)},e.prototype.subscribeToProjection=function(r,n,i){this.active++;var s=this.destination;s.add(Z(r,new G(this)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(r){this._next(r)},e.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r&&r.length>0&&this._next(r.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},e}(Q);function fS(t){return function(e){return e.lift(new hS(t))}}var hS=function(){function t(e){this.callback=e}return t.prototype.call=function(e,r){return r.subscribe(new dS(e,this.callback))},t}(),dS=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.add(new J(n)),i}return e}(C);function pS(t,e){if(typeof t!="function")throw new TypeError("predicate is not a function");return function(r){return r.lift(new Af(t,r,!1,e))}}var Af=function(){function t(e,r,n,i){this.predicate=e,this.source=r,this.yieldIndex=n,this.thisArg=i}return t.prototype.call=function(e,r){return r.subscribe(new bS(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}(),bS=function(t){g(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;return a.predicate=n,a.source=i,a.yieldIndex=s,a.thisArg=o,a.index=0,a}return e.prototype.notifyComplete=function(r){var n=this.destination;n.next(r),n.complete(),this.unsubscribe()},e.prototype._next=function(r){var n=this,i=n.predicate,s=n.thisArg,o=this.index++;try{var a=i.call(s||this,r,o,this.source);a&&this.notifyComplete(this.yieldIndex?o:r)}catch(u){this.destination.error(u)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(C);function gS(t,e){return function(r){return r.lift(new Af(t,r,!0,e))}}function yS(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?vt(function(i,s){return t(i,s,n)}):yt,Wo(1),r?ln(e):Ri(function(){return new cn}))}}function mS(){return function(e){return e.lift(new vS)}}var vS=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new _S(e))},t}(),_S=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype._next=function(r){},e}(C);function wS(){return function(t){return t.lift(new SS)}}var SS=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new ES(e))},t}(),ES=function(t){g(e,t);function e(r){return t.call(this,r)||this}return e.prototype.notifyComplete=function(r){var n=this.destination;n.next(r),n.complete()},e.prototype._next=function(r){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(C);function Fn(t){return function(r){return t===0?_r():r.lift(new CS(t))}}var CS=function(){function t(e){if(this.total=e,this.total<0)throw new ar}return t.prototype.call=function(e,r){return r.subscribe(new kS(e,this.total))},t}(),kS=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.total=n,i.ring=new Array,i.count=0,i}return e.prototype._next=function(r){var n=this.ring,i=this.total,s=this.count++;if(n.length<i)n.push(r);else{var o=s%i;n[o]=r}},e.prototype._complete=function(){var r=this.destination,n=this.count;if(n>0)for(var i=this.count>=this.total?this.total:this.count,s=this.ring,o=0;o<i;o++){var a=n++%i;r.next(s[a])}r.complete()},e}(C);function IS(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?vt(function(i,s){return t(i,s,n)}):yt,Fn(1),r?ln(e):Ri(function(){return new cn}))}}function MS(t){return function(e){return e.lift(new xS(t))}}var xS=function(){function t(e){this.value=e}return t.prototype.call=function(e,r){return r.subscribe(new RS(e,this.value))},t}(),RS=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.value=n,i}return e.prototype._next=function(r){this.destination.next(this.value)},e}(C);function TS(){return function(e){return e.lift(new AS)}}var AS=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new OS(e))},t}(),OS=function(t){g(e,t);function e(r){return t.call(this,r)||this}return e.prototype._next=function(r){this.destination.next(tt.createNext(r))},e.prototype._error=function(r){var n=this.destination;n.next(tt.createError(r)),n.complete()},e.prototype._complete=function(){var r=this.destination;r.next(tt.createComplete()),r.complete()},e}(C);function $n(t,e){var r=!1;return arguments.length>=2&&(r=!0),function(i){return i.lift(new NS(t,e,r))}}var NS=function(){function t(e,r,n){n===void 0&&(n=!1),this.accumulator=e,this.seed=r,this.hasSeed=n}return t.prototype.call=function(e,r){return r.subscribe(new LS(e,this.accumulator,this.seed,this.hasSeed))},t}(),LS=function(t){g(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o.accumulator=n,o._seed=i,o.hasSeed=s,o.index=0,o}return Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(r){this.hasSeed=!0,this._seed=r},enumerable:!0,configurable:!0}),e.prototype._next=function(r){if(!this.hasSeed)this.seed=r,this.destination.next(r);else return this._tryNext(r)},e.prototype._tryNext=function(r){var n=this.index++,i;try{i=this.accumulator(this.seed,r,n)}catch(s){this.destination.error(s)}this.seed=i,this.destination.next(i)},e}(C);function Ti(t,e){return arguments.length>=2?function(n){return Ms($n(t,e),Fn(1),ln(e))(n)}:function(n){return Ms($n(function(i,s,o){return t(i,s,o+1)}),Fn(1))(n)}}function PS(t){var e=typeof t=="function"?function(r,n){return t(r,n)>0?r:n}:function(r,n){return r>n?r:n};return Ti(e)}function jS(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return r.lift.call(ef.apply(void 0,[r].concat(t)))}}function DS(t,e,r){return r===void 0&&(r=Number.POSITIVE_INFINITY),typeof e=="function"?Ot(function(){return t},e,r):(typeof e=="number"&&(r=e),Ot(function(){return t},r))}function BS(t,e,r){return r===void 0&&(r=Number.POSITIVE_INFINITY),function(n){return n.lift(new FS(t,e,r))}}var FS=function(){function t(e,r,n){this.accumulator=e,this.seed=r,this.concurrent=n}return t.prototype.call=function(e,r){return r.subscribe(new $S(e,this.accumulator,this.seed,this.concurrent))},t}(),$S=function(t){g(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o.accumulator=n,o.acc=i,o.concurrent=s,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return e.prototype._next=function(r){if(this.active<this.concurrent){var n=this.index++,i=this.destination,s=void 0;try{var o=this.accumulator;s=o(this.acc,r,n)}catch(a){return i.error(a)}this.active++,this._innerSub(s)}else this.buffer.push(r)},e.prototype._innerSub=function(r){var n=new G(this),i=this.destination;i.add(n);var s=Z(r,n);s!==n&&i.add(s)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},e.prototype.notifyNext=function(r){var n=this.destination;this.acc=r,this.hasValue=!0,n.next(r)},e.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r.length>0?this._next(r.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},e}(Q);function VS(t){var e=typeof t=="function"?function(r,n){return t(r,n)<0?r:n}:function(r,n){return r<n?r:n};return Ti(e)}function Nt(t,e){return function(n){var i;if(typeof t=="function"?i=t:i=function(){return t},typeof e=="function")return n.lift(new WS(i,e));var s=Object.create(n,vv);return s.source=n,s.subjectFactory=i,s}}var WS=function(){function t(e,r){this.subjectFactory=e,this.selector=r}return t.prototype.call=function(e,r){var n=this.selector,i=this.subjectFactory(),s=n(i).subscribe(e);return s.add(r.subscribe(i)),s},t}();function HS(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===1&&pe(t[0])&&(t=t[0]),function(r){return r.lift(new zS(t))}}var zS=function(){function t(e){this.nextSources=e}return t.prototype.call=function(e,r){return r.subscribe(new US(e,this.nextSources))},t}(),US=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.destination=r,i.nextSources=n,i}return e.prototype.notifyError=function(){this.subscribeToNextSource()},e.prototype.notifyComplete=function(){this.subscribeToNextSource()},e.prototype._error=function(r){this.subscribeToNextSource(),this.unsubscribe()},e.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},e.prototype.subscribeToNextSource=function(){var r=this.nextSources.shift();if(r){var n=new G(this),i=this.destination;i.add(n);var s=Z(r,n);s!==n&&i.add(s)}else this.destination.complete()},e}(Q);function qS(){return function(t){return t.lift(new JS)}}var JS=function(){function t(){}return t.prototype.call=function(e,r){return r.subscribe(new GS(e))},t}(),GS=function(t){g(e,t);function e(r){var n=t.call(this,r)||this;return n.hasPrev=!1,n}return e.prototype._next=function(r){var n;this.hasPrev?n=[this.prev,r]:this.hasPrev=!0,this.prev=r,n&&this.destination.next(n)},e}(C);function QS(t,e){return function(r){return[vt(t,e)(r),vt(rf(t,e))(r)]}}function ZS(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length;if(r===0)throw new Error("list of properties cannot be empty.");return function(n){return Oe(YS(t,r))(n)}}function YS(t,e){var r=function(n){for(var i=n,s=0;s<e;s++){var o=i!=null?i[t[s]]:void 0;if(o!==void 0)i=o;else return}return i};return r}function KS(t){return t?Nt(function(){return new ie},t):Nt(new ie)}function XS(t){return function(e){return Nt(new Pl(t))(e)}}function e2(){return function(t){return Nt(new wr)(t)}}function t2(t,e,r,n){r&&typeof r!="function"&&(n=r);var i=typeof r=="function"?r:void 0,s=new Io(t,e,n);return function(o){return Nt(function(){return s},i)(o)}}function r2(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(n){return t.length===1&&pe(t[0])&&(t=t[0]),n.lift.call(nf.apply(void 0,[n].concat(t)))}}function n2(t){return t===void 0&&(t=-1),function(e){return t===0?_r():t<0?e.lift(new Tc(-1,e)):e.lift(new Tc(t-1,e))}}var Tc=function(){function t(e,r){this.count=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new i2(e,this.count,this.source))},t}(),i2=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.count=n,s.source=i,s}return e.prototype.complete=function(){if(!this.isStopped){var r=this,n=r.source,i=r.count;if(i===0)return t.prototype.complete.call(this);i>-1&&(this.count=i-1),n.subscribe(this._unsubscribeAndRecycle())}},e}(C);function s2(t){return function(e){return e.lift(new o2(t))}}var o2=function(){function t(e){this.notifier=e}return t.prototype.call=function(e,r){return r.subscribe(new a2(e,this.notifier,r))},t}(),a2=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.notifier=n,s.source=i,s.sourceIsBeingSubscribedTo=!0,s}return e.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return t.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},e.prototype._unsubscribe=function(){var r=this,n=r.notifications,i=r.retriesSubscription;n&&(n.unsubscribe(),this.notifications=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype._unsubscribeAndRecycle=function(){var r=this._unsubscribe;return this._unsubscribe=null,t.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=r,this},e.prototype.subscribeToRetries=function(){this.notifications=new ie;var r;try{var n=this.notifier;r=n(this.notifications)}catch{return t.prototype.complete.call(this)}this.retries=r,this.retriesSubscription=Z(r,new G(this))},e}(Q);function c2(t){return t===void 0&&(t=-1),function(e){return e.lift(new u2(t,e))}}var u2=function(){function t(e,r){this.count=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new l2(e,this.count,this.source))},t}(),l2=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.count=n,s.source=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=this,i=n.source,s=n.count;if(s===0)return t.prototype.error.call(this,r);s>-1&&(this.count=s-1),i.subscribe(this._unsubscribeAndRecycle())}},e}(C);function f2(t){return function(e){return e.lift(new h2(t,e))}}var h2=function(){function t(e,r){this.notifier=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new d2(e,this.notifier,this.source))},t}(),d2=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.notifier=n,s.source=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=this.errors,i=this.retries,s=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{n=new ie;try{var o=this.notifier;i=o(n)}catch(a){return t.prototype.error.call(this,a)}s=Z(i,new G(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=i,this.retriesSubscription=s,n.next(r)}},e.prototype._unsubscribe=function(){var r=this,n=r.errors,i=r.retriesSubscription;n&&(n.unsubscribe(),this.errors=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype.notifyNext=function(){var r=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=r,this.source.subscribe(this)},e}(Q);function p2(t){return function(e){return e.lift(new b2(t))}}var b2=function(){function t(e){this.notifier=e}return t.prototype.call=function(e,r){var n=new g2(e),i=r.subscribe(n);return i.add(Z(this.notifier,new G(n))),i},t}(),g2=function(t){g(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.hasValue=!1,r}return e.prototype._next=function(r){this.value=r,this.hasValue=!0},e.prototype.notifyNext=function(){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(Q);function y2(t,e){return e===void 0&&(e=be),function(r){return r.lift(new m2(t,e))}}var m2=function(){function t(e,r){this.period=e,this.scheduler=r}return t.prototype.call=function(e,r){return r.subscribe(new v2(e,this.period,this.scheduler))},t}(),v2=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.period=n,s.scheduler=i,s.hasValue=!1,s.add(i.schedule(_2,n,{subscriber:s,period:n})),s}return e.prototype._next=function(r){this.lastValue=r,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(C);function _2(t){var e=t.subscriber,r=t.period;e.notifyNext(),this.schedule(t,r)}function w2(t,e){return function(r){return r.lift(new S2(t,e))}}var S2=function(){function t(e,r){this.compareTo=e,this.comparator=r}return t.prototype.call=function(e,r){return r.subscribe(new E2(e,this.compareTo,this.comparator))},t}(),E2=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.compareTo=n,s.comparator=i,s._a=[],s._b=[],s._oneComplete=!1,s.destination.add(n.subscribe(new C2(r,s))),s}return e.prototype._next=function(r){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(r),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},e.prototype.checkValues=function(){for(var r=this,n=r._a,i=r._b,s=r.comparator;n.length>0&&i.length>0;){var o=n.shift(),a=i.shift(),u=!1;try{u=s?s(o,a):o===a}catch(c){this.destination.error(c)}u||this.emit(!1)}},e.prototype.emit=function(r){var n=this.destination;n.next(r),n.complete()},e.prototype.nextB=function(r){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(r),this.checkValues())},e.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},e}(C),C2=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.parent=n,i}return e.prototype._next=function(r){this.parent.nextB(r)},e.prototype._error=function(r){this.parent.error(r),this.unsubscribe()},e.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},e}(C);function k2(){return new ie}function I2(){return function(t){return Eo()(Nt(k2)(t))}}function M2(t,e,r){var n;return t&&typeof t=="object"?n=t:n={bufferSize:t,windowTime:e,refCount:!1,scheduler:r},function(i){return i.lift(x2(n))}}function x2(t){var e=t.bufferSize,r=e===void 0?Number.POSITIVE_INFINITY:e,n=t.windowTime,i=n===void 0?Number.POSITIVE_INFINITY:n,s=t.refCount,o=t.scheduler,a,u=0,c,l=!1,f=!1;return function(d){u++;var p;!a||l?(l=!1,a=new Io(r,i,o),p=a.subscribe(this),c=d.subscribe({next:function(v){a.next(v)},error:function(v){l=!0,a.error(v)},complete:function(){f=!0,c=void 0,a.complete()}}),f&&(c=void 0)):p=a.subscribe(this),this.add(function(){u--,p.unsubscribe(),p=void 0,c&&!f&&s&&u===0&&(c.unsubscribe(),c=void 0,a=void 0)})}}function R2(t){return function(e){return e.lift(new T2(t,e))}}var T2=function(){function t(e,r){this.predicate=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new A2(e,this.predicate,this.source))},t}(),A2=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.source=i,s.seenValue=!1,s.index=0,s}return e.prototype.applySingleValue=function(r){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=r)},e.prototype._next=function(r){var n=this.index++;this.predicate?this.tryNext(r,n):this.applySingleValue(r)},e.prototype.tryNext=function(r,n){try{this.predicate(r,n,this.source)&&this.applySingleValue(r)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){var r=this.destination;this.index>0?(r.next(this.seenValue?this.singleValue:void 0),r.complete()):r.error(new cn)},e}(C);function O2(t){return function(e){return e.lift(new N2(t))}}var N2=function(){function t(e){this.total=e}return t.prototype.call=function(e,r){return r.subscribe(new L2(e,this.total))},t}(),L2=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.total=n,i.count=0,i}return e.prototype._next=function(r){++this.count>this.total&&this.destination.next(r)},e}(C);function P2(t){return function(e){return e.lift(new j2(t))}}var j2=function(){function t(e){if(this._skipCount=e,this._skipCount<0)throw new ar}return t.prototype.call=function(e,r){return this._skipCount===0?r.subscribe(new C(e)):r.subscribe(new D2(e,this._skipCount))},t}(),D2=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i._skipCount=n,i._count=0,i._ring=new Array(n),i}return e.prototype._next=function(r){var n=this._skipCount,i=this._count++;if(i<n)this._ring[i]=r;else{var s=i%n,o=this._ring,a=o[s];o[s]=r,this.destination.next(a)}},e}(C);function B2(t){return function(e){return e.lift(new F2(t))}}var F2=function(){function t(e){this.notifier=e}return t.prototype.call=function(e,r){return r.subscribe(new $2(e,this.notifier))},t}(),$2=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;i.hasValue=!1;var s=new G(i);i.add(s),i.innerSubscription=s;var o=Z(n,s);return o!==s&&(i.add(o),i.innerSubscription=o),i}return e.prototype._next=function(r){this.hasValue&&t.prototype._next.call(this,r)},e.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(Q);function V2(t){return function(e){return e.lift(new W2(t))}}var W2=function(){function t(e){this.predicate=e}return t.prototype.call=function(e,r){return r.subscribe(new H2(e,this.predicate))},t}(),H2=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.predicate=n,i.skipping=!0,i.index=0,i}return e.prototype._next=function(r){var n=this.destination;this.skipping&&this.tryCallPredicate(r),this.skipping||n.next(r)},e.prototype.tryCallPredicate=function(r){try{var n=this.predicate(r,this.index++);this.skipping=!!n}catch(i){this.destination.error(i)}},e}(C);function z2(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return we(r)?(t.pop(),function(n){return Vr(t,n,r)}):function(n){return Vr(t,n)}}var U2=function(t){g(e,t);function e(r,n,i){n===void 0&&(n=0),i===void 0&&(i=Mn);var s=t.call(this)||this;return s.source=r,s.delayTime=n,s.scheduler=i,(!cr(n)||n<0)&&(s.delayTime=0),(!i||typeof i.schedule!="function")&&(s.scheduler=Mn),s}return e.create=function(r,n,i){return n===void 0&&(n=0),i===void 0&&(i=Mn),new e(r,n,i)},e.dispatch=function(r){var n=r.source,i=r.subscriber;return this.add(n.subscribe(i))},e.prototype._subscribe=function(r){var n=this.delayTime,i=this.source,s=this.scheduler;return s.schedule(e.dispatch,n,{source:i,subscriber:r})},e}(O);function q2(t,e){return e===void 0&&(e=0),function(n){return n.lift(new J2(t,e))}}var J2=function(){function t(e,r){this.scheduler=e,this.delay=r}return t.prototype.call=function(e,r){return new U2(r,this.delay,this.scheduler).subscribe(e)},t}();function Wr(t,e){return typeof e=="function"?function(r){return r.pipe(Wr(function(n,i){return st(t(n,i)).pipe(Oe(function(s,o){return e(n,s,i,o)}))}))}:function(r){return r.lift(new G2(t))}}var G2=function(){function t(e){this.project=e}return t.prototype.call=function(e,r){return r.subscribe(new Q2(e,this.project))},t}(),Q2=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.project=n,i.index=0,i}return e.prototype._next=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this._innerSub(n)},e.prototype._innerSub=function(r){var n=this.innerSubscription;n&&n.unsubscribe();var i=new G(this),s=this.destination;s.add(i),this.innerSubscription=Z(r,i),this.innerSubscription!==i&&s.add(this.innerSubscription)},e.prototype._complete=function(){var r=this.innerSubscription;(!r||r.closed)&&t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(r){this.destination.next(r)},e}(Q);function Z2(){return Wr(yt)}function Y2(t,e){return e?Wr(function(){return t},e):Wr(function(){return t})}function K2(t){return function(e){return e.lift(new X2(t))}}var X2=function(){function t(e){this.notifier=e}return t.prototype.call=function(e,r){var n=new eE(e),i=Z(this.notifier,new G(n));return i&&!n.seenValue?(n.add(i),r.subscribe(n)):n},t}(),eE=function(t){g(e,t);function e(r){var n=t.call(this,r)||this;return n.seenValue=!1,n}return e.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(Q);function tE(t,e){return e===void 0&&(e=!1),function(r){return r.lift(new rE(t,e))}}var rE=function(){function t(e,r){this.predicate=e,this.inclusive=r}return t.prototype.call=function(e,r){return r.subscribe(new nE(e,this.predicate,this.inclusive))},t}(),nE=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.inclusive=i,s.index=0,s}return e.prototype._next=function(r){var n=this.destination,i;try{i=this.predicate(r,this.index++)}catch(s){n.error(s);return}this.nextOrComplete(r,i)},e.prototype.nextOrComplete=function(r,n){var i=this.destination;n?i.next(r):(this.inclusive&&i.next(r),i.complete())},e}(C);function iE(t,e,r){return function(i){return i.lift(new sE(t,e,r))}}var sE=function(){function t(e,r,n){this.nextOrObserver=e,this.error=r,this.complete=n}return t.prototype.call=function(e,r){return r.subscribe(new oE(e,this.nextOrObserver,this.error,this.complete))},t}(),oE=function(t){g(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o._tapNext=ze,o._tapError=ze,o._tapComplete=ze,o._tapError=i||ze,o._tapComplete=s||ze,sr(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||ze,o._tapError=n.error||ze,o._tapComplete=n.complete||ze),o}return e.prototype._next=function(r){try{this._tapNext.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.next(r)},e.prototype._error=function(r){try{this._tapError.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.error(r)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(r){this.destination.error(r);return}return this.destination.complete()},e}(C),Of={leading:!0,trailing:!1};function aE(t,e){return e===void 0&&(e=Of),function(r){return r.lift(new cE(t,!!e.leading,!!e.trailing))}}var cE=function(){function t(e,r,n){this.durationSelector=e,this.leading=r,this.trailing=n}return t.prototype.call=function(e,r){return r.subscribe(new uE(e,this.durationSelector,this.leading,this.trailing))},t}(),uE=function(t){g(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o.destination=r,o.durationSelector=n,o._leading=i,o._trailing=s,o._hasValue=!1,o}return e.prototype._next=function(r){this._hasValue=!0,this._sendValue=r,this._throttled||(this._leading?this.send():this.throttle(r))},e.prototype.send=function(){var r=this,n=r._hasValue,i=r._sendValue;n&&(this.destination.next(i),this.throttle(i)),this._hasValue=!1,this._sendValue=void 0},e.prototype.throttle=function(r){var n=this.tryDurationSelector(r);n&&this.add(this._throttled=Z(n,new G(this)))},e.prototype.tryDurationSelector=function(r){try{return this.durationSelector(r)}catch(n){return this.destination.error(n),null}},e.prototype.throttlingDone=function(){var r=this,n=r._throttled,i=r._trailing;n&&n.unsubscribe(),this._throttled=void 0,i&&this.send()},e.prototype.notifyNext=function(){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(Q);function lE(t,e,r){return e===void 0&&(e=be),r===void 0&&(r=Of),function(n){return n.lift(new fE(t,e,r.leading,r.trailing))}}var fE=function(){function t(e,r,n,i){this.duration=e,this.scheduler=r,this.leading=n,this.trailing=i}return t.prototype.call=function(e,r){return r.subscribe(new hE(e,this.duration,this.scheduler,this.leading,this.trailing))},t}(),hE=function(t){g(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;return a.duration=n,a.scheduler=i,a.leading=s,a.trailing=o,a._hasTrailingValue=!1,a._trailingValue=null,a}return e.prototype._next=function(r){this.throttled?this.trailing&&(this._trailingValue=r,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(dE,this.duration,{subscriber:this})),this.leading?this.destination.next(r):this.trailing&&(this._trailingValue=r,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var r=this.throttled;r&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),r.unsubscribe(),this.remove(r),this.throttled=null)},e}(C);function dE(t){var e=t.subscriber;e.clearThrottle()}function pE(t){return t===void 0&&(t=be),function(e){return Ro(function(){return e.pipe($n(function(r,n){var i=r.current;return{value:n,current:t.now(),last:i}},{current:t.now(),value:void 0,last:void 0}),Oe(function(r){var n=r.current,i=r.last,s=r.value;return new bE(s,n-i)}))})}}var bE=function(){function t(e,r){this.value=e,this.interval=r}return t}();function Nf(t,e,r){return r===void 0&&(r=be),function(n){var i=xf(t),s=i?+t-r.now():Math.abs(t);return n.lift(new gE(s,i,e,r))}}var gE=function(){function t(e,r,n,i){this.waitFor=e,this.absoluteTimeout=r,this.withObservable=n,this.scheduler=i}return t.prototype.call=function(e,r){return r.subscribe(new yE(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),yE=function(t){g(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;return a.absoluteTimeout=n,a.waitFor=i,a.withObservable=s,a.scheduler=o,a.scheduleTimeout(),a}return e.dispatchTimeout=function(r){var n=r.withObservable;r._unsubscribeAndRecycle(),r.add(Z(n,new G(r)))},e.prototype.scheduleTimeout=function(){var r=this.action;r?this.action=r.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(r){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,r)},e.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},e}(Q);function mE(t,e){return e===void 0&&(e=be),Nf(t,ko(new zl),e)}function vE(t){return t===void 0&&(t=be),Oe(function(e){return new _E(e,t.now())})}var _E=function(){function t(e,r){this.value=e,this.timestamp=r}return t}();function wE(t,e,r){return r===0?[e]:(t.push(e),t)}function SE(){return Ti(wE,[])}function EE(t){return function(r){return r.lift(new CE(t))}}var CE=function(){function t(e){this.windowBoundaries=e}return t.prototype.call=function(e,r){var n=new kE(e),i=r.subscribe(n);return i.closed||n.add(Z(this.windowBoundaries,new G(n))),i},t}(),kE=function(t){g(e,t);function e(r){var n=t.call(this,r)||this;return n.window=new ie,r.next(n.window),n}return e.prototype.notifyNext=function(){this.openWindow()},e.prototype.notifyError=function(r){this._error(r)},e.prototype.notifyComplete=function(){this._complete()},e.prototype._next=function(r){this.window.next(r)},e.prototype._error=function(r){this.window.error(r),this.destination.error(r)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var r=this.window;r&&r.complete();var n=this.destination,i=this.window=new ie;n.next(i)},e}(Q);function IE(t,e){return e===void 0&&(e=0),function(n){return n.lift(new ME(t,e))}}var ME=function(){function t(e,r){this.windowSize=e,this.startWindowEvery=r}return t.prototype.call=function(e,r){return r.subscribe(new xE(e,this.windowSize,this.startWindowEvery))},t}(),xE=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.destination=r,s.windowSize=n,s.startWindowEvery=i,s.windows=[new ie],s.count=0,r.next(s.windows[0]),s}return e.prototype._next=function(r){for(var n=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,i=this.destination,s=this.windowSize,o=this.windows,a=o.length,u=0;u<a&&!this.closed;u++)o[u].next(r);var c=this.count-s+1;if(c>=0&&c%n===0&&!this.closed&&o.shift().complete(),++this.count%n===0&&!this.closed){var l=new ie;o.push(l),i.next(l)}},e.prototype._error=function(r){var n=this.windows;if(n)for(;n.length>0&&!this.closed;)n.shift().error(r);this.destination.error(r)},e.prototype._complete=function(){var r=this.windows;if(r)for(;r.length>0&&!this.closed;)r.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(C);function RE(t){var e=be,r=null,n=Number.POSITIVE_INFINITY;return we(arguments[3])&&(e=arguments[3]),we(arguments[2])?e=arguments[2]:cr(arguments[2])&&(n=Number(arguments[2])),we(arguments[1])?e=arguments[1]:cr(arguments[1])&&(r=Number(arguments[1])),function(s){return s.lift(new TE(t,r,n,e))}}var TE=function(){function t(e,r,n,i){this.windowTimeSpan=e,this.windowCreationInterval=r,this.maxWindowSize=n,this.scheduler=i}return t.prototype.call=function(e,r){return r.subscribe(new OE(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),AE=function(t){g(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._numberOfNextedValues=0,r}return e.prototype.next=function(r){this._numberOfNextedValues++,t.prototype.next.call(this,r)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(ie),OE=function(t){g(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;a.destination=r,a.windowTimeSpan=n,a.windowCreationInterval=i,a.maxWindowSize=s,a.scheduler=o,a.windows=[];var u=a.openWindow();if(i!==null&&i>=0){var c={subscriber:a,window:u,context:null},l={windowTimeSpan:n,windowCreationInterval:i,subscriber:a,scheduler:o};a.add(o.schedule(Lf,n,c)),a.add(o.schedule(LE,i,l))}else{var f={subscriber:a,window:u,windowTimeSpan:n};a.add(o.schedule(NE,n,f))}return a}return e.prototype._next=function(r){for(var n=this.windows,i=n.length,s=0;s<i;s++){var o=n[s];o.closed||(o.next(r),o.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(o))}},e.prototype._error=function(r){for(var n=this.windows;n.length>0;)n.shift().error(r);this.destination.error(r)},e.prototype._complete=function(){for(var r=this.windows;r.length>0;){var n=r.shift();n.closed||n.complete()}this.destination.complete()},e.prototype.openWindow=function(){var r=new AE;this.windows.push(r);var n=this.destination;return n.next(r),r},e.prototype.closeWindow=function(r){r.complete();var n=this.windows;n.splice(n.indexOf(r),1)},e}(C);function NE(t){var e=t.subscriber,r=t.windowTimeSpan,n=t.window;n&&e.closeWindow(n),t.window=e.openWindow(),this.schedule(t,r)}function LE(t){var e=t.windowTimeSpan,r=t.subscriber,n=t.scheduler,i=t.windowCreationInterval,s=r.openWindow(),o=this,a={action:o,subscription:null},u={subscriber:r,window:s,context:a};a.subscription=n.schedule(Lf,e,u),o.add(a.subscription),o.schedule(t,i)}function Lf(t){var e=t.subscriber,r=t.window,n=t.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),e.closeWindow(r)}function PE(t,e){return function(r){return r.lift(new jE(t,e))}}var jE=function(){function t(e,r){this.openings=e,this.closingSelector=r}return t.prototype.call=function(e,r){return r.subscribe(new DE(e,this.openings,this.closingSelector))},t}(),DE=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.openings=n,s.closingSelector=i,s.contexts=[],s.add(s.openSubscription=rt(s,n,n)),s}return e.prototype._next=function(r){var n=this.contexts;if(n)for(var i=n.length,s=0;s<i;s++)n[s].window.next(r)},e.prototype._error=function(r){var n=this.contexts;if(this.contexts=null,n)for(var i=n.length,s=-1;++s<i;){var o=n[s];o.window.error(r),o.subscription.unsubscribe()}t.prototype._error.call(this,r)},e.prototype._complete=function(){var r=this.contexts;if(this.contexts=null,r)for(var n=r.length,i=-1;++i<n;){var s=r[i];s.window.complete(),s.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var r=this.contexts;if(this.contexts=null,r)for(var n=r.length,i=-1;++i<n;){var s=r[i];s.window.unsubscribe(),s.subscription.unsubscribe()}},e.prototype.notifyNext=function(r,n,i,s,o){if(r===this.openings){var a=void 0;try{var u=this.closingSelector;a=u(n)}catch(d){return this.error(d)}var c=new ie,l=new J,f={window:c,subscription:l};this.contexts.push(f);var h=rt(this,a,f);h.closed?this.closeWindow(this.contexts.length-1):(h.context=f,l.add(h)),this.destination.next(c)}else this.closeWindow(this.contexts.indexOf(r))},e.prototype.notifyError=function(r){this.error(r)},e.prototype.notifyComplete=function(r){r!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(r.context))},e.prototype.closeWindow=function(r){if(r!==-1){var n=this.contexts,i=n[r],s=i.window,o=i.subscription;n.splice(r,1),s.complete(),o.unsubscribe()}},e}(Ft);function BE(t){return function(r){return r.lift(new FE(t))}}var FE=function(){function t(e){this.closingSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new $E(e,this.closingSelector))},t}(),$E=function(t){g(e,t);function e(r,n){var i=t.call(this,r)||this;return i.destination=r,i.closingSelector=n,i.openWindow(),i}return e.prototype.notifyNext=function(r,n,i,s,o){this.openWindow(o)},e.prototype.notifyError=function(r){this._error(r)},e.prototype.notifyComplete=function(r){this.openWindow(r)},e.prototype._next=function(r){this.window.next(r)},e.prototype._error=function(r){this.window.error(r),this.destination.error(r),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(r){r===void 0&&(r=null),r&&(this.remove(r),r.unsubscribe());var n=this.window;n&&n.complete();var i=this.window=new ie;this.destination.next(i);var s;try{var o=this.closingSelector;s=o()}catch(a){this.destination.error(a),this.window.error(a);return}this.add(this.closingNotification=rt(this,s))},e}(Ft);function VE(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){var n;typeof t[t.length-1]=="function"&&(n=t.pop());var i=t;return r.lift(new WE(i,n))}}var WE=function(){function t(e,r){this.observables=e,this.project=r}return t.prototype.call=function(e,r){return r.subscribe(new HE(e,this.observables,this.project))},t}(),HE=function(t){g(e,t);function e(r,n,i){var s=t.call(this,r)||this;s.observables=n,s.project=i,s.toRespond=[];var o=n.length;s.values=new Array(o);for(var a=0;a<o;a++)s.toRespond.push(a);for(var a=0;a<o;a++){var u=n[a];s.add(rt(s,u,void 0,a))}return s}return e.prototype.notifyNext=function(r,n,i){this.values[i]=n;var s=this.toRespond;if(s.length>0){var o=s.indexOf(i);o!==-1&&s.splice(o,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(r){if(this.toRespond.length===0){var n=[r].concat(this.values);this.project?this._tryProject(n):this.destination.next(n)}},e.prototype._tryProject=function(r){var n;try{n=this.project.apply(this,r)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(Ft);function zE(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(n){return n.lift.call(of.apply(void 0,[n].concat(t)))}}function UE(t){return function(e){return e.lift(new af(t))}}const qE=Object.freeze(Object.defineProperty({__proto__:null,audit:kf,auditTime:q_,buffer:J_,bufferCount:Z_,bufferTime:ew,bufferToggle:sw,bufferWhen:cw,catchError:fw,combineAll:pw,combineLatest:bw,concat:gw,concatAll:Zl,concatMap:Mf,concatMapTo:yw,count:mw,debounce:ww,debounceTime:Cw,defaultIfEmpty:ln,delay:Tw,delayWhen:Lw,dematerialize:Bw,distinct:Vw,distinctUntilChanged:Rf,distinctUntilKeyChanged:qw,elementAt:Kw,endWith:Xw,every:eS,exhaust:nS,exhaustMap:Tf,expand:cS,filter:vt,finalize:fS,find:pS,findIndex:gS,first:yS,flatMap:d1,groupBy:wv,ignoreElements:mS,isEmpty:wS,last:IS,map:Oe,mapTo:MS,materialize:TS,max:PS,merge:jS,mergeAll:xo,mergeMap:Ot,mergeMapTo:DS,mergeScan:BS,min:VS,multicast:Nt,observeOn:Av,onErrorResumeNext:HS,pairwise:qS,partition:QS,pluck:ZS,publish:KS,publishBehavior:XS,publishLast:e2,publishReplay:t2,race:r2,reduce:Ti,refCount:Eo,repeat:n2,repeatWhen:s2,retry:c2,retryWhen:f2,sample:p2,sampleTime:y2,scan:$n,sequenceEqual:w2,share:I2,shareReplay:M2,single:R2,skip:O2,skipLast:P2,skipUntil:B2,skipWhile:V2,startWith:z2,subscribeOn:q2,switchAll:Z2,switchMap:Wr,switchMapTo:Y2,take:Wo,takeLast:Fn,takeUntil:K2,takeWhile:tE,tap:iE,throttle:aE,throttleTime:lE,throwIfEmpty:Ri,timeInterval:pE,timeout:mE,timeoutWith:Nf,timestamp:vE,toArray:SE,window:EE,windowCount:IE,windowTime:RE,windowToggle:PE,windowWhen:BE,withLatestFrom:VE,zip:zE,zipAll:UE},Symbol.toStringTag,{value:"Module"})),Ho=Lt(qE);var Ai={},Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.ClientMessagePublishEvent=Me.ClientMessageSetSessionConfig=Me.ClientMessageGetSessionConfig=Me.ClientMessageIsLinked=Me.ClientMessageHostSession=void 0;function JE(t){return Object.assign({type:"HostSession"},t)}Me.ClientMessageHostSession=JE;function GE(t){return Object.assign({type:"IsLinked"},t)}Me.ClientMessageIsLinked=GE;function QE(t){return Object.assign({type:"GetSessionConfig"},t)}Me.ClientMessageGetSessionConfig=QE;function ZE(t){return Object.assign({type:"SetSessionConfig"},t)}Me.ClientMessageSetSessionConfig=ZE;function YE(t){return Object.assign({type:"PublishEvent"},t)}Me.ClientMessagePublishEvent=YE;var Pf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RxWebSocket=t.ConnectionState=void 0;const e=pi,r=Ho;var n;(function(s){s[s.DISCONNECTED=0]="DISCONNECTED",s[s.CONNECTING=1]="CONNECTING",s[s.CONNECTED=2]="CONNECTED"})(n=t.ConnectionState||(t.ConnectionState={}));class i{constructor(o,a=WebSocket){this.WebSocketClass=a,this.webSocket=null,this.connectionStateSubject=new e.BehaviorSubject(n.DISCONNECTED),this.incomingDataSubject=new e.Subject,this.url=o.replace(/^http/,"ws")}connect(){return this.webSocket?(0,e.throwError)(new Error("webSocket object is not null")):new e.Observable(o=>{let a;try{this.webSocket=a=new this.WebSocketClass(this.url)}catch(u){o.error(u);return}this.connectionStateSubject.next(n.CONNECTING),a.onclose=u=>{this.clearWebSocket(),o.error(new Error(`websocket error ${u.code}: ${u.reason}`)),this.connectionStateSubject.next(n.DISCONNECTED)},a.onopen=u=>{o.next(),o.complete(),this.connectionStateSubject.next(n.CONNECTED)},a.onmessage=u=>{this.incomingDataSubject.next(u.data)}}).pipe((0,r.take)(1))}disconnect(){const{webSocket:o}=this;if(o){this.clearWebSocket(),this.connectionStateSubject.next(n.DISCONNECTED);try{o.close()}catch{}}}get connectionState$(){return this.connectionStateSubject.asObservable()}get incomingData$(){return this.incomingDataSubject.asObservable()}get incomingJSONData$(){return this.incomingData$.pipe((0,r.flatMap)(o=>{let a;try{a=JSON.parse(o)}catch{return(0,e.empty)()}return(0,e.of)(a)}))}sendData(o){const{webSocket:a}=this;if(!a)throw new Error("websocket is not connected");a.send(o)}clearWebSocket(){const{webSocket:o}=this;o&&(this.webSocket=null,o.onclose=null,o.onerror=null,o.onmessage=null,o.onopen=null)}}t.RxWebSocket=i})(Pf);var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.isServerMessageFail=void 0;function KE(t){return t&&t.type==="Fail"&&typeof t.id=="number"&&typeof t.sessionId=="string"&&typeof t.error=="string"}Oi.isServerMessageFail=KE;Object.defineProperty(Ai,"__esModule",{value:!0});Ai.WalletSDKConnection=void 0;const Pe=pi,P=Ho,Ir=pr,Wt=Ur,Mr=Me,xr=hr,En=Pf,ls=Oi,Ac=1e4,XE=6e4;class e3{constructor(e,r,n,i,s=WebSocket){this.sessionId=e,this.sessionKey=r,this.diagnostic=i,this.subscriptions=new Pe.Subscription,this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=(0,Wt.IntNumber)(1),this.connectedSubject=new Pe.BehaviorSubject(!1),this.linkedSubject=new Pe.BehaviorSubject(!1),this.sessionConfigSubject=new Pe.ReplaySubject(1);const o=new En.RxWebSocket(n+"/rpc",s);this.ws=o,this.subscriptions.add(o.connectionState$.pipe((0,P.tap)(a=>{var u;return(u=this.diagnostic)===null||u===void 0?void 0:u.log(xr.EVENTS.CONNECTED_STATE_CHANGE,{state:a,sessionIdHash:Ir.Session.hash(e)})}),(0,P.skip)(1),(0,P.filter)(a=>a===En.ConnectionState.DISCONNECTED&&!this.destroyed),(0,P.delay)(5e3),(0,P.filter)(a=>!this.destroyed),(0,P.flatMap)(a=>o.connect()),(0,P.retry)()).subscribe()),this.subscriptions.add(o.connectionState$.pipe((0,P.skip)(2),(0,P.switchMap)(a=>(0,Pe.iif)(()=>a===En.ConnectionState.CONNECTED,this.authenticate().pipe((0,P.tap)(u=>this.sendIsLinked()),(0,P.tap)(u=>this.sendGetSessionConfig()),(0,P.map)(u=>!0)),(0,Pe.of)(!1))),(0,P.distinctUntilChanged)(),(0,P.catchError)(a=>(0,Pe.of)(!1))).subscribe(a=>this.connectedSubject.next(a))),this.subscriptions.add(o.connectionState$.pipe((0,P.skip)(1),(0,P.switchMap)(a=>(0,Pe.iif)(()=>a===En.ConnectionState.CONNECTED,(0,Pe.timer)(0,Ac)))).subscribe(a=>a===0?this.updateLastHeartbeat():this.heartbeat())),this.subscriptions.add(o.incomingData$.pipe((0,P.filter)(a=>a==="h")).subscribe(a=>this.updateLastHeartbeat())),this.subscriptions.add(o.incomingJSONData$.pipe((0,P.filter)(a=>["IsLinkedOK","Linked"].includes(a.type))).subscribe(a=>{var u;const c=a;(u=this.diagnostic)===null||u===void 0||u.log(xr.EVENTS.LINKED,{sessionIdHash:Ir.Session.hash(e),linked:c.linked,type:a.type,onlineGuests:c.onlineGuests}),this.linkedSubject.next(c.linked||c.onlineGuests>0)})),this.subscriptions.add(o.incomingJSONData$.pipe((0,P.filter)(a=>["GetSessionConfigOK","SessionConfigUpdated"].includes(a.type))).subscribe(a=>{var u;const c=a;(u=this.diagnostic)===null||u===void 0||u.log(xr.EVENTS.SESSION_CONFIG_RECEIVED,{sessionIdHash:Ir.Session.hash(e),metadata_keys:c&&c.metadata?Object.keys(c.metadata):void 0}),this.sessionConfigSubject.next({webhookId:c.webhookId,webhookUrl:c.webhookUrl,metadata:c.metadata})}))}connect(){var e;if(this.destroyed)throw new Error("instance is destroyed");(e=this.diagnostic)===null||e===void 0||e.log(xr.EVENTS.STARTED_CONNECTING,{sessionIdHash:Ir.Session.hash(this.sessionId)}),this.ws.connect().subscribe()}destroy(){var e;this.subscriptions.unsubscribe(),this.ws.disconnect(),(e=this.diagnostic)===null||e===void 0||e.log(xr.EVENTS.DISCONNECTED,{sessionIdHash:Ir.Session.hash(this.sessionId)}),this.destroyed=!0}get isDestroyed(){return this.destroyed}get connected$(){return this.connectedSubject.asObservable()}get onceConnected$(){return this.connected$.pipe((0,P.filter)(e=>e),(0,P.take)(1),(0,P.map)(()=>{}))}get linked$(){return this.linkedSubject.asObservable()}get onceLinked$(){return this.linked$.pipe((0,P.filter)(e=>e),(0,P.take)(1),(0,P.map)(()=>{}))}get sessionConfig$(){return this.sessionConfigSubject.asObservable()}get incomingEvent$(){return this.ws.incomingJSONData$.pipe((0,P.filter)(e=>{if(e.type!=="Event")return!1;const r=e;return typeof r.sessionId=="string"&&typeof r.eventId=="string"&&typeof r.event=="string"&&typeof r.data=="string"}),(0,P.map)(e=>e))}setSessionMetadata(e,r){const n=(0,Mr.ClientMessageSetSessionConfig)({id:(0,Wt.IntNumber)(this.nextReqId++),sessionId:this.sessionId,metadata:{[e]:r}});return this.onceConnected$.pipe((0,P.flatMap)(i=>this.makeRequest(n)),(0,P.map)(i=>{if((0,ls.isServerMessageFail)(i))throw new Error(i.error||"failed to set session metadata")}))}publishEvent(e,r,n=!1){const i=(0,Mr.ClientMessagePublishEvent)({id:(0,Wt.IntNumber)(this.nextReqId++),sessionId:this.sessionId,event:e,data:r,callWebhook:n});return this.onceLinked$.pipe((0,P.flatMap)(s=>this.makeRequest(i)),(0,P.map)(s=>{if((0,ls.isServerMessageFail)(s))throw new Error(s.error||"failed to publish event");return s.eventId}))}sendData(e){this.ws.sendData(JSON.stringify(e))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>Ac*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch{}}makeRequest(e,r=XE){const n=e.id;try{this.sendData(e)}catch(i){return(0,Pe.throwError)(i)}return this.ws.incomingJSONData$.pipe((0,P.timeoutWith)(r,(0,Pe.throwError)(new Error(`request ${n} timed out`))),(0,P.filter)(i=>i.id===n),(0,P.take)(1))}authenticate(){const e=(0,Mr.ClientMessageHostSession)({id:(0,Wt.IntNumber)(this.nextReqId++),sessionId:this.sessionId,sessionKey:this.sessionKey});return this.makeRequest(e).pipe((0,P.map)(r=>{if((0,ls.isServerMessageFail)(r))throw new Error(r.error||"failed to authentcate")}))}sendIsLinked(){const e=(0,Mr.ClientMessageIsLinked)({id:(0,Wt.IntNumber)(this.nextReqId++),sessionId:this.sessionId});this.sendData(e)}sendGetSessionConfig(){const e=(0,Mr.ClientMessageGetSessionConfig)({id:(0,Wt.IntNumber)(this.nextReqId++),sessionId:this.sessionId});this.sendData(e)}}Ai.WalletSDKConnection=e3;var lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.decrypt=lr.encrypt=void 0;const Vn=S;async function t3(t,e){if(e.length!==64)throw Error("secret must be 256 bits");const r=crypto.getRandomValues(new Uint8Array(12)),n=await crypto.subtle.importKey("raw",(0,Vn.hexStringToUint8Array)(e),{name:"aes-gcm"},!1,["encrypt","decrypt"]),i=new TextEncoder,s=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,i.encode(t)),o=16,a=s.slice(s.byteLength-o),u=s.slice(0,s.byteLength-o),c=new Uint8Array(a),l=new Uint8Array(u),f=new Uint8Array([...r,...c,...l]);return(0,Vn.uint8ArrayToHex)(f)}lr.encrypt=t3;function r3(t,e){if(e.length!==64)throw Error("secret must be 256 bits");return new Promise((r,n)=>{(async function(){const i=await crypto.subtle.importKey("raw",(0,Vn.hexStringToUint8Array)(e),{name:"aes-gcm"},!1,["encrypt","decrypt"]),s=(0,Vn.hexStringToUint8Array)(t),o=s.slice(0,12),a=s.slice(12,28),u=s.slice(28),c=new Uint8Array([...u,...a]),l={name:"AES-GCM",iv:new Uint8Array(o)};try{const f=await window.crypto.subtle.decrypt(l,i,c),h=new TextDecoder;r(h.decode(f))}catch(f){n(f)}})()})}lr.decrypt=r3;var Ni={},Li={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RelayMessageType=void 0,function(e){e.SESSION_ID_REQUEST="SESSION_ID_REQUEST",e.SESSION_ID_RESPONSE="SESSION_ID_RESPONSE",e.LINKED="LINKED",e.UNLINKED="UNLINKED",e.WEB3_REQUEST="WEB3_REQUEST",e.WEB3_REQUEST_CANCELED="WEB3_REQUEST_CANCELED",e.WEB3_RESPONSE="WEB3_RESPONSE"}(t.RelayMessageType||(t.RelayMessageType={}))})(Li);Object.defineProperty(Ni,"__esModule",{value:!0});Ni.Web3RequestCanceledMessage=void 0;const n3=Li;function i3(t){return{type:n3.RelayMessageType.WEB3_REQUEST_CANCELED,id:t}}Ni.Web3RequestCanceledMessage=i3;var Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.Web3RequestMessage=void 0;const s3=Li;function o3(t){return Object.assign({type:s3.RelayMessageType.WEB3_REQUEST},t)}Pi.Web3RequestMessage=o3;var fr={};Object.defineProperty(fr,"__esModule",{value:!0});fr.isWeb3ResponseMessage=fr.Web3ResponseMessage=void 0;const jf=Li;function a3(t){return Object.assign({type:jf.RelayMessageType.WEB3_RESPONSE},t)}fr.Web3ResponseMessage=a3;function c3(t){return t&&t.type===jf.RelayMessageType.WEB3_RESPONSE}fr.isWeb3ResponseMessage=c3;var u3=E&&E.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),l3=E&&E.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Df=E&&E.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s},f3=E&&E.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&u3(e,t,r);return l3(e,t),e},h3=E&&E.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.WalletSDKRelay=void 0;const Bf=h3(xi),Et=pi,X=Ho,ue=hr,d3=Ai,Ht=zr,p3=Ur,H=S,ct=f3(lr),ut=pr,Cn=Be,se=Gn,b3=Ni,g3=Pi,ke=W,ye=fr;class De extends Cn.WalletSDKRelayAbstract{constructor(e){var r;super(),this.accountsCallback=null,this.chainCallback=null,this.dappDefaultChainSubject=new Et.BehaviorSubject(1),this.dappDefaultChain=1,this.appName="",this.appLogoUrl=null,this.subscriptions=new Et.Subscription,this.linkAPIUrl=e.linkAPIUrl,this.storage=e.storage,this.options=e;const{session:n,ui:i,connection:s}=this.subscribe();if(this._session=n,this.connection=s,this.relayEventManager=e.relayEventManager,e.diagnosticLogger&&e.eventListener)throw new Error("Can't have both eventListener and diagnosticLogger options, use only diagnosticLogger");e.eventListener?this.diagnostic={log:e.eventListener.onEvent}:this.diagnostic=e.diagnosticLogger,this._reloadOnDisconnect=(r=e.reloadOnDisconnect)!==null&&r!==void 0?r:!0,this.ui=i}subscribe(){this.subscriptions.add(this.dappDefaultChainSubject.subscribe(i=>{this.dappDefaultChain!==i&&(this.dappDefaultChain=i)}));const e=ut.Session.load(this.storage)||new ut.Session(this.storage).save(),r=new d3.WalletSDKConnection(e.id,e.key,this.linkAPIUrl,this.diagnostic);this.subscriptions.add(r.sessionConfig$.subscribe({next:i=>{this.onSessionConfigChanged(i)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ue.EVENTS.GENERAL_ERROR,{message:"error while invoking session config callback"})}})),this.subscriptions.add(r.incomingEvent$.pipe((0,X.filter)(i=>i.event==="Web3Response")).subscribe({next:this.handleIncomingEvent})),this.subscriptions.add(r.linked$.pipe((0,X.skip)(1),(0,X.tap)(i=>{var s;this.isLinked=i;const o=this.storage.getItem(Cn.LOCAL_STORAGE_ADDRESSES_KEY);if(i&&(this.session.linked=i),this.isUnlinkedErrorState=!1,o){const a=o.split(" "),u=this.storage.getItem("IsStandaloneSigning")==="true";if(a[0]!==""&&!i&&this.session.linked&&!u){this.isUnlinkedErrorState=!0;const c=this.getSessionIdHash();(s=this.diagnostic)===null||s===void 0||s.log(ue.EVENTS.UNLINKED_ERROR_STATE,{sessionIdHash:c})}}})).subscribe()),this.subscriptions.add(r.sessionConfig$.pipe((0,X.filter)(i=>!!i.metadata&&i.metadata.__destroyed==="1")).subscribe(()=>{var i;const s=r.isDestroyed;return(i=this.diagnostic)===null||i===void 0||i.log(ue.EVENTS.METADATA_DESTROYED,{alreadyDestroyed:s,sessionIdHash:this.getSessionIdHash()}),this.resetAndReload()})),this.subscriptions.add(r.sessionConfig$.pipe((0,X.filter)(i=>i.metadata&&i.metadata.WalletUsername!==void 0)).pipe((0,X.mergeMap)(i=>ct.decrypt(i.metadata.WalletUsername,e.secret))).subscribe({next:i=>{this.storage.setItem(Cn.WALLET_USER_NAME_KEY,i)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ue.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"username"})}})),this.subscriptions.add(r.sessionConfig$.pipe((0,X.filter)(i=>i.metadata&&i.metadata.AppVersion!==void 0)).pipe((0,X.mergeMap)(i=>ct.decrypt(i.metadata.AppVersion,e.secret))).subscribe({next:i=>{this.storage.setItem(Cn.APP_VERSION_KEY,i)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ue.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"appversion"})}})),this.subscriptions.add(r.sessionConfig$.pipe((0,X.filter)(i=>i.metadata&&i.metadata.ChainId!==void 0&&i.metadata.JsonRpcUrl!==void 0)).pipe((0,X.mergeMap)(i=>(0,Et.zip)(ct.decrypt(i.metadata.ChainId,e.secret),ct.decrypt(i.metadata.JsonRpcUrl,e.secret)))).pipe((0,X.distinctUntilChanged)()).subscribe({next:([i,s])=>{this.chainCallback&&this.chainCallback(i,s)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ue.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"chainId|jsonRpcUrl"})}})),this.subscriptions.add(r.sessionConfig$.pipe((0,X.filter)(i=>i.metadata&&i.metadata.EthereumAddress!==void 0)).pipe((0,X.mergeMap)(i=>ct.decrypt(i.metadata.EthereumAddress,e.secret))).subscribe({next:i=>{this.accountsCallback&&this.accountsCallback([i]),De.accountRequestCallbackIds.size>0&&(Array.from(De.accountRequestCallbackIds.values()).forEach(s=>{const o=(0,ye.Web3ResponseMessage)({id:s,response:(0,ke.RequestEthereumAccountsResponse)([i])});this.invokeCallback(Object.assign(Object.assign({},o),{id:s}))}),De.accountRequestCallbackIds.clear())},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ue.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"selectedAddress"})}})),this.subscriptions.add(r.sessionConfig$.pipe((0,X.filter)(i=>i.metadata&&i.metadata.AppSrc!==void 0)).pipe((0,X.mergeMap)(i=>ct.decrypt(i.metadata.AppSrc,e.secret))).subscribe({next:i=>{this.ui.setAppSrc(i)},error:()=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(ue.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"appSrc"})}}));const n=this.options.uiConstructor({linkAPIUrl:this.options.linkAPIUrl,version:this.options.version,darkMode:this.options.darkMode,session:e,connected$:r.connected$,chainId$:this.dappDefaultChainSubject});return r.connect(),{session:e,ui:n,connection:r}}attachUI(){this.ui.attach()}resetAndReload(){this.connection.setSessionMetadata("__destroyed","1").pipe((0,X.timeout)(1e3),(0,X.catchError)(e=>(0,Et.of)(null))).subscribe(e=>{var r,n,i;const s=this.ui.isStandalone();try{this.subscriptions.unsubscribe()}catch{(r=this.diagnostic)===null||r===void 0||r.log(ue.EVENTS.GENERAL_ERROR,{message:"Had error unsubscribing"})}(n=this.diagnostic)===null||n===void 0||n.log(ue.EVENTS.SESSION_STATE_CHANGE,{method:"relay::resetAndReload",sessionMetadataChange:"__destroyed, 1",sessionIdHash:this.getSessionIdHash()}),this.connection.destroy();const o=ut.Session.load(this.storage);if((o==null?void 0:o.id)===this._session.id?this.storage.clear():o&&((i=this.diagnostic)===null||i===void 0||i.log(ue.EVENTS.SKIPPED_CLEARING_SESSION,{sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:ut.Session.hash(o.id)})),this._reloadOnDisconnect){this.ui.reloadUI();return}this.accountsCallback&&this.accountsCallback([],!0),this.subscriptions=new Et.Subscription;const{session:a,ui:u,connection:c}=this.subscribe();this._session=a,this.connection=c,this.ui=u,s&&this.ui.setStandalone&&this.ui.setStandalone(!0),this.attachUI()},e=>{var r;(r=this.diagnostic)===null||r===void 0||r.log(ue.EVENTS.FAILURE,{method:"relay::resetAndReload",message:`failed to reset and reload with ${e}`,sessionIdHash:this.getSessionIdHash()})})}setAppInfo(e,r){this.appName=e,this.appLogoUrl=r}getStorageItem(e){return this.storage.getItem(e)}get session(){return this._session}setStorageItem(e,r){this.storage.setItem(e,r)}signEthereumMessage(e,r,n,i){return this.sendRequest({method:se.Web3Method.signEthereumMessage,params:{message:(0,H.hexStringFromBuffer)(e,!0),address:r,addPrefix:n,typedDataJson:i||null}})}ethereumAddressFromSignedMessage(e,r,n){return this.sendRequest({method:se.Web3Method.ethereumAddressFromSignedMessage,params:{message:(0,H.hexStringFromBuffer)(e,!0),signature:(0,H.hexStringFromBuffer)(r,!0),addPrefix:n}})}signEthereumTransaction(e){return this.sendRequest({method:se.Web3Method.signEthereumTransaction,params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,H.bigIntStringFromBN)(e.weiValue),data:(0,H.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,H.bigIntStringFromBN)(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?(0,H.bigIntStringFromBN)(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?(0,H.bigIntStringFromBN)(e.gasPriceInWei):null,gasLimit:e.gasLimit?(0,H.bigIntStringFromBN)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(e){return this.sendRequest({method:se.Web3Method.signEthereumTransaction,params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,H.bigIntStringFromBN)(e.weiValue),data:(0,H.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,H.bigIntStringFromBN)(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?(0,H.bigIntStringFromBN)(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?(0,H.bigIntStringFromBN)(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?(0,H.bigIntStringFromBN)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}submitEthereumTransaction(e,r){return this.sendRequest({method:se.Web3Method.submitEthereumTransaction,params:{signedTransaction:(0,H.hexStringFromBuffer)(e,!0),chainId:r}})}scanQRCode(e){return this.sendRequest({method:se.Web3Method.scanQRCode,params:{regExp:e}})}getQRCodeUrl(){return(0,H.createQrUrl)(this._session.id,this._session.secret,this.linkAPIUrl,!1,this.options.version,this.dappDefaultChain)}genericRequest(e,r){return this.sendRequest({method:se.Web3Method.generic,params:{action:r,data:e}})}sendGenericMessage(e){return this.sendRequest(e)}sendRequest(e){let r=null;const n=(0,H.randomBytesHex)(8),i=o=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,e.method,o),r==null||r()};return{promise:new Promise((o,a)=>{this.ui.isStandalone()||(r=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:i,onResetConnection:this.resetAndReload})),this.relayEventManager.callbacks.set(n,u=>{if(r==null||r(),u.errorMessage)return a(new Error(u.errorMessage));o(u)}),this.ui.isStandalone()?this.sendRequestStandalone(n,e):this.publishWeb3RequestEvent(n,e)}),cancel:i}}setConnectDisabled(e){this.ui.setConnectDisabled(e)}setAccountsCallback(e){this.accountsCallback=e}setChainCallback(e){this.chainCallback=e}setDappDefaultChainCallback(e){this.dappDefaultChainSubject.next(e)}publishWeb3RequestEvent(e,r){var n;const i=(0,g3.Web3RequestMessage)({id:e,request:r}),s=ut.Session.load(this.storage);(n=this.diagnostic)===null||n===void 0||n.log(ue.EVENTS.WEB3_REQUEST,{eventId:i.id,method:`relay::${i.request.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:s?ut.Session.hash(s.id):"",isSessionMismatched:((s==null?void 0:s.id)!==this._session.id).toString()}),this.subscriptions.add(this.publishEvent("Web3Request",i,!0).subscribe({next:o=>{var a;(a=this.diagnostic)===null||a===void 0||a.log(ue.EVENTS.WEB3_REQUEST_PUBLISHED,{eventId:i.id,method:`relay::${i.request.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:s?ut.Session.hash(s.id):"",isSessionMismatched:((s==null?void 0:s.id)!==this._session.id).toString()})},error:o=>{this.handleWeb3ResponseMessage((0,ye.Web3ResponseMessage)({id:i.id,response:{method:i.request.method,errorMessage:o.message}}))}}))}publishWeb3RequestCanceledEvent(e){const r=(0,b3.Web3RequestCanceledMessage)(e);this.subscriptions.add(this.publishEvent("Web3RequestCanceled",r,!1).subscribe())}publishEvent(e,r,n){const i=this.session.secret;return new Et.Observable(s=>{ct.encrypt(JSON.stringify(Object.assign(Object.assign({},r),{origin:location.origin})),i).then(o=>{s.next(o),s.complete()})}).pipe((0,X.mergeMap)(s=>this.connection.publishEvent(e,s,n)))}handleIncomingEvent(e){try{this.subscriptions.add((0,Et.from)(ct.decrypt(e.data,this.session.secret)).pipe((0,X.map)(r=>JSON.parse(r))).subscribe({next:r=>{const n=(0,ye.isWeb3ResponseMessage)(r)?r:null;n&&this.handleWeb3ResponseMessage(n)},error:()=>{var r;(r=this.diagnostic)===null||r===void 0||r.log(ue.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"incomingEvent"})}}))}catch{return}}handleWeb3ResponseMessage(e){var r;const{response:n}=e;if((r=this.diagnostic)===null||r===void 0||r.log(ue.EVENTS.WEB3_RESPONSE,{eventId:e.id,method:`relay::${n.method}`,sessionIdHash:this.getSessionIdHash()}),(0,ke.isRequestEthereumAccountsResponse)(n)){De.accountRequestCallbackIds.forEach(i=>this.invokeCallback(Object.assign(Object.assign({},e),{id:i}))),De.accountRequestCallbackIds.clear();return}this.invokeCallback(e)}handleErrorResponse(e,r,n,i){var s;const o=(s=n==null?void 0:n.message)!==null&&s!==void 0?s:(0,Ht.standardErrorMessage)(i);this.handleWeb3ResponseMessage((0,ye.Web3ResponseMessage)({id:e,response:{method:r,errorMessage:o,errorCode:i}}))}invokeCallback(e){const r=this.relayEventManager.callbacks.get(e.id);r&&(r(e.response),this.relayEventManager.callbacks.delete(e.id))}requestEthereumAccounts(){const e={method:se.Web3Method.requestEthereumAccounts,params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}},r=(0,H.randomBytesHex)(8),n=s=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,e.method,s)};return{promise:new Promise((s,o)=>{var a;this.relayEventManager.callbacks.set(r,c=>{if(this.ui.hideRequestEthereumAccounts(),c.errorMessage)return o(new Error(c.errorMessage));s(c)});const u=((a=window==null?void 0:window.navigator)===null||a===void 0?void 0:a.userAgent)||null;if(u&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(u)){let c;try{(0,H.isInIFrame)()&&window.top?c=window.top.location:c=window.location}catch{c=window.location}c.href=`https://www.coinbase.com/connect-dapp?uri=${encodeURIComponent(c.href)}`;return}if(this.ui.inlineAccountsResponse()){const c=l=>{this.handleWeb3ResponseMessage((0,ye.Web3ResponseMessage)({id:r,response:(0,ke.RequestEthereumAccountsResponse)(l)}))};this.ui.requestEthereumAccounts({onCancel:n,onAccounts:c})}else{const c=Ht.standardErrors.provider.userRejectedRequest("User denied account authorization");this.ui.requestEthereumAccounts({onCancel:()=>n(c)})}De.accountRequestCallbackIds.add(r),!this.ui.inlineAccountsResponse()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(r,e)}),cancel:n}}selectProvider(e){const r={method:se.Web3Method.selectProvider,params:{providerOptions:e}},n=(0,H.randomBytesHex)(8),i=o=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,r.method,o)},s=new Promise((o,a)=>{this.relayEventManager.callbacks.set(n,l=>{if(l.errorMessage)return a(new Error(l.errorMessage));o(l)});const u=l=>{this.handleWeb3ResponseMessage((0,ye.Web3ResponseMessage)({id:n,response:(0,ke.SelectProviderResponse)(p3.ProviderType.Unselected)}))},c=l=>{this.handleWeb3ResponseMessage((0,ye.Web3ResponseMessage)({id:n,response:(0,ke.SelectProviderResponse)(l)}))};this.ui.selectProvider&&this.ui.selectProvider({onApprove:c,onCancel:u,providerOptions:e})});return{cancel:i,promise:s}}watchAsset(e,r,n,i,s,o){const a={method:se.Web3Method.watchAsset,params:{type:e,options:{address:r,symbol:n,decimals:i,image:s},chainId:o}};let u=null;const c=(0,H.randomBytesHex)(8),l=h=>{this.publishWeb3RequestCanceledEvent(c),this.handleErrorResponse(c,a.method,h),u==null||u()};this.ui.inlineWatchAsset()||(u=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:l,onResetConnection:this.resetAndReload}));const f=new Promise((h,d)=>{this.relayEventManager.callbacks.set(c,y=>{if(u==null||u(),y.errorMessage)return d(new Error(y.errorMessage));h(y)});const p=y=>{this.handleWeb3ResponseMessage((0,ye.Web3ResponseMessage)({id:c,response:(0,ke.WatchAssetReponse)(!1)}))},v=()=>{this.handleWeb3ResponseMessage((0,ye.Web3ResponseMessage)({id:c,response:(0,ke.WatchAssetReponse)(!0)}))};this.ui.inlineWatchAsset()&&this.ui.watchAsset({onApprove:v,onCancel:p,type:e,address:r,symbol:n,decimals:i,image:s,chainId:o}),!this.ui.inlineWatchAsset()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(c,a)});return{cancel:l,promise:f}}addEthereumChain(e,r,n,i,s,o){const a={method:se.Web3Method.addEthereumChain,params:{chainId:e,rpcUrls:r,blockExplorerUrls:i,chainName:s,iconUrls:n,nativeCurrency:o}};let u=null;const c=(0,H.randomBytesHex)(8),l=h=>{this.publishWeb3RequestCanceledEvent(c),this.handleErrorResponse(c,a.method,h),u==null||u()};return this.ui.inlineAddEthereumChain(e)||(u=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:l,onResetConnection:this.resetAndReload})),{promise:new Promise((h,d)=>{this.relayEventManager.callbacks.set(c,y=>{if(u==null||u(),y.errorMessage)return d(new Error(y.errorMessage));h(y)});const p=y=>{this.handleWeb3ResponseMessage((0,ye.Web3ResponseMessage)({id:c,response:(0,ke.AddEthereumChainResponse)({isApproved:!1,rpcUrl:""})}))},v=y=>{this.handleWeb3ResponseMessage((0,ye.Web3ResponseMessage)({id:c,response:(0,ke.AddEthereumChainResponse)({isApproved:!0,rpcUrl:y})}))};this.ui.inlineAddEthereumChain(e)&&this.ui.addEthereumChain({onCancel:p,onApprove:v,chainId:a.params.chainId,rpcUrls:a.params.rpcUrls,blockExplorerUrls:a.params.blockExplorerUrls,chainName:a.params.chainName,iconUrls:a.params.iconUrls,nativeCurrency:a.params.nativeCurrency}),!this.ui.inlineAddEthereumChain(e)&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(c,a)}),cancel:l}}switchEthereumChain(e,r){const n={method:se.Web3Method.switchEthereumChain,params:Object.assign({chainId:e},{address:r})},i=(0,H.randomBytesHex)(8),s=a=>{this.publishWeb3RequestCanceledEvent(i),this.handleErrorResponse(i,n.method,a)};return{promise:new Promise((a,u)=>{this.relayEventManager.callbacks.set(i,f=>{if((0,ke.isErrorResponse)(f)&&f.errorCode)return u(Ht.standardErrors.provider.custom({code:f.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if(f.errorMessage)return u(new Error(f.errorMessage));a(f)});const c=f=>{var h;if(f){const d=(h=(0,Ht.getErrorCode)(f))!==null&&h!==void 0?h:Ht.standardErrorCodes.provider.unsupportedChain;this.handleErrorResponse(i,se.Web3Method.switchEthereumChain,f instanceof Error?f:Ht.standardErrors.provider.unsupportedChain(e),d)}else this.handleWeb3ResponseMessage((0,ye.Web3ResponseMessage)({id:i,response:(0,ke.SwitchEthereumChainResponse)({isApproved:!1,rpcUrl:""})}))},l=f=>{this.handleWeb3ResponseMessage((0,ye.Web3ResponseMessage)({id:i,response:(0,ke.SwitchEthereumChainResponse)({isApproved:!0,rpcUrl:f})}))};this.ui.switchEthereumChain({onCancel:c,onApprove:l,chainId:n.params.chainId,address:n.params.address}),!this.ui.inlineSwitchEthereumChain()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(i,n)}),cancel:s}}inlineAddEthereumChain(e){return this.ui.inlineAddEthereumChain(e)}getSessionIdHash(){return ut.Session.hash(this._session.id)}sendRequestStandalone(e,r){const n=s=>{this.handleErrorResponse(e,r.method,s)},i=s=>{this.handleWeb3ResponseMessage((0,ye.Web3ResponseMessage)({id:e,response:s}))};switch(r.method){case se.Web3Method.signEthereumMessage:this.ui.signEthereumMessage({request:r,onSuccess:i,onCancel:n});break;case se.Web3Method.signEthereumTransaction:this.ui.signEthereumTransaction({request:r,onSuccess:i,onCancel:n});break;case se.Web3Method.submitEthereumTransaction:this.ui.submitEthereumTransaction({request:r,onSuccess:i,onCancel:n});break;case se.Web3Method.ethereumAddressFromSignedMessage:this.ui.ethereumAddressFromSignedMessage({request:r,onSuccess:i});break;default:n();break}}onSessionConfigChanged(e){}}De.accountRequestCallbackIds=new Set;Df([Bf.default],De.prototype,"resetAndReload",null);Df([Bf.default],De.prototype,"handleIncomingEvent",null);Mi.WalletSDKRelay=De;var ji={};Object.defineProperty(ji,"__esModule",{value:!0});ji.WalletSDKRelayEventManager=void 0;const y3=S;class m3{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const e=this._nextRequestId,r=(0,y3.prepend0x)(e.toString(16));return this.callbacks.get(r)&&this.callbacks.delete(r),e}}ji.WalletSDKRelayEventManager=m3;Object.defineProperty(jr,"__esModule",{value:!0});jr.CoinbaseWalletSDK=void 0;const v3=zn,_3=Un,w3=qn,S3=Yt,E3=li,C3=Mi,k3=ji,I3=S,Ff=dr;class Di{constructor(e){var r,n,i;this._appName="",this._appLogoUrl=null,this._relay=null,this._relayEventManager=null;const s=e.linkAPIUrl||_3.LINK_API_URL;let o;if(e.uiConstructor?o=e.uiConstructor:o=c=>new E3.WalletSDKUI(c),typeof e.overrideIsMetaMask>"u"?this._overrideIsMetaMask=!1:this._overrideIsMetaMask=e.overrideIsMetaMask,this._overrideIsCoinbaseWallet=(r=e.overrideIsCoinbaseWallet)!==null&&r!==void 0?r:!0,this._overrideIsCoinbaseBrowser=(n=e.overrideIsCoinbaseBrowser)!==null&&n!==void 0?n:!1,e.diagnosticLogger&&e.eventListener)throw new Error("Can't have both eventListener and diagnosticLogger options, use only diagnosticLogger");e.eventListener?this._diagnosticLogger={log:e.eventListener.onEvent}:this._diagnosticLogger=e.diagnosticLogger,this._reloadOnDisconnect=(i=e.reloadOnDisconnect)!==null&&i!==void 0?i:!0;const a=new URL(s),u=`${a.protocol}//${a.host}`;this._storage=new w3.ScopedLocalStorage(`-walletlink:${u}`),this._storage.setItem("version",Di.VERSION),!(this.walletExtension||this.coinbaseBrowser)&&(this._relayEventManager=new k3.WalletSDKRelayEventManager,this._relay=new C3.WalletSDKRelay({linkAPIUrl:s,version:Ff.LIB_VERSION,darkMode:!!e.darkMode,uiConstructor:o,storage:this._storage,relayEventManager:this._relayEventManager,diagnosticLogger:this._diagnosticLogger,reloadOnDisconnect:this._reloadOnDisconnect}),this.setAppInfo(e.appName,e.appLogoUrl),!e.headlessMode&&this._relay.attachUI())}makeWeb3Provider(e="",r=1){const n=this.walletExtension;if(n)return this.isCipherProvider(n)||n.setProviderInfo(e,r),this._reloadOnDisconnect===!1&&typeof n.disableReloadOnDisconnect=="function"&&n.disableReloadOnDisconnect(),n;const i=this.coinbaseBrowser;if(i)return i;const s=this._relay;if(!s||!this._relayEventManager||!this._storage)throw new Error("Relay not initialized, should never happen");return e||s.setConnectDisabled(!0),new S3.CoinbaseWalletProvider({relayProvider:()=>Promise.resolve(s),relayEventManager:this._relayEventManager,storage:this._storage,jsonRpcUrl:e,chainId:r,qrUrl:this.getQrUrl(),diagnosticLogger:this._diagnosticLogger,overrideIsMetaMask:this._overrideIsMetaMask,overrideIsCoinbaseWallet:this._overrideIsCoinbaseWallet,overrideIsCoinbaseBrowser:this._overrideIsCoinbaseBrowser})}setAppInfo(e,r){var n;this._appName=e||"DApp",this._appLogoUrl=r||(0,I3.getFavicon)();const i=this.walletExtension;i?this.isCipherProvider(i)||i.setAppInfo(this._appName,this._appLogoUrl):(n=this._relay)===null||n===void 0||n.setAppInfo(this._appName,this._appLogoUrl)}disconnect(){var e;const r=this.walletExtension;r?r.close():(e=this._relay)===null||e===void 0||e.resetAndReload()}getQrUrl(){var e,r;return(r=(e=this._relay)===null||e===void 0?void 0:e.getQRCodeUrl())!==null&&r!==void 0?r:null}getCoinbaseWalletLogo(e,r=240){return(0,v3.walletLogo)(e,r)}get walletExtension(){var e;return(e=window.coinbaseWalletExtension)!==null&&e!==void 0?e:window.walletLinkExtension}get coinbaseBrowser(){var e,r;try{const n=(e=window.ethereum)!==null&&e!==void 0?e:(r=window.top)===null||r===void 0?void 0:r.ethereum;return n&&"isCoinbaseBrowser"in n&&n.isCoinbaseBrowser?n:void 0}catch{return}}isCipherProvider(e){return typeof e.isCipher=="boolean"&&e.isCipher}}jr.CoinbaseWalletSDK=Di;Di.VERSION=Ff.LIB_VERSION;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CoinbaseWalletProvider=t.CoinbaseWalletSDK=void 0;const e=jr,r=Yt;var n=jr;Object.defineProperty(t,"CoinbaseWalletSDK",{enumerable:!0,get:function(){return n.CoinbaseWalletSDK}});var i=Yt;Object.defineProperty(t,"CoinbaseWalletProvider",{enumerable:!0,get:function(){return i.CoinbaseWalletProvider}}),t.default=e.CoinbaseWalletSDK,typeof window<"u"&&(window.CoinbaseWalletSDK=e.CoinbaseWalletSDK,window.CoinbaseWalletProvider=r.CoinbaseWalletProvider,window.WalletLink=e.CoinbaseWalletSDK,window.WalletLinkProvider=r.CoinbaseWalletProvider)})(Ds);const M3=qf(Ds),D3=rh({__proto__:null,default:M3},[Ds]);export{D3 as i};
